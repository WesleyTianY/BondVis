(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0b552f60"],{"0023":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dashboard-container",staticStyle:{width:"1800px",padding:"0 0"}},[n("div",{staticStyle:{height:"80%"}},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm-2",staticStyle:{padding:"0 0"}},[n("MacroView",{attrs:{end_date:t.end_date,duration_days:t.duration_days},on:{"data-loaded":t.handleDataLoaded}})],1),n("div",{staticClass:"col-sm-5",staticStyle:{padding:"0 0"}},[n("div",{staticClass:"col"},[n("div",{staticClass:"row-sm-2",staticStyle:{padding:"0 0"}},[n("MesoView",{attrs:{selected_bond_list:t.selected_bond_list,end_date:t.end_date,duration_days:t.duration_days}})],1)])]),n("div",{staticClass:"col-sm-5",staticStyle:{padding:"0 0"}},[n("GraphInfoView"),n("RecordView",{attrs:{end_date:t.end_date,duration_days:t.duration_days}})],1)])])])},a=[],i=n("5530"),o=(n("4de4"),n("caad"),n("d3b7"),n("2532"),n("2f62")),s=n("7084"),c=n("0942"),l=n("205f"),u=n("b885"),d=n("6197"),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-card",{staticStyle:{height:"100%"},attrs:{"no-body":""}},[n("b-card-header",{staticClass:"large-header",staticStyle:{height:"230px",padding:"5px 20px 0px 20px"}},[n("div",{staticStyle:{display:"flex","margin-top":"10px"}},[n("span",{staticStyle:{"font-size":"15px"}},[n("b",[t._v("Bond List View")])]),n("b-dropdown",{staticStyle:{"margin-left":"20px",height:"15px",display:"flex","align-items":"center"},attrs:{dropright:"",size:"sm",variant:"outline-secondary","toggle-class":"text-decoration-none"},scopedSlots:t._u([{key:"button-content",fn:function(){return[n("b-icon-gear",{staticStyle:{"font-size":"12px",height:"16px",width:"20px"}})]},proxy:!0}])},[n("div",{staticStyle:{width:"150px","margin-left":"10px","font-size":"12px"}},[t._v(" Bond price Threshold1 "),n("vue-slider",{staticStyle:{"margin-left":"20px","margin-right":"10px","margin-bottom":"30px"},attrs:{min:1,max:4,interval:.5,marks:!0},model:{value:t.Threshold_local,callback:function(e){t.Threshold_local=e},expression:"Threshold_local"}})],1)])],1),n("div",{staticStyle:{display:"flex","margin-top":"10px",float:"left"}},[n("el-date-picker",{attrs:{type:"date",placeholder:"Pick a day"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),n("button",{staticClass:"btn btn-secondary button",staticStyle:{"margin-right":"10px"},on:{click:function(e){return t.timeClick(t.date)}}},[t._v(" OK ")])],1),n("div",{staticStyle:{display:"flex","margin-top":"10px",float:"left"}},[n("span",{staticStyle:{"font-size":"12px"}},[t._v("Trans num")]),n("vue-slider",{staticStyle:{width:"150px","margin-left":"20px"},attrs:{adsorb:!0,data:t.transaction_num_range_list,included:!0},model:{value:t.transaction_num_range,callback:function(e){t.transaction_num_range=e},expression:"transaction_num_range"}})],1),n("div",{staticStyle:{display:"flex","margin-top":"10px",float:"left"}},[n("span",{staticStyle:{"margin-top":"5px"}},[t._v("Sort by number")]),n("b-button-group",{staticStyle:{"margin-left":"10px",float:"right"},attrs:{size:"sm"}},[n("b-button",{staticStyle:{"font-size":"12px",height:"25px","margin-left":"24px",float:"right"},attrs:{variant:"outline-secondary"},on:{click:function(e){return t.updateNumSort("num_descending")}}},[n("b-icon-arrow-down")],1),n("b-button",{staticStyle:{"font-size":"12px",height:"25px"},attrs:{variant:"outline-secondary"},on:{click:function(e){return t.updateNumSort("num_ascending")}}},[n("b-icon-arrow-up")],1)],1)],1),n("div",{staticStyle:{display:"flex","margin-top":"10px",float:"left"}},[n("span",{staticStyle:{"font-size":"12px",float:"left"}},[t._v("Trans vol")]),n("vue-slider",{staticStyle:{width:"150px","margin-left":"27px"},attrs:{adsorb:!0,data:t.transaction_volume_range_list,included:!0},model:{value:t.transaction_volume_range,callback:function(e){t.transaction_volume_range=e},expression:"transaction_volume_range"}})],1),n("div",{staticStyle:{display:"flex","margin-top":"10px",float:"left"}},[n("span",{staticStyle:{"margin-top":"5px"}},[t._v("Sort by volume")]),n("b-button-group",{staticStyle:{"margin-left":"10px",float:"right"},attrs:{size:"sm"}},[n("b-button",{staticStyle:{"font-size":"12px",height:"25px","margin-left":"24px",float:"right"},attrs:{variant:"outline-secondary"},on:{click:function(e){return t.updateVolSort("vol_descending")}}},[n("b-icon-arrow-down")],1),n("b-button",{staticStyle:{"font-size":"12px",height:"25px"},attrs:{variant:"outline-secondary"},on:{click:function(e){return t.updateVolSort("vol_ascending")}}},[n("b-icon-arrow-up")],1)],1)],1)]),n("b-card-body",{staticStyle:{overflow:"scroll",height:"570px",padding:"2px"}},[n("div",{staticStyle:{display:"flex","flex-direction":"column"}},[n("div",{staticStyle:{flex:"1"}},[n("div",{staticStyle:{display:"block",height:"20px","margin-top":"0px",float:"right"}},[n("b-input-group",{staticStyle:{width:"278px"},attrs:{size:"sm"},scopedSlots:t._u([{key:"append",fn:function(){return[n("b-input-group-text",{staticStyle:{float:"right"}},[n("svg",{staticClass:"bi bi-search",attrs:{width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[n("path",{attrs:{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"}})])])]},proxy:!0}])},[n("b-form-input",{attrs:{placeholder:"Search by Name or ID"},model:{value:t.searchQuery,callback:function(e){t.searchQuery=e},expression:"searchQuery"}})],1)],1)]),n("div",{staticStyle:{flex:"1","margin-top":"13px"}},[t.marcoDataLoaded?n("div",[n("div",{staticStyle:{"font-size":"12px"}},[t._v("Transaction Num Range: "+t._s(t.transaction_num_range[0])+" - "+t._s(t.transaction_num_range[1]))]),n("div",{staticStyle:{"font-size":"12px"}},[t._v("Transaction Volume Range: "+t._s(t.transaction_volume_range[0])+" - "+t._s(t.transaction_volume_range[1]))]),n("div",{staticStyle:{"font-size":"12px"}},[t._v("Filtered Projects Count: "+t._s(t.filteredAndSortedProjects.length))]),t._l(t.filteredAndSortedProjects,(function(e){return n("MarcoCard",{key:e.Bond_cd,attrs:{bond_cd:e.Bond_cd,bond_name:e.Bond_name,transaction_num:e.Transaction_num,transaction_volume:e.Transaction_volume,duration_days:t.duration_days,end_date:t.end_date}})}))],2):t._e()])])])],1)],1)},f=[],p=n("2909"),g=(n("d81d"),n("fb6a"),n("4e82"),n("25f0"),n("f9e3"),n("2dd8"),n("4971")),m=n.n(g),b=(n("24df"),n("bc3a")),y=n.n(b),v=n("0759"),T=n("7386"),S=n("1947"),w=n("d0b9"),E=n("dd9a"),L=n("3734"),A=n("9eaa"),D=n("a17a"),I=n("5e12"),R=n("d190"),k=n("4797"),x=n("12aa"),C=n("404b"),N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-card",{attrs:{"no-body":""}},[n("b-card-header",{staticClass:"small-header",staticStyle:{"font-size":"12px",padding:"2px 2px",height:"26px"}},[t._v(" "+t._s(t.bond_cd)+" "),n("b",[t._v("Num:")]),t._v(" "+t._s(t.transaction_num)+" "),n("b",[t._v("Name:")]),t._v(" "+t._s(t.bond_name)+" "),t.selected?t._e():n("b-button",{staticStyle:{float:"right",padding:"0"},attrs:{size:"sm",variant:"outline"},on:{click:t.onClick}},[n("b-icon-plus-square")],1),t.selected?n("b-button",{staticStyle:{float:"right",padding:"0"},attrs:{size:"sm",variant:"outline"},on:{click:t.onClick}},[n("b-icon-dash-square")],1):t._e()],1),n("b-card-body",{staticStyle:{padding:"2px"},attrs:{id:"mg_"+t.bond_cd}},[n("MarcoGlyph",{attrs:{bond_cd:t.bond_cd,end_date:t.end_date,duration_days:t.duration_days}})],1)],1)},B=[],M=n("5698"),O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{staticStyle:{width:"100%",height:"40px"},attrs:{id:"svg_marcoGlyph_"+t.bond_cd+"_"+t.end_date+"_"+t.duration_days,end_date:t.end_date,duration_days:t.duration_days}})},P=[],j=n("c7eb"),U=n("1da1"),Z=n("3835"),G=n("d4ec"),F=n("bee2"),V=(n("99af"),n("13d5"),n("4fad"),n("b64b"),n("07ac"),n("4d90"),n("159b"),n("96eb")),H=n.n(V),z=n("b166"),Y=function(){function t(){Object(G["a"])(this,t),this.dataPackage={mktPrice:[],transaction:[],transactionTsne:[],valuation:[],volume:[],gradient:[],mktPriceTrue:[]}}return Object(F["a"])(t,[{key:"generateData_marco",value:function(){var t=Object(U["a"])(Object(j["a"])().mark((function t(e,n,r){var a;return Object(j["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.getMarketPriceData(e);case 3:a=t.sent,this.dataPackage.mktPrice=a,this.dataPackage.transaction=transaction,this.dataPackage.volume=volume,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.error("Error generating data:",t.t0);case 12:case"end":return t.stop()}}),t,this,[[0,9]])})));function e(e,n,r){return t.apply(this,arguments)}return e}()},{key:"generateData",value:function(){var t=Object(U["a"])(Object(j["a"])().mark((function t(e,n,r){var a,i,o,s;return Object(j["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.getMarketPriceData(e);case 3:return a=t.sent,t.next=6,this.getTransactionData(e);case 6:return i=t.sent,t.next=9,this.getTransactionDataTsne(e);case 9:return o=t.sent,t.next=12,this.getTransactionData(e);case 12:s=t.sent,this.dataPackage.mktPrice=a,this.dataPackage.transaction=i,this.dataPackage.transactionTsne=o,this.dataPackage.volume=s,t.next=22;break;case 19:t.prev=19,t.t0=t["catch"](0),console.error("Error generating data:",t.t0);case 22:case"end":return t.stop()}}),t,this,[[0,19]])})));function e(e,n,r){return t.apply(this,arguments)}return e}()},{key:"getMarketPriceData",value:function(){var t=Object(U["a"])(Object(j["a"])().mark((function t(e){var n,r;return Object(j["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.a.get("http://localhost:5003/api/BasicData_MarketPrice/".concat(e));case 3:return n=t.sent,r=n.data.filtered_json_mkt,t.abrupt("return",r);case 8:return t.prev=8,t.t0=t["catch"](0),console.error("Error fetching market price data:",t.t0),t.abrupt("return",[]);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getTransactionDataTsne",value:function(){var t=Object(U["a"])(Object(j["a"])().mark((function t(e){var n,r;return Object(j["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.a.get("http://localhost:5003/api/BasicData_transaction_tsne/".concat(e));case 3:return n=t.sent,r=n.data.filtered_json_transaction,t.abrupt("return",r);case 8:return t.prev=8,t.t0=t["catch"](0),console.error("Error fetching market price data:",t.t0),t.abrupt("return",[]);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getTransactionData",value:function(){var t=Object(U["a"])(Object(j["a"])().mark((function t(e){var n,r;return Object(j["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.a.get("http://localhost:5003/api/BasicData_transaction/".concat(e));case 3:return n=t.sent,r=n.data.filtered_json_transaction,t.abrupt("return",r);case 8:return t.prev=8,t.t0=t["catch"](0),console.error("Error fetching market price data:",t.t0),t.abrupt("return",[]);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"updatedata",value:function(t){var e=t.mktPrice_flask,n=t.transaction_flask;return e.then((function(e){t.mktPrice=e,console.log("mktPrice_flask parsedDate",e)})),n.then((function(e){t.transaction=e,console.log("transaction_flask parsedDate",e)})),console.log("parsedDate dataPackage:",t),t}},{key:"generateMarketPriceData",value:function(t,e,n){for(var r=[],a=n;a>=0;a--)for(var i=H.a.Random.integer(40,60),o=1;o<=i;o++){var s={bond_cd:t,netValue:H.a.Random.float(90,110,2,2),tradeVolume:H.a.Random.integer(10,1e3),timeStamp:this._randomDateInRange(e,a).toLocaleString()};r.push(s)}return r}},{key:"generateTransactionData",value:function(t,e,n){for(var r=[],a=n;a>=0;a--)for(var i=H.a.Random.integer(40,60),o=1;o<=i;o++){var s={bond_cd:t,transactionId:H.a.Random.string("upper",3,7),netPrice:H.a.Random.float(95,105,0,2),transactionVolume:H.a.Random.float(10,400),tradeResult:H.a.Random.boolean(),timeStamp:this._randomDateInRange(e,a).toLocaleString()};r.push(s)}return r}},{key:"generateValuationData",value:function(t,e,n){for(var r=[],a=n;a>0;a--){var i=new Date(e);i.setDate(i.getDate()-a);var o=Object(z["a"])(i,"yyyy-MM-dd"),s={bond_cd:t,valuationPrice:H.a.Random.float(98,103,2,2),profitRate:H.a.Random.float(.02,.04,2,2),recommendFlag:H.a.Random.boolean(),timeStamp:o};r.push(s)}return r}},{key:"_randomDateInRange",value:function(t,e){var n=new Date(t+" 09:00:00"),r=new Date,a=new Date;r.setTime(n),a.setTime(n),r.setDate(r.getDate()-e),a.setDate(a.getDate()-e),r.setHours(9,30,0,0),a.setHours(15,0,0,0);var i=r.getTime(),o=a.getTime(),s=H.a.Random.integer(i,o);return new Date(s)}},{key:"generateGradient",value:function(){}},{key:"volumeStatistic",value:function(){}}]),t}(),W=Y,q=n("2ef0"),$=n.n(q),K=n("6ff4"),J=K.format,Q={props:["bond_cd","end_date","duration_days"],data:function(){return{}},created:function(){},mounted:function(){this.dataPackages=this.fetchData()},methods:{dataPackageGeneration:function(t,e,n){var r=function(){function t(e,n,r){Object(G["a"])(this,t);var a={};a["mktPrice"]=this.generateMarketPriceData(e,n,r),this.dataPackage=a}return Object(F["a"])(t,[{key:"generateMarketPriceData",value:function(t,e,n){for(var r=[],a=n;a>=0;a--)for(var i=H.a.Random.integer(40,60),o=1;o<=i;o++){var s={bond_cd:t,netValue:H.a.Random.float(90,110,2,2),tradeVolume:H.a.Random.integer(10,1e3),timeStamp:this._randomDateInRange(e,a).toLocaleString()};r.push(s)}return r}},{key:"generateTransactionData",value:function(t,e,n){for(var r=[],a=n;a>=0;a--)for(var i=H.a.Random.integer(40,60),o=1;o<=i;o++){var s={bond_cd:t,transactionId:H.a.Random.string("upper",3,4),netPrice:H.a.Random.float(95,105,0,2),transactionVolume:H.a.Random.float(10,400),tradeResult:H.a.Random.boolean(),timeStamp:this._randomDateInRange(e,a).toLocaleString()};r.push(s)}return r}},{key:"generateValuationData",value:function(t,e,n){for(var r=[],a=n;a>0;a--){var i=new Date(e);i.setDate(i.getDate()-a);var o=J(i,"yyyy-MM-dd"),s={bond_cd:t,valuationPrice:H.a.Random.float(98,103,2,2),profitRate:H.a.Random.float(.02,.04,2,2),recommendFlag:H.a.Random.boolean(),timeStamp:o};r.push(s)}return r}},{key:"_randomDateInRange",value:function(t,e){var n=new Date(t+" 09:00:00"),r=new Date,a=new Date;r.setTime(n),a.setTime(n),r.setDate(r.getDate()-e),a.setDate(a.getDate()-e),r.setHours(9,30,0,0),a.setHours(15,0,0,0);var i=r.getTime(),o=a.getTime(),s=H.a.Random.integer(i,o);return new Date(s)}},{key:"generateGradient",value:function(){}},{key:"volumeStatistic",value:function(){}}]),t}(),a=new r(t,e,n);return a.dataPackage},drawMultiCharts:function(t,e,n,r,a,i){var o=function(){function t(e,n,r,a,i,o){Object(G["a"])(this,t),this.allData=e,this.bond_cd=n,this.endDay=r,this.duration_days=a,this.margin={top:3,right:3,bottom:3,left:3},this.width=297,this.height=40,this.vueComponent=i,this.upper=o[1],this.lower=o[0];var s=M["select"]("#svg_marcoGlyph_"+n+"_"+r+"_"+a).append("svg").append("g").attr("width",this.width).attr("height",this.height);this.chartContainer=s;var c=this.chartContainer.append("svg").attr("width",this.width).attr("height",this.height).attr("name","lineContainer");this.lineContainer=c}return Object(F["a"])(t,[{key:"drawMultiDayData",value:function(t){var e=this,n=this.allData[t],r=n.sort((function(t,e){return new Date(t.timeStamp)-new Date(e.timeStamp)})),a=r.reduce((function(t,e){var n=e.timeStamp.substr(0,10);return t[n]||(t[n]=[]),t[n].push(e),t}),{}),i=2*Object.keys(a).length;Object.entries(a).forEach((function(n,r){var a=Object(Z["a"])(n,2),o=a[0],s=a[1],c=2*r/i*e.width,l=(2*r+1)/i*e.width,u=e.dataFilter(s,o),d=$.a.cloneDeep(u),h=d[0].AM,f=d[0].PM,p=$.a.cloneDeep(h),_=$.a.cloneDeep(f);e.drawDayData(p,t,o,c,"AM",i),e.drawDayData(_,t,o,l,"PM",i)}))}},{key:"drawDayData",value:function(t,e,n,r,a,i){var o=!1,s=!1;switch("AM"===a&&(o=this.offsetTime(n,9,0),s=this.offsetTime(n,12,0)),"PM"===a&&(o=this.offsetTime(n,13,30),s=this.offsetTime(n,17,30)),e){case"mktPrice":this.drawMktPriceLine(t,r,a,o,s,i);break;case"valuation":this.drawValuationLine(t,r,o,s,i);break;case"volume":this.drawVolumeBar(t,r,a,o,s,i);break;case"transaction":this.drawTrasactionScatter(t,r,a,o,s,i);break;case"gradient":this.drawGradTimeline(t,r,o,s,i);break}}},{key:"formatDateToCustomString",value:function(t){var e=new Date(t),n=e.getFullYear(),r=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getDate().toString().padStart(2,"0"),i=e.getHours().toString().padStart(2,"0"),o=e.getMinutes().toString().padStart(2,"0"),s=e.getSeconds().toString().padStart(2,"0"),c="".concat(n,"_").concat(r,"_").concat(a,"_").concat(i,"_").concat(o,"_").concat(s);return c}},{key:"formatDateToCustomDateString",value:function(t){var e=new Date(t),n=e.getFullYear(),r=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getDate().toString().padStart(2,"0"),i=e.getHours().toString().padStart(2,"0"),o=e.getMinutes().toString().padStart(2,"0"),s=e.getSeconds().toString().padStart(2,"0"),c="".concat(n,"-").concat(r,"-").concat(a," ").concat(i,":").concat(o,":").concat(s);return c}},{key:"offsetTime",value:function(t,e,n){var r=new Date(t),a=1e3*(3600*e+60*n),i=r.getTime()+a,o=new Date(i),s=o.getFullYear(),c=(o.getMonth()+1).toString().padStart(2,"0"),l=o.getDate().toString().padStart(2,"0"),u=o.getHours().toString().padStart(2,"0"),d=o.getMinutes().toString().padStart(2,"0"),h=o.getSeconds().toString().padStart(2,"0"),f="".concat(s,"-").concat(c,"-").concat(l,"T").concat(u,":").concat(d,":").concat(h,".000Z");return f}},{key:"drawMktPriceLine",value:function(t,e,n,r,a,i){t.forEach((function(t){var e=t.timeStamp.slice(0,-6);t.timeStamp=e,t.timeStamp=new Date(t.timeStamp)})),t.forEach((function(t,e){(isNaN(t.timeStamp)||isNaN(t.netValue))&&console.error("Invalid data at index ".concat(e,":"),t)})),t.sort((function(t,e){return t.timeStamp-e.timeStamp})),r=this.formatDateToCustomDateString(r),a=this.formatDateToCustomDateString(a);var o=2*this.width/i*3/7,s=2*this.width/i*4/7;"AM"===n&&(this.theWidth=o),"PM"===n&&(this.theWidth=s);var c=M["scaleTime"]().range([0,this.width/2]).domain([M["min"](t,(function(t){return t.timeStamp})),M["max"](t,(function(t){return t.timeStamp}))]),l=M["scaleLinear"]().range([this.height,0]).domain([this.lower,this.upper]),u=M["area"]().x((function(t){return c(t.timeStamp)})).y0(l(0)).y1((function(t){return l(t.netValue)})),d=(M["line"]().x((function(t){return c(t.timeStamp)})).y((function(t){return l(t.netValue)})),this.lineContainer.append("g"));d.append("path").attr("transform","translate(".concat(e,", 0)")).style("stroke",M["schemeRdYlBu"][3][2]).style("stroke-width",2).attr("d",u(t)).attr("fill",M["schemeRdYlBu"][3][2])}},{key:"drawValuationLine",value:function(t,e,n,r){var a=this,i=M["scaleLinear"]().domain([0,M["max"](t,(function(t){return t.transactionVolume}))]).range([0,10]);this.chartContainer.selectAll("rect").data(t).enter().append("rect").attr("cx",(function(t,e){return 10*e})).attr("cy",(function(t,e){return a.height-1*t.netPrice})).attr("r",(function(t,e){return i(t.transactionVolume)}))}},{key:"drawTrasactionScatter",value:function(t,e,n,r,a){var i=this;t.forEach((function(t){var e=t.timeStamp.slice(0,-6);t.timeStamp=e,t.timeStamp=new Date(t.timeStamp)})),n=this.formatDateToCustomDateString(n),r=this.formatDateToCustomDateString(r);var o=M["scaleTime"]().range([0,this.width/a]).domain([M["min"](t,(function(t){return t.timeStamp})),M["max"](t,(function(t){return t.timeStamp}))]),s=M["scaleLinear"]().range([.25*this.height,.95*this.height]).domain([M["min"](t,(function(t){return t.netPrice})),M["max"](t,(function(t){return t.netPrice}))]),c=M["rgb"](255,210,186),l=M["scaleLinear"]().range([1,5]).domain([M["min"](t,(function(t){return t.transactionVolume})),M["max"](t,(function(t){return t.transactionVolume}))]);this.lassoContainer.append("g").attr("stroke","#000").attr("stroke-opacity",.2).selectAll("circle").data(t).enter().append("circle").attr("cx",(function(t){return o(t.timeStamp)})).attr("cy",(function(t){return i.height-s(t.netPrice)})).attr("r",(function(t){return l(t.transactionVolume)})).attr("fill",(function(t){return c})).attr("transform","translate(".concat(e,", 0)")).style("opacity",.6)}},{key:"drawVolumeBar",value:function(t,e,n,r,a){var i=this,o=10,s=this.bucketDataByMinute(t,o);t.forEach((function(t){var e=t.timeStamp.slice(0,-6);t.timeStamp=e,t.timeStamp=new Date(t.timeStamp)})),n=this.formatDateToCustomDateString(n),r=this.formatDateToCustomDateString(r);var c=s.map((function(t){return M["sum"](t,(function(t){return t.tradeVolume}))})),l=M["max"](c),u=M["scaleTime"]().range([0,this.width/a]).domain([M["min"](t,(function(t){return t.timeStamp})),M["max"](t,(function(t){return t.timeStamp}))]),d=M["scaleLinear"]().range([0,.1*this.height]).domain([0,l]);this.VolumeBarContainer.append("g").selectAll("rect").data(s).attr("class","volumeBar").enter().append("rect").attr("x",(function(t){return u(t[0].timeStamp)})).attr("y",(function(t){return.9*i.height-d(M["sum"](t,(function(t){return t.tradeVolume})))})).attr("height",(function(t){return d(M["sum"](t,(function(t){return t.tradeVolume})))})).attr("width",this.width/a/(150/o)).attr("fill","SteelBlue").attr("transform","translate(".concat(e,", 0)")).on("mouseover",(function(){M["select"](this).attr("fill","Maroon")})).on("mouseout",(function(){M["select"](this).attr("fill","SteelBlue")}))}},{key:"bucketDataByMinute",value:function(t,e){var n={};t.forEach((function(t){var r=new Date(t.timeStamp),a=Math.floor(r.getMinutes()/e)*e;n[a]||(n[a]=[]),n[a].push(t)}));var r=Object.values(n);return r}},{key:"drawGradTimeline",value:function(t,e,n,r,a){var i=10,o=(this.bucketDataByMinute(t,i),M["timeParse"]("%Y/%m/%d %H:%M:%S"));t.forEach((function(t){t.timeStamp=o(t.timeStamp)})),n=this.formatDateToCustomDateString(n),r=this.formatDateToCustomDateString(r);var s=M["scaleTime"]().range([0,this.width]).domain([M["min"](t,(function(t){return t.timeStamp})),M["max"](t,(function(t){return t.timeStamp}))]),c=M["timeParse"]("%Y-%m-%dT%H:%M:%S.%LZ");timelineData.forEach((function(t){t.startDate=c(t.startDate),t.endDate=c(t.endDate)})),this.chartContainer.append("g").selectAll("rect").data(timelineData).enter().append("rect").attr("x",(function(t){return s(t.startDate)})).attr("y",this.height-10).attr("width",(function(t){return s(t.endDate)-s(t.startDate)})).attr("height",10).attr("fill","#FFD325").attr("rx",4).attr("stroke","white").style("stroke-width",2).attr("fill","none")}},{key:"generateVirtualFeature",value:function(t,e,n){var r={transactionData:{timeStamp:"timeStamp",netValue:null,tradeVolume:null},valuationData:{timeStamp:"timeStamp",netValue:null,tradeVolume:null,bond_cd:null,valuationPrice:null,profitRate:null,recommendFlag:null}},a=r[n],i={};if(a)for(var o in i["timeStamp"]=t+e.timeStamp,a)"timeStamp"!==o&&(i[o]=a[o]);return i}},{key:"dataFilter",value:function(t,e){var n=[];Array.isArray(t)||(t=[t]);var r=new Date("".concat(e," 12:00:00+08:00")),a=t.filter((function(t){return new Date(t.timeStamp)<r})),i=t.filter((function(t){return new Date(t.timeStamp)>=r}));return n.push({AM:a,PM:i}),n}}]),t}(),s=new o(t,e,n,r,this,i);s.drawMultiDayData("mktPrice")},data_minmax:function(t){function e(t){var e=t.reduce((function(t,e){return t+e}),0)/t.length,n=t.reduce((function(t,n){return t+Math.pow(n-e,2)}),0)/t.length;return[e,n]}function n(t,e){var n=t[0],r=t[1],a=Math.sqrt(r),i=n+e*a,o=n-e*a;return[o,i]}var r=e(t),a=Math.max.apply(Math,Object(p["a"])(t)),i=Math.min.apply(Math,Object(p["a"])(t)),o=r[0],s=r[1],c=Math.sqrt(s),l=(o-i)/c,u=(a-o)/c;console.log("Min sigma multiplier:",l),console.log("Max sigma multiplier:",u);var d=Math.min(l,u);n(r,d);return[i,a]},fetchData:function(){var t=this;return Object(U["a"])(Object(j["a"])().mark((function e(){var n,r,a,i,o,s;return Object(j["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=function(t){var e=-1/0,n=1/0;return t.forEach((function(t){t.netValue>e&&(e=t.netValue),t.netValue<n&&(n=t.netValue)})),[n,e]},n=function(t,e,n){return new Promise(function(){var r=Object(U["a"])(Object(j["a"])().mark((function r(a,i){var o;return Object(j["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o=new W(t,e,n),r.prev=1,r.next=4,o.generateData_marco(t,e,n);case 4:a(o.dataPackage),r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](1),i(r.t0);case 10:case"end":return r.stop()}}),r,null,[[1,7]])})));return function(t,e){return r.apply(this,arguments)}}())},function(t){var e=t[0],n=t[1],r=e+5*n,a=e-5*n;return[a,r]},function(t){var e=t.reduce((function(t,e){return t+e}),0)/t.length,n=t.reduce((function(t,n){return t+Math.pow(n-e,2)}),0)/t.length;return[e,n]},e.prev=4,e.next=7,n(t.bond_cd,t.end_date,t.duration_days);case 7:return a=e.sent,i=a.mktPrice,o=r(i),s=$.a.cloneDeep(a),t.drawMultiCharts(s,t.bond_cd,t.end_date,t.duration_days,t,o),e.abrupt("return",a);case 15:e.prev=15,e.t0=e["catch"](4),console.log("Error:",e.t0);case 18:case"end":return e.stop()}}),e,null,[[4,15]])})))()}}},X=Q,tt=(n("b256"),n("2877")),et=Object(tt["a"])(X,O,P,!1,null,"47f2cbd6",null),nt=et.exports,rt={name:"MacroCard",components:{BCard:l["a"],BButton:S["a"],BCardBody:d["a"],BIconPlusSquare:T["j"],BIconDashSquare:T["e"],BCardHeader:u["a"],MarcoGlyph:nt},props:["bond_cd","bond_name","transaction_num","transaction_volume","duration_days","end_date"],data:function(){return{selected:!1}},mounted:function(){},methods:{onClick:function(){this.selected=!this.selected,this.$root.$emit("ChangeBondSelection",this.bond_cd)},handleChangeBondSelection:function(t){this.bond_cd===t&&(this.selected=!this.selected)}},created:function(){var t=this;this.$root.$on("ChangeBondSelectionClose",(function(e){e==t.bond_cd&&(t.selected=!t.selected)}))},beforeDestroy:function(){}},at=rt,it=Object(tt["a"])(at,N,B,!1,null,null,null),ot=it.exports,st=n("6ff4"),ct=(st.format,{name:"MacroView",components:{BCard:l["a"],BIcon:v["a"],BIconArrowUp:T["c"],BIconArrowDown:T["a"],BButton:S["a"],BCardHeader:u["a"],BCardBody:d["a"],BNavbar:w["a"],BDropdown:E["a"],BDropdownGroup:L["a"],BDropdownItem:A["a"],BIconGear:T["h"],BFormTags:D["a"],VueSlider:m.a,BInputGroup:I["a"],BInputGroupText:R["a"],BFormInput:k["a"],MarcoCard:ot,BButtonGroup:x["a"],BButtonToolbar:C["a"]},props:["all_bond_list","end_date","duration_days"],data:function(){return{bond_list:null,transaction_num_range:["0","2000"],transaction_volume_range:["1000","50000"],transaction_num_range_list:["0","3","5","10","100","1000","2000"],transaction_volume_range_list:["1000","3000","5000","8000","10000","20000","50000"],Threshold_local:1,sortByNum:"",sortByVol:"",isSortByNumSelected:!1,isSortByVolSelected:!1,filteredBonds:null,searchQuery:"",date:null,marcoDataLoaded:!1}},methods:{fetchData:function(){var t=this;b["get"]("http://localhost:5003/api/bondSummaryData").then((function(e){t.bond_list=e.data.bondSummaryData,t.isLoading=!1,t.$emit("data-loaded",t.bond_list),t.marcoDataLoaded=!0})).catch((function(t){console.error("Error fetching bond summary data:",t)}))},timeClick:function(t){var e=t.toISOString().slice(0,10),n="http://localhost:5003/api/getAllData/".concat(e);console.log("timeClick",n),this.fetchData()},updateNumSort:function(t){this.sortByNum=t,this.isSortByNumSelected=!0,console.log(this.sortByNum)},updateVolSort:function(t){this.sortByVol=t,this.isSortByVolSelected=!0,console.log(this.sortByVol)}},created:function(){this.bond_list=this.all_bond_list},mounted:function(){},watch:{sortByNum:function(t){t&&(this.isSortByNumSelected=!0,this.isSortByVolSelected=!1)},sortByVol:function(t){t&&(this.isSortByVolSelected=!0,this.isSortByNumSelected=!1)},marcoDataLoaded:function(t){t&&console.log("marcoDataLoaded 已更新为 true，开始渲染 MarcoCard 组件")}},computed:{filteredAndSortedProjects:function(){var t=this,e=this.transaction_num_range.map((function(t){return parseInt(t)})),n=this.transaction_volume_range.map((function(t){return parseInt(t)})),r=Math.min.apply(Math,Object(p["a"])(e)),a=Math.max.apply(Math,Object(p["a"])(e)),i=Math.min.apply(Math,Object(p["a"])(n)),o=Math.max.apply(Math,Object(p["a"])(n));if(this.filteredBonds=this.bond_list.filter((function(t){var e=t.Transaction_num>=r&&t.Transaction_num<a,n=t.Transaction_volume>=i&&t.Transaction_volume<o;return e&&n})),!this.sortByNum&&!this.sortByVol)return this.filteredBonds;var s=Object(p["a"])(this.filteredBonds);return s=s.filter((function(e){var n=e.Bond_cd.toString();return e.Bond_name.toLowerCase().includes(t.searchQuery.toLowerCase())||n.toLowerCase().includes(t.searchQuery.toLowerCase())})),this.isSortByNumSelected&&("num_descending"===this.sortByNum?s.sort((function(t,e){return t.Transaction_num-e.Transaction_num})):"num_ascending"===this.sortByNum&&s.sort((function(t,e){return e.Transaction_num-t.Transaction_num}))),this.isSortByVolSelected&&("vol_descending"===this.sortByVol?s.sort((function(t,e){return t.Transaction_volume-e.Transaction_volume})):"vol_ascending"===this.sortByVol&&s.sort((function(t,e){return e.Transaction_volume-t.Transaction_volume}))),s}}}),lt=ct,ut=(n("420a"),Object(tt["a"])(lt,h,f,!1,null,"2f535525",null)),dt=ut.exports,ht=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-card",{staticStyle:{height:"50%"},attrs:{"no-body":""}},[n("b-card-body",{staticStyle:{overflow:"scroll",height:"800px",padding:"2px"}},t._l(t.selected_bond_list,(function(e){return n("MesoCard",{key:e.Bond_cd,attrs:{bond_cd:e.Bond_cd,bond_name:e.Bond_name,transaction_num:e.Transaction_num,transaction_volume:e.Transaction_volume,end_date:t.end_date,duration_days:t.duration_days}})})),1)],1)],1)},ft=[],pt=n("ade3"),_t=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-card",{staticStyle:{border:"0px"},attrs:{"no-body":""}},[n("b-card-header",{staticClass:"small-header",staticStyle:{"font-size":"12px",height:"25px"}},[n("b",[t._v(t._s(t.bond_name))]),t.x_selected?t._e():n("b-button",{staticStyle:{"font-size":"12px",float:"right",height:"15px",padding:"0px 5px",display:"flex","align-items":"center"},attrs:{variant:"outline-secondary"},on:{click:function(e){return t.close_win()}}},[n("b-icon-x")],1),t.camera_selected?t._e():n("b-button",{staticStyle:{"font-size":"12px",float:"right","margin-right":"10px",padding:"0px 5px",height:"15px",display:"flex","align-items":"center"},attrs:{variant:"outline-secondary"},on:{click:function(e){return t.updateLassoAction("refresh")}}},[n("b-icon-arrow-repeat")],1),t.camera_selected?t._e():n("b-button",{staticStyle:{"font-size":"12px",float:"right","margin-right":"10px",padding:"0px 5px",height:"15px",display:"flex","align-items":"center"},attrs:{variant:"outline-secondary"},on:{click:function(e){return t.updateLassoAction("add")}}},[n("b-icon-plus")],1),t.camera_selected?t._e():n("b-button",{staticStyle:{"font-size":"12px",float:"right","margin-right":"10px",padding:"0px 5px",height:"15px",display:"flex","align-items":"center"},attrs:{variant:"outline-secondary"},on:{click:function(e){return t.updateLassoAction("remove")}}},[n("i",{staticClass:"el-icon-minus"})]),n("el-switch",{staticClass:"drawer-switch",staticStyle:{"font-size":"12px",float:"left","margin-right":"10px",padding:"0px 5px",height:"15px"},on:{change:t.toggleView},model:{value:t.tagsView,callback:function(e){t.tagsView=e},expression:"tagsView"}}),n("vue-slider",{staticStyle:{"margin-left":"20px",height:"380px","margin-top":"0px"},attrs:{direction:"btt",adsorb:!0,data:t.scaler_index_list,included:!0},model:{value:t.scaler_index,callback:function(e){t.scaler_index=e},expression:"scaler_index"}})],1),n("b-card-body",{staticClass:"meso_card_body",staticStyle:{height:"450px",padding:"5px 0px 5px 0px"}},["timeView"===t.showView?n("MicroViewTime",{ref:"microViewRef",attrs:{bond_cd:t.bond_cd,end_date:t.end_date,duration_days:t.duration_days,scaler_index:t.scaler_index,scaler_index_high:t.scaler_index_high,scaler_index_low:t.scaler_index_low}}):t._e(),"freqView"===t.showView?n("MicroView",{ref:"microViewRef",attrs:{bond_cd:t.bond_cd,end_date:t.end_date,duration_days:t.duration_days,scaler_index:t.scaler_index,scaler_index_high:t.scaler_index_high,scaler_index_low:t.scaler_index_low}}):t._e()],1)],1)],1)},gt=[],mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"svg_micro_"+t.bond_cd+"_"+t.end_date+"_"+t.duration_days}})},bt=[];n("a630"),n("a15b"),n("6062"),n("3ca3"),n("ddb0"),n("7db0");d3.timeline;var yt=n("4360"),vt=(n("910e"),n("6ff4")),Tt=(vt.format,{props:["bond_cd","end_date","duration_days","scaler_index","scaler_index_high","scaler_index_low"],data:function(){return{fetchDataTimeout:null,MarketPriceList:!1,ValuationList:!1,TransactionList:!1,combinedMarketPriceData:!1,dataPackages_init:!1,dataPackages:!1,tradeChart_height:730,tradeChart_width:180,tradeChart_margin:{top:10,right:50,bottom:30,left:30},keyColor:{tradeLine:"#084177",valuationBox:"#cd8d7b",volumeBar:"#687466",tradeGradLine:"#fbc490",volumeGradLine:"#d2c6b2"},theSelection:[],theSelection_bond_cd:[],initialData:{},colorMapping:!1}},watch:{scaler_index:function(t){var e=this;t&&(clearTimeout(this.fetchDataTimeout),this.fetchDataTimeout=setTimeout((function(){e.deleteSvg(e.bond_cd,e.end_date,e.duration_days),e.fetchData()}),500))}},created:function(){var t=this;b["get"]("http://localhost:5003/api/color_mapping").then((function(e){t.colorMapping=e.data})).catch((function(t){console.error("Error fetching color mapping:",t)}))},computed:Object(i["a"])(Object(i["a"])({},Object(o["d"])({})),Object(o["c"])("lassoInteraction",["getLatestSelectionBondcd","getLatestSelection","getGlobalLassoData","getGlobalHistory","getChangedTransaction","getGlobalLassoDataHistory","getHistoryActions","getHistoryIndex"])),beforeMount:function(){},mounted:function(){this.dataPackages=this.fetchData()},beforeDestroy:function(){},methods:Object(i["a"])(Object(i["a"])({},Object(o["b"])(["updateLassoSelectedTrans"])),{},{send_data:function(){},deleteSvg:function(t,e,n){var r=d3.select("#svg_micro_"+t+"_"+e+"_"+n);r.selectAll("*").remove()},drawMultiCharts:function(t,e,n,r,a,i){var o=this;return Object(U["a"])(Object(j["a"])().mark((function s(){var c,l;return Object(j["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return c=function(){function t(e,n,r,o,s){Object(G["a"])(this,t),this.allData=$.a.cloneDeep(e),this.bond_cd=n,this.endDay=r,this.duration_days=o,this.margin={top:3,right:3,bottom:3,left:3},this.width=780,this.theWidth=!1,this.halfDayHours=!1,this.height=500,this.vueComponent=s,this.upper=a[0],this.lower=a[1],this.marginTop=5,this.marginRight=20,this.marginBottom=35,this.marginLeft=39,this.colorMapping=i;var c=d3.select("#svg_micro_"+n+"_"+r+"_"+o).append("svg").attr("name","Container").attr("width",this.width).attr("height",this.height);this.chartContainer=c;var l=this.chartContainer.append("svg").attr("width",this.width).attr("height",this.height).attr("name","lassoContainer");this.lassoContainer=l;var u=this.chartContainer.append("svg").attr("width",this.width).attr("height",this.height).attr("name","lineContainer");this.lineContainer=u;var d=this.chartContainer.append("svg").attr("width",this.width).attr("height",this.height).attr("name","InstitutionContainer");this.InstitutionContainer=d;var h=this.chartContainer.append("svg").attr("width",this.width).attr("height",this.height).attr("name","VolumeBarContainer");this.VolumeBarContainer=h}return Object(F["a"])(t,[{key:"getDate",value:function(t){var e=new Date(t),n=e.getFullYear().toString(),r=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getDate().toString().padStart(2,"0"),i="".concat(n,"-").concat(r,"-").concat(a);return i}},{key:"drawMultiDayData",value:function(){var t=Object(U["a"])(Object(j["a"])().mark((function t(e){var n,r,a,i,o=this;return Object(j["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,$.a.cloneDeep(this.allData[e]);case 2:n=t.sent,r={},n.forEach((function(t){var e=o.getDate(t.timeStamp);r[e]||(r[e]=[]),r[e].push(t)})),a=$.a.cloneDeep(r),i=2*Object.keys(a).length,Object.entries(a).forEach((function(t,n){var r=Object(Z["a"])(t,2),a=r[0],s=r[1],c=100;o.width=o.width-c;o.width,o.width,o.width;var l=o.dataFilter(s,a),u=$.a.cloneDeep(l),d=u[0].AM,h=u[0].PM;$.a.cloneDeep(d),$.a.cloneDeep(h);o.drawDayData(s,e,a,0,"PM",i)}));case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"drawDayData",value:function(t,e,n,r,a,i){var o=!1,s=!1;switch("AM"===a&&(o=this.offsetTime(n,9,0),s=this.offsetTime(n,12,0)),"PM"===a&&(o=this.offsetTime(n,13,30),s=this.offsetTime(n,17,30)),e){case"mktPrice":this.drawMktPriceLine(t,r,a,o,s,i);break;case"valuation":this.drawValuationLine(t,r,o,s,i);break;case"volume":this.drawVolumeBar(t,r,a,o,s,i);break;case"transaction":this.drawTrasactionScatter(t,r,a,o,s,i);break;case"transactionTsne":this.drawTrasactionTsneScatter(t,r,a,o,s,i);break;case"gradient":this.drawGradTimeline(t,r,o,s,i);break}}},{key:"formatDateToCustomString",value:function(t){var e=new Date(t),n=e.getFullYear(),r=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getDate().toString().padStart(2,"0"),i=e.getHours().toString().padStart(2,"0"),o=e.getMinutes().toString().padStart(2,"0"),s=e.getSeconds().toString().padStart(2,"0"),c="".concat(n,"_").concat(r,"_").concat(a,"_").concat(i,"_").concat(o,"_").concat(s);return c}},{key:"formatDateToCustomDateString",value:function(t){var e=new Date(t),n=e.getFullYear(),r=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getDate().toString().padStart(2,"0"),i=e.getHours().toString().padStart(2,"0"),o=e.getMinutes().toString().padStart(2,"0"),s=e.getSeconds().toString().padStart(2,"0"),c="".concat(n,"-").concat(r,"-").concat(a," ").concat(i,":").concat(o,":").concat(s);return c}},{key:"offsetTime",value:function(t,e,n){var r=new Date(t),a=1e3*(3600*e+60*n),i=r.getTime()+a,o=new Date(i),s=o.getFullYear(),c=(o.getMonth()+1).toString().padStart(2,"0"),l=o.getDate().toString().padStart(2,"0"),u=o.getHours().toString().padStart(2,"0"),d=o.getMinutes().toString().padStart(2,"0"),h=o.getSeconds().toString().padStart(2,"0"),f="".concat(s,"-").concat(c,"-").concat(l,"T").concat(u,":").concat(d,":").concat(h,".000Z");return f}},{key:"drawMktPriceLine",value:function(t,e,n,r,a,i){t.forEach((function(t){var e=t.timeStamp.slice(0,-6);t.timeStamp=e,t.timeStamp=new Date(t.timeStamp)})),t.sort((function(t,e){return t.timeStamp-e.timeStamp})),r=this.formatDateToCustomDateString(r),a=this.formatDateToCustomDateString(a);var o=2*this.width/i*3/7,s=2*this.width/i*4/7;"AM"===n&&(this.theWidth=o),"PM"===n&&(this.theWidth=s);var c=.8*this.height,l=0,u=d3.scaleTime().range([0,this.theWidth]).domain([d3.min(t,(function(t){return t.timeStamp})),d3.max(t,(function(t){return t.timeStamp}))]),d=d3.scaleLinear().range([l,c]).domain([this.lower,this.upper]),h=d3.line().x((function(t){return u(t.timeStamp)})).y((function(t){return d(t.netValue)})).curve(d3.curveCatmullRom.alpha(.5));this.lineContainer.append("g").append("path").datum(t).attr("class","line").attr("d",h).attr("transform","translate(".concat(e,", 0)")).style("stroke",d3.schemeRdYlBu[3][2]).style("stroke-width",2).style("fill","none")}},{key:"drawValuationLine",value:function(t,e,n,r){var a=this;d3.scaleLinear().domain([0,d3.max(t,(function(t){return t.transactionVolume}))]).range([0,10]);this.chartContainer.selectAll("rect").data(t).enter().append("rect").attr("cx",(function(t,e){return 10*e})).attr("cy",(function(t,e){return a.height-1*t.netPrice}))}},{key:"drawTrasactionTsneScatter",value:function(t,e,n,r,a,i){var o=this;t.forEach((function(t){var e=t.timeStamp.slice(0,-6);t.timeStamp=e,t.timeStamp=new Date(t.timeStamp)})),r=this.formatDateToCustomDateString(r),a=this.formatDateToCustomDateString(a);var s=2*this.width/i*3/7,c=2*this.width/i*4/7;"AM"===n&&(this.theWidth=s),"PM"===n&&(this.theWidth=c),this.theWidth=this.width;var l=d3.scaleTime().range([.1*this.theWidth,this.theWidth]).domain([d3.min(t,(function(t){return t.x_pos})),d3.max(t,(function(t){return t.x_pos}))]),u=.7*this.height,d=0,h=d3.scaleLinear().domain([this.lower,this.upper]).range([d,u]),f=d3.scaleLinear().domain([-100,100]).range([u,d]),p=(d3.max(t,(function(t){return Math.abs(t.transactionVolume)})),d3.min(t,(function(t){return Math.abs(t.transactionVolume)})),d3.rgb(174,219,155),d3.rgb(162,162,162),d3.rgb(219,76,85),d3.rgb(255,210,186)),_=(d3.scaleLinear().range([1,5]).domain([1e3,3e3]),function(t){return t.attr("stroke","currentColor").attr("stroke-opacity",.05).call((function(t){return t.append("g").selectAll("line").data(l.ticks()).join("line").attr("x1",(function(t){return l(t)})).attr("x2",(function(t){return.5+l(t)})).attr("y1",.8*o.height).attr("y2",0)})).attr("transform","translate(".concat(e,", 0)")).call((function(t){return t.append("g").selectAll("line").data(h.ticks()).join("line").attr("y1",(function(t){return.5+h(t)})).attr("y2",(function(t){return.5+h(t)})).attr("x1",0).attr("x2",o.theWidth)}))});this.lassoContainer.append("g").attr("stroke","#000").attr("stroke-opacity",.2).selectAll("circle").data(t).enter().append("circle").attr("cx",(function(t){return l(t.x_pos)})).attr("cy",(function(t){return h(t.netPrice)})).attr("r",(function(t){return Math.sqrt(Math.abs(33*t.transactionVolume))/3.14})).attr("fill",(function(t){var e=o.colorMapping[t.byr_instn_tp];return e?d3.rgb(e[0],e[1],e[2]):p})).attr("transform","translate(".concat(e,", 0)")).style("opacity",.4),this.lassoContainer.append("g").call(_),this.lassoContainer.append("g").attr("transform","translate(".concat(e,", ").concat(.8*this.height-40,")")).call(d3.axisBottom(l).ticks(this.width/50)).call((function(t){return t.select(".domain").remove()})).call((function(t){return t.append("text").attr("x",o.width-5).attr("y",o.marginBottom).attr("fill","currentColor").attr("text-anchor","end").text("class →")})),this.lassoContainer.append("g").attr("transform","translate(".concat(this.marginLeft+60,", 0)")).call(d3.axisLeft(h)).call((function(t){return t.select(".domain").remove()})).call((function(t){return t.append("text").attr("x",10).attr("y",20).attr("fill","currentColor").attr("text-anchor","start").text("Net value ↓ ")})),this.lassoContainer.append("g").attr("transform","translate(".concat(this.marginLeft,", 10)")).call(d3.axisLeft(f)).call((function(t){return t.select(".domain").remove()})).call((function(t){return t.append("text").attr("x",-34).attr("y",-5).attr("fill","currentColor").attr("text-anchor","start").text(" σ ")}))}},{key:"drawInstitution",value:function(t,e,n,r,a,i){var o=this;t.forEach((function(t){var e=t.timeStamp.slice(0,-6);t.timeStamp=e,t.timeStamp=new Date(t.timeStamp)})),r=this.formatDateToCustomDateString(r),a=this.formatDateToCustomDateString(a);var s=2*this.width/i*3/7,c=2*this.width/i*4/7;"AM"===n&&(this.theWidth=s),"PM"===n&&(this.theWidth=c);var l=d3.scaleTime().range([0,this.theWidth]).domain([d3.min(t,(function(t){return t.timeStamp})),d3.max(t,(function(t){return t.timeStamp}))]),u=.8*this.height,d=0,h=d3.scaleLinear().domain([this.lower,this.upper]).range([u,d]),f=(d3.max(t,(function(t){return Math.abs(t.transactionVolume)})),d3.min(t,(function(t){return Math.abs(t.transactionVolume)})),d3.rgb(174,219,155),d3.rgb(162,162,162),d3.rgb(219,76,85),d3.rgb(255,210,186)),p=d3.scaleLinear().range([1,5]).domain([1e3,3e3]);this.lassoContainer.append("g").attr("stroke","#000").attr("stroke-opacity",.2).selectAll("circle").data(t).enter().append("circle").attr("cx",(function(t){return l(t.timeStamp)})).attr("cy",(function(t){return h(t.netPrice)})).attr("r",(function(t){return p(Math.sqrt(t.transactionVolume)/3.14)})).attr("fill",(function(t){var e=o.colorMapping[t.byr_instn_tp];return e?d3.rgb(e[0],e[1],e[2]):f})).attr("transform","translate(".concat(e,", 0)")).style("opacity",.4),this.lassoContainer.append("g").attr("transform","translate(".concat(e,", ").concat(.8*this.height-10,")")).call(d3.axisBottom(l).ticks(this.width/100)).call((function(t){return t.select(".domain").remove()})).call((function(t){return t.append("text").attr("x",o.width-5).attr("y",o.marginBottom-10).attr("fill","currentColor").attr("text-anchor","end").text("Time →")})),this.lassoContainer.append("g").attr("transform","translate(".concat(this.marginLeft+60,", 0)")).call(d3.axisLeft(h)).call((function(t){return t.select(".domain").remove()})).call((function(t){return t.append("text").attr("x",20).attr("y",10).attr("fill","currentColor").attr("text-anchor","start").text("Net value ↓ ")}))}},{key:"drawVolumeBar",value:function(t,e,n,r,a,i){var o=this;function s(t,e){var n=new Date(t),r=n.getFullYear(),a=(n.getMonth()+1).toString().padStart(2,"0"),i=n.getDate().toString().padStart(2,"0"),o=Math.floor(n.getHours()).toString().padStart(2,"0"),s=Math.floor(n.getMinutes()/e)*e,c=s.toString().padStart(2,"0"),l="".concat(r,"-").concat(a,"-").concat(i," ").concat(o,":").concat(c);return new Date(l)}var c=100;t.forEach((function(t){t.timeStamp=new Date(t.timeStamp)}));var l=this.bucketDataByXpos(t,c);console.log("groupedDataArray770:",l),r=this.formatDateToCustomDateString(r),a=this.formatDateToCustomDateString(a),this.width=1e3;var u=2*this.width/i*3/7,d=2*this.width/i*4/7;"AM"===n&&(this.theWidth=u,this.halfDayHours=3),"PM"===n&&(this.theWidth=d,this.halfDayHours=4,e=534);var h=l.map((function(t){return d3.sum(t,(function(t){return t.transactionVolume}))})),f=d3.max(h),p=d3.scaleTime().range([0,this.theWidth]).domain([d3.min(t,(function(t){return t.timeStamp})),d3.max(t,(function(t){return t.timeStamp}))]),_=d3.scaleLinear().range([0,.1*this.height]).domain([0,f]);this.VolumeBarContainer.append("g").selectAll("rect").data(l).attr("class","volumeBar").enter().append("rect").attr("x",(function(t){return p(s(t[0].timeStamp,timeGranularity))})).attr("y",(function(t){return.88*o.height-_(d3.sum(t,(function(t){return t.transactionVolume})))})).attr("height",(function(t){return _(d3.sum(t,(function(t){return t.transactionVolume})))})).attr("width",this.theWidth*timeGranularity/(60*this.halfDayHours)).attr("fill","SteelBlue").attr("transform","translate(".concat(e,", 0)")).on("mouseover",(function(){d3.select(this).attr("fill","Maroon")})).on("mouseout",(function(){d3.select(this).attr("fill","SteelBlue")}))}},{key:"bucketDataByMinute",value:function(t,e){var n={};t.forEach((function(t){var r=new Date(t.timeStamp),a=(Math.floor(r.getHours()).toString()+"-"+Math.floor(r.getMinutes()/e)*e.toString()).toString();n[a]||(n[a]=[]),n[a].push(t)}));var r=Object.values(n);return r}},{key:"bucketDataByXpos",value:function(t,e){var n=Math.max.apply(Math,Object(p["a"])(t.map((function(t){return t.x})))),r=Math.min.apply(Math,Object(p["a"])(t.map((function(t){return t.x})))),a=(n-r)/e,i={},o=Math.ceil((n-r)/a);t.forEach((function(t){var e=Math.floor((t.x_pos-r)/a),n=Math.max(0,Math.min(e,o-1)).toString();i[n]||(i[n]=[]),i[n].push(t)}));var s=Object.values(i);return s}},{key:"drawGradTimeline",value:function(t,e,n,r,a){var i=10;this.bucketDataByMinute(t,i),d3.timeParse("%Y/%m/%d %H:%M:%S");n=this.formatDateToCustomDateString(n),r=this.formatDateToCustomDateString(r);var o=d3.scaleTime().range([0,this.width]).domain([d3.min(t,(function(t){return t.timeStamp})),d3.max(t,(function(t){return t.timeStamp}))]),s=[{startDate:"2017-06-29T01:33:03.988Z",endDate:"2017-09-10T07:51:43.818Z",name:"event383"},{startDate:"2017-06-11T06:32:17.887Z",endDate:"2017-10-23T10:23:17.065Z",name:"event384"},{startDate:"2017-11-08T23:28:11.281Z",endDate:"2017-11-13T07:54:34.614Z",name:"event385"},{startDate:"2016-11-19T03:41:04.917Z",endDate:"2017-08-28T06:29:05.559Z",name:"event386"},{startDate:"2017-06-02T14:01:20.799Z",endDate:"2017-06-03T20:49:25.676Z",name:"event387"},{startDate:"2017-09-22T21:50:17.825Z",endDate:"2017-10-12T13:56:05.972Z",name:"event388"},{startDate:"2017-07-15T10:38:35.760Z",endDate:"2017-09-27T12:09:17.202Z",name:"event389"},{startDate:"2017-06-29T10:14:34.872Z",endDate:"2017-07-22T11:45:15.488Z",name:"event390"},{startDate:"2017-06-18T17:56:56.597Z",endDate:"2017-08-09T03:35:53.160Z",name:"event391"},{startDate:"2017-07-12T12:41:18.234Z",endDate:"2017-10-16T08:34:34.768Z",name:"event392"},{startDate:"2017-08-07T01:53:14.537Z",endDate:"2017-08-27T00:59:19.305Z",name:"event393"},{startDate:"2017-08-19T00:17:16.190Z",endDate:"2017-11-03T20:29:22.870Z",name:"event394"},{startDate:"2017-09-11T05:23:24.449Z",endDate:"2017-09-29T22:25:24.258Z",name:"event395"},{startDate:"2017-06-26T22:40:55.276Z",endDate:"2017-10-07T06:26:10.546Z",name:"event396"},{startDate:"2017-09-26T07:12:38.705Z",endDate:"2017-11-05T00:36:12.767Z",name:"event397"},{startDate:"2017-10-06T22:06:34.863Z",endDate:"2017-10-11T04:13:12.963Z",name:"event398"},{startDate:"2017-07-08T18:57:28.499Z",endDate:"2017-08-20T00:38:01.351Z",name:"event399"},{startDate:"2017-06-16T10:49:16.527Z",endDate:"2017-10-11T08:27:56.869Z",name:"event400"},{startDate:"2017-07-02T18:21:26.025Z",endDate:"2017-07-17T20:33:07.886Z",name:"event401"},{startDate:"2017-07-04T05:26:28.683Z",endDate:"2017-11-16T18:44:33.776Z",name:"event402"},{startDate:"2017-03-17T03:02:08.775Z",endDate:"2017-08-16T07:05:05.381Z",name:"event403"},{startDate:"2017-10-04T09:04:49.185Z",endDate:"2017-10-29T22:28:56.582Z",name:"event404"},{startDate:"2017-07-14T06:51:20.243Z",endDate:"2017-08-30T12:21:37.686Z",name:"event405"},{startDate:"2017-09-15T22:12:10.257Z",endDate:"2017-10-16T19:00:16.029Z",name:"event406"},{startDate:"2017-06-28T08:09:09.314Z",endDate:"2017-07-28T05:49:05.731Z",name:"event407"},{startDate:"2017-03-01T21:38:48.509Z",endDate:"2017-10-23T08:02:34.320Z",name:"event408"},{startDate:"2017-10-13T20:17:38.413Z",endDate:"2017-10-14T05:02:58.801Z",name:"event409"},{startDate:"2017-07-14T11:16:59.256Z",endDate:"2017-10-25T07:05:32.893Z",name:"event410"},{startDate:"2017-05-02T09:07:43.910Z",endDate:"2017-11-16T06:18:27.737Z",name:"event411"},{startDate:"2017-09-11T21:52:27.963Z",endDate:"2017-10-21T14:54:53.872Z",name:"event412"},{startDate:"2017-11-05T11:30:41.783Z",endDate:"2017-11-15T11:50:20.677Z",name:"event413"},{startDate:"2017-07-30T23:49:30.404Z",endDate:"2017-09-01T15:11:17.455Z",name:"event414"},{startDate:"2017-06-14T21:45:16.150Z",endDate:"2017-11-07T02:13:58.099Z",name:"event415"},{startDate:"2017-07-04T01:29:43.846Z",endDate:"2017-10-23T12:46:39.915Z",name:"event416"},{startDate:"2017-05-07T20:44:07.137Z",endDate:"2017-08-11T20:44:41.717Z",name:"event417"},{startDate:"2017-08-01T14:51:08.454Z",endDate:"2017-08-21T08:38:45.877Z",name:"event418"},{startDate:"2017-08-04T10:29:07.502Z",endDate:"2017-08-04T14:34:50.825Z",name:"event419"},{startDate:"2017-08-02T20:04:38.723Z",endDate:"2017-10-30T02:22:24.100Z",name:"event420"},{startDate:"2017-09-24T16:36:57.959Z",endDate:"2017-11-07T01:02:21.734Z",name:"event421"},{startDate:"2017-06-09T21:46:34.002Z",endDate:"2017-08-17T05:27:38.053Z",name:"event422"},{startDate:"2017-06-22T15:14:09.640Z",endDate:"2017-07-21T23:15:46.245Z",name:"event423"},{startDate:"2017-02-22T10:27:17.751Z",endDate:"2017-07-30T17:47:23.495Z",name:"event424"},{startDate:"2017-09-07T15:37:57.441Z",endDate:"2017-10-14T00:49:11.922Z",name:"event425"},{startDate:"2017-02-18T01:59:00.491Z",endDate:"2017-04-26T20:18:15.741Z",name:"event426"},{startDate:"2016-12-25T02:13:38.968Z",endDate:"2017-10-08T12:19:27.944Z",name:"event427"},{startDate:"2017-07-07T07:18:37.989Z",endDate:"2017-07-17T05:02:55.671Z",name:"event428"},{startDate:"2017-10-14T12:34:00.024Z",endDate:"2017-11-07T06:41:27.842Z",name:"event429"},{startDate:"2017-10-20T20:25:54.278Z",endDate:"2017-11-05T02:37:13.328Z",name:"event430"},{startDate:"2017-10-27T03:21:00.372Z",endDate:"2017-10-27T16:17:05.648Z",name:"event431"},{startDate:"2017-02-15T10:16:13.211Z",endDate:"2017-05-17T07:40:27.438Z",name:"event432"},{startDate:"2017-01-04T18:38:09.534Z",endDate:"2017-05-08T15:46:44.590Z",name:"event433"},{startDate:"2017-09-24T10:48:47.506Z",endDate:"2017-10-24T11:13:20.501Z",name:"event434"},{startDate:"2017-05-31T15:18:23.331Z",endDate:"2017-09-25T09:26:00.723Z",name:"event435"},{startDate:"2017-05-30T20:19:23.390Z",endDate:"2017-11-09T05:59:55.646Z",name:"event436"}],c=d3.timeParse("%Y-%m-%dT%H:%M:%S.%LZ");s.forEach((function(t){t.startDate=c(t.startDate),t.endDate=c(t.endDate)})),this.chartContainer.append("g").selectAll("rect").data(s).enter().append("rect").attr("x",(function(t){return o(t.startDate)})).attr("y",this.height-10).attr("width",(function(t){return o(t.endDate)-o(t.startDate)})).attr("height",10).attr("fill","#FFD325").attr("rx",4).attr("stroke","white").style("stroke-width",2).attr("fill","none")}},{key:"dataFilter",value:function(t,e){var n=[];Array.isArray(t)||(t=[t]);var r=new Date("".concat(e," 12:00:00+08:00")),a=t.filter((function(t){return new Date(t.timeStamp)<r})),i=t.filter((function(t){return new Date(t.timeStamp)>=r}));return n.push({AM:a,PM:i}),n}},{key:"lassoFunction",value:function(){var t=this.lassoContainer,n=this.vueComponent;d3.rgb(174,219,155),d3.rgb(162,162,162),d3.rgb(219,76,85),d3.rgb(255,210,186);function r(t){var e=yt["a"].getters["lassoInteraction/getChangedTransaction"];if(e!=[]){d3.rgb(174,219,155),d3.rgb(162,162,162);for(var n=d3.rgb(219,76,85),r=(d3.rgb(255,210,186),t.selectAll("circle")),a=r._groups[0],i=function(){var t=a[o],r=t.__data__.transactionId,i=e.some((function(t){return t.transactionId===r}));i&&d3.select(t).style("stroke",n).style("stroke-width",6)},o=1;o<a.length-1;o++)i()}}function a(t){var e=yt["a"].getters["lassoInteraction/getGlobalLassoData"];if(void 0!=e){d3.rgb(174,219,155),d3.rgb(162,162,162);for(var n=d3.rgb(219,76,85),r=d3.rgb(255,210,186),a=t.selectAll("circle"),i=a._groups[0],o=function(){var t=i[s],a=t.__data__.transactionId,o=e.some((function(t){return t.transactionId===a}));o?d3.select(t).style("stroke",n).style("stroke-width",2):d3.select(t).style("stroke",r).style("stroke-width",1)},s=1;s<i.length-1;s++)o()}}var i=function(){console.log("start"),l.items().classed("not_possible",!0).classed("selected",!1)},o=function(){l.possibleItems().classed("not_possible",!1).classed("possible",!0),l.notPossibleItems().classed("not_possible",!0).classed("possible",!1)},s=function(){console.log("end"),l.items().classed("not_possible",!1).classed("possible",!1),l.selectedItems().classed("selected",!0),l.notSelectedItems();var i=l.selectedItems(),o=[];i.each((function(t){var e=d3.select(this).data()[0];o.push(e)})),n.theSelection=o;var s={bondcd:e,theSelection:n.theSelection,allData:n.TransactionList};console.log(s),yt["a"].dispatch("lassoInteraction/updateTempSelection",s),r(t),a(t)},c=t.selectAll("g circle"),l=d3.lasso().closePathDistance(305).closePathSelect(!0).targetArea(t).items(c).on("start",i).on("draw",o).on("end",s);return t.call(l),t.append("rect").attr("width","100%").attr("height","100%").attr("fill","transparent").attr("pointer-events","all"),this.lassoContainer.node()}}]),t}(),l=new c(t,e,n,r,o),s.next=4,l.drawMultiDayData("transactionTsne");case 4:l.lassoFunction();case 5:case"end":return s.stop()}}),s)})))()},fetchData:function(){var t=this;return Object(U["a"])(Object(j["a"])().mark((function e(){var n,r,a,i,o,s,c,l,u;return Object(j["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=function(t,e,n){return new Promise(function(){var r=Object(U["a"])(Object(j["a"])().mark((function r(a,i){var o;return Object(j["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o=new W(t,e,n),r.prev=1,r.next=4,o.generateData(t,e,n);case 4:a(o.dataPackage),r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](1),i(r.t0);case 10:case"end":return r.stop()}}),r,null,[[1,7]])})));return function(t,e){return r.apply(this,arguments)}}())},r=function(t,e){var n=t[0],r=t[1],a=n+e[1]*r,i=n+e[0]*r;return[i,a]},n=function(t){var e=t.reduce((function(t,e){return t+e}),0)/t.length,n=t.reduce((function(t,n){return t+Math.pow(n-e,2)}),0)/t.length;return[e,n]},e.prev=3,e.next=6,a(t.bond_cd,t.end_date,t.duration_days);case 6:return i=e.sent,console.log("dataPackage 12351",i),o=i.transaction.map((function(t){return t.netPrice})),s=n(o),c=r(s,t.scaler_index),l=$.a.cloneDeep(i),u={bondcd:t.bond_cd,allTransactions:l.transaction},yt["a"].dispatch("lassoInteraction/updateAllData",u),t.drawMultiCharts(l,t.bond_cd,t.end_date,t.duration_days,c,t.colorMapping),e.abrupt("return",i);case 18:e.prev=18,e.t0=e["catch"](3),console.log("Error:",e.t0);case 21:case"end":return e.stop()}}),e,null,[[3,18]])})))()},performAddAction:function(t){var e=this,n=this.getLassoSelectedTrans,r=this.theSelection;switch(r&&r.length>0?this.theSelection_bond_cd=r[0]["bond_cd"]:this.theSelection_bond_cd="default_value",t){case"add":n.hasOwnProperty(this.theSelection_bond_cd)||(n[this.theSelection_bond_cd]=[]),r.forEach((function(t){n[e.theSelection_bond_cd].push(t)})),console.log("selectedData 948",r);var a=new Set(n[this.theSelection_bond_cd]);n[this.theSelection_bond_cd]=Array.from(a);break;case"delete":if(n.hasOwnProperty(this.theSelection_bond_cd)){var i=[];n[this.theSelection_bond_cd].forEach((function(t){r.includes(t)||i.push(t)})),n[this.theSelection_bond_cd]=i}break}return console.log("lassoSelectedTrans 967",n),n},triggerInfoView:function(){}})}),St=Tt,wt=(n("6581"),Object(tt["a"])(St,mt,bt,!1,null,null,null)),Et=wt.exports,Lt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"svg_micro_"+t.bond_cd+"_"+t.end_date+"_"+t.duration_days}})},At=[],Dt=n("6ff4"),It=(Dt.format,{props:["bond_cd","end_date","duration_days","scaler_index","scaler_index_high","scaler_index_low"],data:function(){return{fetchDataTimeout:null,MarketPriceList:!1,ValuationList:!1,TransactionList:!1,combinedMarketPriceData:!1,dataPackages_init:!1,dataPackages:!1,tradeChart_height:730,tradeChart_width:180,tradeChart_margin:{top:10,right:50,bottom:30,left:30},keyColor:{tradeLine:"#084177",valuationBox:"#cd8d7b",volumeBar:"#687466",tradeGradLine:"#fbc490",volumeGradLine:"#d2c6b2"},theSelection:[],theSelection_bond_cd:[],initialData:{},colorMapping:!1}},watch:{scaler_index:function(t){var e=this;t&&(clearTimeout(this.fetchDataTimeout),this.fetchDataTimeout=setTimeout((function(){e.deleteSvg(e.bond_cd,e.end_date,e.duration_days),e.fetchData()}),500))}},created:function(){var t=this;b["get"]("http://localhost:5003/api/color_mapping").then((function(e){t.colorMapping=e.data})).catch((function(t){console.error("Error fetching color mapping:",t)}))},computed:Object(i["a"])(Object(i["a"])({},Object(o["d"])({})),Object(o["c"])("lassoInteraction",["getLatestSelectionBondcd","getLatestSelection","getGlobalLassoData","getGlobalHistory","getChangedTransaction","getGlobalLassoDataHistory","getHistoryActions","getHistoryIndex"])),beforeMount:function(){},mounted:function(){this.dataPackages=this.fetchData()},beforeDestroy:function(){},methods:Object(i["a"])(Object(i["a"])({},Object(o["b"])(["updateLassoSelectedTrans"])),{},{send_data:function(){},deleteSvg:function(t,e,n){var r=d3.select("#svg_micro_"+t+"_"+e+"_"+n);r.selectAll("*").remove()},drawMultiCharts:function(t,e,n,r,a,i){var o=this;return Object(U["a"])(Object(j["a"])().mark((function s(){var c,l;return Object(j["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return c=function(){function t(e,n,r,o,s){Object(G["a"])(this,t),this.allData=$.a.cloneDeep(e),this.bond_cd=n,this.endDay=r,this.duration_days=o,this.margin={top:3,right:3,bottom:3,left:3},this.width=780,this.theWidth=!1,this.halfDayHours=!1,this.height=500,this.vueComponent=s,this.upper=a[0],this.lower=a[1],this.marginTop=5,this.marginRight=20,this.marginBottom=35,this.marginLeft=39,this.colorMapping=i;var c=d3.select("#svg_micro_"+n+"_"+r+"_"+o).append("svg").attr("name","Container").attr("width",this.width).attr("height",this.height);this.chartContainer=c;var l=this.chartContainer.append("svg").attr("width",this.width).attr("height",this.height).attr("name","lineContainer");this.lineContainer=l;var u=this.chartContainer.append("svg").attr("width",this.width).attr("height",this.height).attr("name","lassoContainer");this.lassoContainer=u;var d=this.chartContainer.append("svg").attr("width",this.width).attr("height",this.height).attr("name","InstitutionContainer");this.InstitutionContainer=d;var h=this.chartContainer.append("svg").attr("width",this.width).attr("height",this.height).attr("name","VolumeBarContainer");this.VolumeBarContainer=h}return Object(F["a"])(t,[{key:"getDate",value:function(t){var e=new Date(t),n=e.getFullYear().toString(),r=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getDate().toString().padStart(2,"0"),i="".concat(n,"-").concat(r,"-").concat(a);return i}},{key:"drawMultiDayData",value:function(){var t=Object(U["a"])(Object(j["a"])().mark((function t(e){var n,r,a,i,o=this;return Object(j["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,$.a.cloneDeep(this.allData[e]);case 2:n=t.sent,this.allData[e].sort((function(t,e){return new Date(t.timeStamp)-new Date(e.timeStamp)})),r={},n.forEach((function(t){var e=o.getDate(t.timeStamp);r[e]||(r[e]=[]),r[e].push(t)})),a=$.a.cloneDeep(r),i=2*Object.keys(a).length,Object.entries(a).forEach((function(t,n){var r=Object(Z["a"])(t,2),a=r[0],s=r[1],c=100;o.width=o.width-c;var l=2*o.width/i*3/7,u=(o.width,2*n/i*o.width+c),d=u+l,h=o.dataFilter(s,a),f=$.a.cloneDeep(h),p=f[0].AM,_=f[0].PM,g=$.a.cloneDeep(p),m=$.a.cloneDeep(_);o.drawDayData(g,e,a,u,"AM",i),o.drawDayData(m,e,a,d,"PM",i)}));case 9:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"drawDayData",value:function(t,e,n,r,a,i){var o=!1,s=!1;switch("AM"===a&&(o=this.offsetTime(n,9,0),s=this.offsetTime(n,12,0)),"PM"===a&&(o=this.offsetTime(n,13,30),s=this.offsetTime(n,17,30)),e){case"mktPrice":this.drawMktPriceLine(t,r,a,o,s,i);break;case"valuation":this.drawValuationLine(t,r,o,s,i);break;case"volume":this.drawVolumeBar(t,r,a,o,s,i);break;case"transaction":this.drawTrasactionScatter(t,r,a,o,s,i);break;case"gradient":this.drawGradTimeline(t,r,o,s,i);break}}},{key:"formatDateToCustomString",value:function(t){var e=new Date(t),n=e.getFullYear(),r=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getDate().toString().padStart(2,"0"),i=e.getHours().toString().padStart(2,"0"),o=e.getMinutes().toString().padStart(2,"0"),s=e.getSeconds().toString().padStart(2,"0"),c="".concat(n,"_").concat(r,"_").concat(a,"_").concat(i,"_").concat(o,"_").concat(s);return c}},{key:"formatDateToCustomDateString",value:function(t){var e=new Date(t),n=e.getFullYear(),r=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getDate().toString().padStart(2,"0"),i=e.getHours().toString().padStart(2,"0"),o=e.getMinutes().toString().padStart(2,"0"),s=e.getSeconds().toString().padStart(2,"0"),c="".concat(n,"-").concat(r,"-").concat(a," ").concat(i,":").concat(o,":").concat(s);return c}},{key:"offsetTime",value:function(t,e,n){var r=new Date(t),a=1e3*(3600*e+60*n),i=r.getTime()+a,o=new Date(i),s=o.getFullYear(),c=(o.getMonth()+1).toString().padStart(2,"0"),l=o.getDate().toString().padStart(2,"0"),u=o.getHours().toString().padStart(2,"0"),d=o.getMinutes().toString().padStart(2,"0"),h=o.getSeconds().toString().padStart(2,"0"),f="".concat(s,"-").concat(c,"-").concat(l,"T").concat(u,":").concat(d,":").concat(h,".000Z");return f}},{key:"drawMktPriceLine",value:function(t,e,n,r,a,i){t.forEach((function(t){var e=t.timeStamp.slice(0,-6);t.timeStamp=e,t.timeStamp=new Date(t.timeStamp)})),t.sort((function(t,e){return t.timeStamp-e.timeStamp})),r=this.formatDateToCustomDateString(r),a=this.formatDateToCustomDateString(a);var o=2*this.width/i*3/7,s=2*this.width/i*4/7;"AM"===n&&(this.theWidth=o),"PM"===n&&(this.theWidth=s);var c=.8*this.height,l=0,u=d3.scaleTime().range([0,this.theWidth]).domain([d3.min(t,(function(t){return t.timeStamp})),d3.max(t,(function(t){return t.timeStamp}))]),d=d3.scaleLinear().range([l,c]).domain([this.lower,this.upper]),h=d3.line().x((function(t){return u(t.timeStamp)})).y((function(t){return d(t.netValue)})).curve(d3.curveCatmullRom.alpha(.5)),f=d3.area().x((function(t){return u(t.timeStamp)})).y0((function(t){return d(t.netValue-.02)})).y1((function(t){return d(t.netValue+.02)}));this.lineContainer.append("g").append("path").datum(t).attr("class","line").attr("d",h).attr("transform","translate(".concat(e,", 0)")).style("stroke",d3.schemeRdYlBu[3][2]).style("stroke-width",2).style("fill","none"),this.lineContainer.append("g").append("path").datum(t).attr("fill","steelblue").attr("opacity",.2).attr("transform","translate(".concat(e,", 0)")).attr("d",f)}},{key:"drawValuationLine",value:function(t,e,n,r){var a=this;d3.scaleLinear().domain([0,d3.max(t,(function(t){return t.transactionVolume}))]).range([0,10]);this.chartContainer.selectAll("rect").data(t).enter().append("rect").attr("cx",(function(t,e){return 10*e})).attr("cy",(function(t,e){return a.height-1*t.netPrice}))}},{key:"drawTrasactionScatter",value:function(t,e,n,r,a,i){var o=this;t.forEach((function(t){var e=t.timeStamp.slice(0,-6);t.timeStamp=e,t.timeStamp=new Date(t.timeStamp)})),r=this.formatDateToCustomDateString(r),a=this.formatDateToCustomDateString(a);var s=2*this.width/i*3/7,c=2*this.width/i*4/7;"AM"===n&&(this.theWidth=s),"PM"===n&&(this.theWidth=c);var l=d3.scaleTime().range([0,this.theWidth]).domain([d3.min(t,(function(t){return t.timeStamp})),d3.max(t,(function(t){return t.timeStamp}))]),u=.7*this.height,d=0,h=d3.scaleLinear().domain([this.lower,this.upper]).range([d,u]),f=d3.scaleLinear().domain([-100,100]).range([u,d]),p=(d3.max(t,(function(t){return Math.abs(t.transactionVolume)})),d3.min(t,(function(t){return Math.abs(t.transactionVolume)})),d3.rgb(174,219,155),d3.rgb(162,162,162),d3.rgb(219,76,85),d3.rgb(255,210,186)),_=(d3.scaleLinear().range([1,5]).domain([1e3,3e3]),function(t){return t.attr("stroke","currentColor").attr("stroke-opacity",.05).call((function(t){return t.append("g").selectAll("line").data(l.ticks()).join("line").attr("x1",(function(t){return.5+l(t)})).attr("x2",(function(t){return.5+l(t)})).attr("y1",.8*o.height).attr("y2",0)})).attr("transform","translate(".concat(e,", 0)")).call((function(t){return t.append("g").selectAll("line").data(h.ticks()).join("line").attr("y1",(function(t){return.5+h(t)})).attr("y2",(function(t){return.5+h(t)})).attr("x1",0).attr("x2",o.theWidth)}))});this.lassoContainer.append("g").attr("stroke","#000").attr("stroke-opacity",.2).selectAll("circle").data(t).enter().append("circle").attr("cx",(function(t){return l(t.timeStamp)})).attr("cy",(function(t){return h(t.netPrice)})).attr("r",(function(t){return Math.sqrt(Math.abs(33*t.transactionVolume))/3.14})).attr("fill",(function(t){var e=o.colorMapping[t.byr_instn_tp];return e?d3.rgb(e[0],e[1],e[2]):p})).attr("transform","translate(".concat(e,", 0)")).style("opacity",.4),this.lassoContainer.append("g").call(_),this.lassoContainer.append("g").attr("transform","translate(".concat(e,", ").concat(.8*this.height-40,")")).call(d3.axisBottom(l).ticks(this.width/100)).call((function(t){return t.select(".domain").remove()})).call((function(t){return t.append("text").attr("x",o.width-5).attr("y",o.marginBottom).attr("fill","currentColor").attr("text-anchor","end").text("Time →")})),this.lassoContainer.append("g").attr("transform","translate(".concat(this.marginLeft+60,", 0)")).call(d3.axisLeft(h)).call((function(t){return t.select(".domain").remove()})).call((function(t){return t.append("text").attr("x",10).attr("y",20).attr("fill","currentColor").attr("text-anchor","start").text("Net value ↓ ")})),this.lassoContainer.append("g").attr("transform","translate(".concat(this.marginLeft,", 10)")).call(d3.axisLeft(f)).call((function(t){return t.select(".domain").remove()})).call((function(t){return t.append("text").attr("x",-34).attr("y",-5).attr("fill","currentColor").attr("text-anchor","start").text(" σ ")}))}},{key:"drawInstitution",value:function(t,e,n,r,a,i){var o=this;t.forEach((function(t){var e=t.timeStamp.slice(0,-6);t.timeStamp=e,t.timeStamp=new Date(t.timeStamp)})),r=this.formatDateToCustomDateString(r),a=this.formatDateToCustomDateString(a);var s=2*this.width/i*3/7,c=2*this.width/i*4/7;"AM"===n&&(this.theWidth=s),"PM"===n&&(this.theWidth=c);var l=d3.scaleTime().range([0,this.theWidth]).domain([d3.min(t,(function(t){return t.timeStamp})),d3.max(t,(function(t){return t.timeStamp}))]),u=.8*this.height,d=0,h=d3.scaleLinear().domain([this.lower,this.upper]).range([u,d]),f=(d3.max(t,(function(t){return Math.abs(t.transactionVolume)})),d3.min(t,(function(t){return Math.abs(t.transactionVolume)})),d3.rgb(174,219,155),d3.rgb(162,162,162),d3.rgb(219,76,85),d3.rgb(255,210,186));d3.scaleLinear().range([1,5]).domain([1e3,3e3]);this.lassoContainer.append("g").attr("stroke","#000").attr("stroke-opacity",.2).selectAll("circle").data(t).enter().append("circle").attr("cx",(function(t){return l(t.timeStamp)})).attr("cy",(function(t){return h(t.netPrice)})).attr("r",(function(t){return Math.sqrt(Math.abs(t.transactionVolume))/3.14})).attr("fill",(function(t){console.log("d.transactionVolume",t.transactionVolume);var e=o.colorMapping[t.byr_instn_tp];return e?d3.rgb(e[0],e[1],e[2]):f})).attr("transform","translate(".concat(e,", 0)")).style("opacity",.4),this.lassoContainer.append("g").attr("transform","translate(".concat(e,", ").concat(.8*this.height-10,")")).call(d3.axisBottom(l).ticks(this.width/100)).call((function(t){return t.select(".domain").remove()})).call((function(t){return t.append("text").attr("x",o.width-5).attr("y",o.marginBottom-10).attr("fill","currentColor").attr("text-anchor","end").text("Time →")})),this.lassoContainer.append("g").attr("transform","translate(".concat(this.marginLeft+60,", 0)")).call(d3.axisLeft(h)).call((function(t){return t.select(".domain").remove()})).call((function(t){return t.append("text").attr("x",20).attr("y",10).attr("fill","currentColor").attr("text-anchor","start").text("Net value ↓ ")}))}},{key:"drawVolumeBar",value:function(t,e,n,r,a,i){var o=this;function s(t,e){var n=new Date(t),r=n.getFullYear(),a=(n.getMonth()+1).toString().padStart(2,"0"),i=n.getDate().toString().padStart(2,"0"),o=Math.floor(n.getHours()).toString().padStart(2,"0"),s=Math.floor(n.getMinutes()/e)*e,c=s.toString().padStart(2,"0"),l="".concat(r,"-").concat(a,"-").concat(i," ").concat(o,":").concat(c);return new Date(l)}var c=4;t.forEach((function(t){t.timeStamp=new Date(t.timeStamp)}));var l=this.bucketDataByMinute(t,c);r=this.formatDateToCustomDateString(r),a=this.formatDateToCustomDateString(a),this.width=568;var u=2*this.width/i*3/7,d=2*this.width/i*4/7;"AM"===n&&(this.theWidth=u,this.halfDayHours=3),"PM"===n&&(this.theWidth=d,this.halfDayHours=4,e=350);var h=l.map((function(t){return d3.sum(t,(function(t){return t.transactionVolume}))})),f=d3.max(h),p=d3.scaleTime().range([0,this.theWidth]).domain([d3.min(t,(function(t){return t.timeStamp})),d3.max(t,(function(t){return t.timeStamp}))]),_=d3.scaleLinear().range([0,.1*this.height]).domain([0,f]);this.VolumeBarContainer.append("g").selectAll("rect").data(l).attr("class","volumeBar").enter().append("rect").attr("x",(function(t){return p(s(t[0].timeStamp,c))})).attr("y",(function(t){return.88*o.height-_(d3.sum(t,(function(t){return t.transactionVolume})))})).attr("height",(function(t){return _(d3.sum(t,(function(t){return t.transactionVolume})))})).attr("width",this.theWidth*c/(60*this.halfDayHours)).attr("fill","SteelBlue").attr("transform","translate(".concat(e,", 0)")).on("mouseover",(function(){d3.select(this).attr("fill","Maroon")})).on("mouseout",(function(){d3.select(this).attr("fill","SteelBlue")}))}},{key:"bucketDataByMinute",value:function(t,e){var n={};t.forEach((function(t){var r=new Date(t.timeStamp),a=(Math.floor(r.getHours()).toString()+"-"+Math.floor(r.getMinutes()/e)*e.toString()).toString();n[a]||(n[a]=[]),n[a].push(t)}));var r=Object.values(n);return r}},{key:"drawGradTimeline",value:function(t,e,n,r,a){var i=10;this.bucketDataByMinute(t,i),d3.timeParse("%Y/%m/%d %H:%M:%S");n=this.formatDateToCustomDateString(n),r=this.formatDateToCustomDateString(r);var o=d3.scaleTime().range([0,this.width]).domain([d3.min(t,(function(t){return t.timeStamp})),d3.max(t,(function(t){return t.timeStamp}))]),s=[{startDate:"2017-06-29T01:33:03.988Z",endDate:"2017-09-10T07:51:43.818Z",name:"event383"},{startDate:"2017-06-11T06:32:17.887Z",endDate:"2017-10-23T10:23:17.065Z",name:"event384"},{startDate:"2017-11-08T23:28:11.281Z",endDate:"2017-11-13T07:54:34.614Z",name:"event385"},{startDate:"2016-11-19T03:41:04.917Z",endDate:"2017-08-28T06:29:05.559Z",name:"event386"},{startDate:"2017-06-02T14:01:20.799Z",endDate:"2017-06-03T20:49:25.676Z",name:"event387"},{startDate:"2017-09-22T21:50:17.825Z",endDate:"2017-10-12T13:56:05.972Z",name:"event388"},{startDate:"2017-07-15T10:38:35.760Z",endDate:"2017-09-27T12:09:17.202Z",name:"event389"},{startDate:"2017-06-29T10:14:34.872Z",endDate:"2017-07-22T11:45:15.488Z",name:"event390"},{startDate:"2017-06-18T17:56:56.597Z",endDate:"2017-08-09T03:35:53.160Z",name:"event391"},{startDate:"2017-07-12T12:41:18.234Z",endDate:"2017-10-16T08:34:34.768Z",name:"event392"},{startDate:"2017-08-07T01:53:14.537Z",endDate:"2017-08-27T00:59:19.305Z",name:"event393"},{startDate:"2017-08-19T00:17:16.190Z",endDate:"2017-11-03T20:29:22.870Z",name:"event394"},{startDate:"2017-09-11T05:23:24.449Z",endDate:"2017-09-29T22:25:24.258Z",name:"event395"},{startDate:"2017-06-26T22:40:55.276Z",endDate:"2017-10-07T06:26:10.546Z",name:"event396"},{startDate:"2017-09-26T07:12:38.705Z",endDate:"2017-11-05T00:36:12.767Z",name:"event397"},{startDate:"2017-10-06T22:06:34.863Z",endDate:"2017-10-11T04:13:12.963Z",name:"event398"},{startDate:"2017-07-08T18:57:28.499Z",endDate:"2017-08-20T00:38:01.351Z",name:"event399"},{startDate:"2017-06-16T10:49:16.527Z",endDate:"2017-10-11T08:27:56.869Z",name:"event400"},{startDate:"2017-07-02T18:21:26.025Z",endDate:"2017-07-17T20:33:07.886Z",name:"event401"},{startDate:"2017-07-04T05:26:28.683Z",endDate:"2017-11-16T18:44:33.776Z",name:"event402"},{startDate:"2017-03-17T03:02:08.775Z",endDate:"2017-08-16T07:05:05.381Z",name:"event403"},{startDate:"2017-10-04T09:04:49.185Z",endDate:"2017-10-29T22:28:56.582Z",name:"event404"},{startDate:"2017-07-14T06:51:20.243Z",endDate:"2017-08-30T12:21:37.686Z",name:"event405"},{startDate:"2017-09-15T22:12:10.257Z",endDate:"2017-10-16T19:00:16.029Z",name:"event406"},{startDate:"2017-06-28T08:09:09.314Z",endDate:"2017-07-28T05:49:05.731Z",name:"event407"},{startDate:"2017-03-01T21:38:48.509Z",endDate:"2017-10-23T08:02:34.320Z",name:"event408"},{startDate:"2017-10-13T20:17:38.413Z",endDate:"2017-10-14T05:02:58.801Z",name:"event409"},{startDate:"2017-07-14T11:16:59.256Z",endDate:"2017-10-25T07:05:32.893Z",name:"event410"},{startDate:"2017-05-02T09:07:43.910Z",endDate:"2017-11-16T06:18:27.737Z",name:"event411"},{startDate:"2017-09-11T21:52:27.963Z",endDate:"2017-10-21T14:54:53.872Z",name:"event412"},{startDate:"2017-11-05T11:30:41.783Z",endDate:"2017-11-15T11:50:20.677Z",name:"event413"},{startDate:"2017-07-30T23:49:30.404Z",endDate:"2017-09-01T15:11:17.455Z",name:"event414"},{startDate:"2017-06-14T21:45:16.150Z",endDate:"2017-11-07T02:13:58.099Z",name:"event415"},{startDate:"2017-07-04T01:29:43.846Z",endDate:"2017-10-23T12:46:39.915Z",name:"event416"},{startDate:"2017-05-07T20:44:07.137Z",endDate:"2017-08-11T20:44:41.717Z",name:"event417"},{startDate:"2017-08-01T14:51:08.454Z",endDate:"2017-08-21T08:38:45.877Z",name:"event418"},{startDate:"2017-08-04T10:29:07.502Z",endDate:"2017-08-04T14:34:50.825Z",name:"event419"},{startDate:"2017-08-02T20:04:38.723Z",endDate:"2017-10-30T02:22:24.100Z",name:"event420"},{startDate:"2017-09-24T16:36:57.959Z",endDate:"2017-11-07T01:02:21.734Z",name:"event421"},{startDate:"2017-06-09T21:46:34.002Z",endDate:"2017-08-17T05:27:38.053Z",name:"event422"},{startDate:"2017-06-22T15:14:09.640Z",endDate:"2017-07-21T23:15:46.245Z",name:"event423"},{startDate:"2017-02-22T10:27:17.751Z",endDate:"2017-07-30T17:47:23.495Z",name:"event424"},{startDate:"2017-09-07T15:37:57.441Z",endDate:"2017-10-14T00:49:11.922Z",name:"event425"},{startDate:"2017-02-18T01:59:00.491Z",endDate:"2017-04-26T20:18:15.741Z",name:"event426"},{startDate:"2016-12-25T02:13:38.968Z",endDate:"2017-10-08T12:19:27.944Z",name:"event427"},{startDate:"2017-07-07T07:18:37.989Z",endDate:"2017-07-17T05:02:55.671Z",name:"event428"},{startDate:"2017-10-14T12:34:00.024Z",endDate:"2017-11-07T06:41:27.842Z",name:"event429"},{startDate:"2017-10-20T20:25:54.278Z",endDate:"2017-11-05T02:37:13.328Z",name:"event430"},{startDate:"2017-10-27T03:21:00.372Z",endDate:"2017-10-27T16:17:05.648Z",name:"event431"},{startDate:"2017-02-15T10:16:13.211Z",endDate:"2017-05-17T07:40:27.438Z",name:"event432"},{startDate:"2017-01-04T18:38:09.534Z",endDate:"2017-05-08T15:46:44.590Z",name:"event433"},{startDate:"2017-09-24T10:48:47.506Z",endDate:"2017-10-24T11:13:20.501Z",name:"event434"},{startDate:"2017-05-31T15:18:23.331Z",endDate:"2017-09-25T09:26:00.723Z",name:"event435"},{startDate:"2017-05-30T20:19:23.390Z",endDate:"2017-11-09T05:59:55.646Z",name:"event436"}],c=d3.timeParse("%Y-%m-%dT%H:%M:%S.%LZ");s.forEach((function(t){t.startDate=c(t.startDate),t.endDate=c(t.endDate)})),this.chartContainer.append("g").selectAll("rect").data(s).enter().append("rect").attr("x",(function(t){return o(t.startDate)})).attr("y",this.height-10).attr("width",(function(t){return o(t.endDate)-o(t.startDate)})).attr("height",10).attr("fill","#FFD325").attr("rx",4).attr("stroke","white").style("stroke-width",2).attr("fill","none")}},{key:"dataFilter",value:function(t,e){var n=[];Array.isArray(t)||(t=[t]);var r=new Date("".concat(e," 12:00:00+08:00")),a=t.filter((function(t){return new Date(t.timeStamp)<r})),i=t.filter((function(t){return new Date(t.timeStamp)>=r}));return n.push({AM:a,PM:i}),n}},{key:"lassoFunction",value:function(){var t=this.lassoContainer,n=this.vueComponent;d3.rgb(174,219,155),d3.rgb(162,162,162),d3.rgb(219,76,85),d3.rgb(255,210,186);function r(t){var e=yt["a"].getters["lassoInteraction/getChangedTransaction"];if(e!=[]){d3.rgb(174,219,155),d3.rgb(162,162,162);for(var n=d3.rgb(219,76,85),r=(d3.rgb(255,210,186),t.selectAll("circle")),a=r._groups[0],i=function(){var t=a[o],r=t.__data__.transactionId,i=e.some((function(t){return t.transactionId===r}));i&&d3.select(t).style("stroke",n).style("stroke-width",6)},o=1;o<a.length-1;o++)i()}}function a(t){var e=yt["a"].getters["lassoInteraction/getGlobalLassoData"];if(void 0!=e){d3.rgb(174,219,155),d3.rgb(162,162,162);for(var n=d3.rgb(219,76,85),r=d3.rgb(255,210,186),a=t.selectAll("circle"),i=a._groups[0],o=function(){var t=i[s],a=t.__data__.transactionId,o=e.some((function(t){return t.transactionId===a}));o?d3.select(t).style("stroke",n).style("stroke-width",2):d3.select(t).style("stroke",r).style("stroke-width",1)},s=1;s<i.length-1;s++)o()}}var i=function(){console.log("start"),l.items().classed("not_possible",!0).classed("selected",!1)},o=function(){console.log("draw"),l.possibleItems().classed("not_possible",!1).classed("possible",!0),l.notPossibleItems().classed("not_possible",!0).classed("possible",!1)},s=function(){console.log("end"),l.items().classed("not_possible",!1).classed("possible",!1),l.selectedItems().classed("selected",!0),l.notSelectedItems();var i=l.selectedItems(),o=[];i.each((function(t){var e=d3.select(this).data()[0];o.push(e)})),n.theSelection=o;var s={bondcd:e,theSelection:n.theSelection,allData:n.TransactionList};yt["a"].dispatch("lassoInteraction/updateTempSelection",s),r(t),a(t)},c=t.selectAll("g circle"),l=d3.lasso().closePathDistance(305).closePathSelect(!0).targetArea(t).items(c).on("start",i).on("draw",o).on("end",s);return t.call(l),t.append("rect").attr("width","100%").attr("height","100%").attr("fill","transparent").attr("pointer-events","all"),this.lassoContainer.node()}}]),t}(),l=new c(t,e,n,r,o),s.next=4,l.drawMultiDayData("mktPrice");case 4:return s.next=6,l.drawMultiDayData("transaction");case 6:return s.next=8,l.drawMultiDayData("volume");case 8:l.lassoFunction();case 9:case"end":return s.stop()}}),s)})))()},fetchData:function(){var t=this;return Object(U["a"])(Object(j["a"])().mark((function e(){var n,r,a,i,o,s,c,l,u;return Object(j["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=function(t,e,n){return new Promise(function(){var r=Object(U["a"])(Object(j["a"])().mark((function r(a,i){var o;return Object(j["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o=new W(t,e,n),r.prev=1,r.next=4,o.generateData(t,e,n);case 4:a(o.dataPackage),r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](1),i(r.t0);case 10:case"end":return r.stop()}}),r,null,[[1,7]])})));return function(t,e){return r.apply(this,arguments)}}())},r=function(t,e){var n=t[0],r=t[1],a=n+e[1]*r,i=n+e[0]*r;return[i,a]},n=function(t){var e=t.reduce((function(t,e){return t+e}),0)/t.length,n=t.reduce((function(t,n){return t+Math.pow(n-e,2)}),0)/t.length;return[e,n]},e.prev=3,e.next=6,a(t.bond_cd,t.end_date,t.duration_days);case 6:return i=e.sent,o=i.transaction.map((function(t){return t.netPrice})),s=n(o),c=r(s,t.scaler_index),l=$.a.cloneDeep(i),u={bondcd:t.bond_cd,allTransactions:l.transaction},yt["a"].dispatch("lassoInteraction/updateAllData",u),t.drawMultiCharts(l,t.bond_cd,t.end_date,t.duration_days,c,t.colorMapping),e.abrupt("return",i);case 17:e.prev=17,e.t0=e["catch"](3),console.log("Error:",e.t0);case 20:case"end":return e.stop()}}),e,null,[[3,17]])})))()},performAddAction:function(t){var e=this,n=this.getLassoSelectedTrans,r=this.theSelection;switch(r&&r.length>0?this.theSelection_bond_cd=r[0]["bond_cd"]:this.theSelection_bond_cd="default_value",t){case"add":n.hasOwnProperty(this.theSelection_bond_cd)||(n[this.theSelection_bond_cd]=[]),r.forEach((function(t){n[e.theSelection_bond_cd].push(t)})),console.log("selectedData 948",r);var a=new Set(n[this.theSelection_bond_cd]);n[this.theSelection_bond_cd]=Array.from(a);break;case"delete":if(n.hasOwnProperty(this.theSelection_bond_cd)){var i=[];n[this.theSelection_bond_cd].forEach((function(t){r.includes(t)||i.push(t)})),n[this.theSelection_bond_cd]=i}break}return console.log("lassoSelectedTrans 967",n),n},triggerInfoView:function(){}})}),Rt=It,kt=(n("76d3"),Object(tt["a"])(Rt,Lt,At,!1,null,null,null)),xt=kt.exports,Ct={name:"MesoCard",components:{BCard:l["a"],BButton:S["a"],BCardHeader:u["a"],BCardBody:d["a"],BIconX:T["k"],BIconArrowRepeat:T["b"],BIcon:v["a"],BIconPlus:T["i"],BIconFileMinus:T["g"],MicroView:Et,MicroViewTime:xt,VueSlider:m.a},props:["bond","bond_cd","bond_name","end_date","duration_days"],data:function(){return{tagsView:!1,showView:"timeView",x_selected:!1,camera_selected:!1,scaler_mean:"100",scaler_index:["20","-20"],scaler_index_list:this.generateScalerIndexList(-100,100),scaler_index_low:["30"],scaler_index_low_list:["0.5","1","3","5","10","20","30","50","100","200","300","400"],scaler_index_high:["30"],scaler_index_high_list:["0.5","1","3","5","10","20","30","50","100","200","300","400"]}},computed:Object(i["a"])({},Object(o["c"])("lassoInteraction",["getLatestSelectionBondcd","getLatestSelection","getGlobalLassoData","getGlobalHistory","getChangedTransaction","getGlobalLassoDataHistory","getHistoryActions","getHistoryIndex"])),watch:{},mounted:function(){},methods:{toggleView:function(){this.showView="timeView"===this.showView?"freqView":"timeView"},generateScalerIndexList:function(t,e){for(var n=[],r=t;r<=e;r+=5)n.push(r.toString());return n},close_win:function(){this.$root.$emit("ChangeBondSelectionClose",this.bond_cd)},updateLassoAction:function(t){var e=this;console.log("action",t);var n={bondcd:this.getLatestSelectionBondcd,action:t,transactions:this.getLatestSelection};yt["a"].dispatch("lassoInteraction/updateSelection",n).then((function(){console.log(t," 完成"),e.highlightCircles()})).catch((function(e){console.error(t,"出错",e)}))},highlightCircles:function(){var t=this.$refs.microViewRef,e=d3.select(t.$el).select("svg"),n=yt["a"].getters["lassoInteraction/getGlobalLassoData"];if(void 0!=n){d3.rgb(174,219,155),d3.rgb(162,162,162);for(var r=d3.rgb(219,76,85),a=d3.rgb(255,210,186),i=e.selectAll("circle"),o=i._groups[0],s=function(){var t=o[c],e=t.__data__.transactionId,i=n.some((function(t){return t.transactionId===e}));i?d3.select(t).style("stroke",r).style("stroke-width",6):d3.select(t).style("stroke",a).style("stroke-width",1)},c=1;c<o.length-1;c++)s()}}}},Nt=Ct,Bt=(n("0b67"),Object(tt["a"])(Nt,_t,gt,!1,null,"83622104",null)),Mt=Bt.exports,Ot=Object(pt["a"])({name:"MesoView",components:{BCard:l["a"],BIcon:v["a"],BIconArrowUp:T["c"],BIconArrowDown:T["a"],BButton:S["a"],BCardHeader:u["a"],BCardBody:d["a"],BNavbar:w["a"],BDropdown:E["a"],BDropdownGroup:L["a"],BDropdownItem:A["a"],BIconGear:T["h"],BFormTags:D["a"],VueSlider:m.a,BInputGroup:I["a"],BInputGroupText:R["a"],BFormInput:k["a"],BButtonGroup:x["a"],BButtonToolbar:C["a"],MesoCard:Mt},props:["selected_bond_list","end_date","duration_days"],data:function(){return{}},computed:{},methods:{},created:function(){},mounted:function(){},watch:{}},"computed",{}),Pt=Ot,jt=(n("ec92"),Object(tt["a"])(Pt,ht,ft,!1,null,"262b9789",null)),Ut=jt.exports,Zt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-card",{staticStyle:{height:"70%"},attrs:{"no-body":""}},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm-6",staticStyle:{padding:"20 0 0 0"}},[n("div",{staticClass:"left-content"},[n("div",{staticStyle:{padding:"40 30"}},[n("b-tabs",{attrs:{"content-class":"mt-2",fill:""}},[n("b-tab",{attrs:{active:""},scopedSlots:t._u([{key:"title",fn:function(){return[n("span",{staticStyle:{"font-size":"15px"}},[t._v("Statistic")])]},proxy:!0}])},[n("b-card",{staticStyle:{height:"70%"},attrs:{"no-body":""}},[t.CurrentBondData?n("b-card-body",{staticStyle:{overflow:"scroll",height:"240px",padding:"2px"}},t._l(t.sortCurrentInstnType,(function(e){return n("Type-card",{directives:[{name:"show",rawName:"v-show",value:"buyer"===t.selectedbuyerseller,expression:"selectedbuyerseller === 'buyer'"}],key:e.transactionId,ref:"infoCardComponent",refInFor:!0,attrs:{transaction_name:e.transactionId,bond_data:e,end_date:t.end_date,duration_days:t.duration_days}})})),1):t._e()],1)],1),n("b-tab",{scopedSlots:t._u([{key:"title",fn:function(){return[n("span",{staticStyle:{"font-size":"15px"}},[t._v("Institution")])]},proxy:!0}])},[n("b-card",{staticStyle:{height:"70%"},attrs:{"no-body":""}},[t.CurrentBondData?n("b-card-body",{staticStyle:{overflow:"scroll",height:"240px",padding:"2px"}},t._l(t.sortCurrentInstn,(function(e){return n("Institution-card",{directives:[{name:"show",rawName:"v-show",value:"price"===t.selectedPriceVolume,expression:"selectedPriceVolume === 'price'"}],key:e.transactionId,ref:"infoCardComponent",refInFor:!0,attrs:{transaction_name:e.transactionId,bond_data:e,end_date:t.end_date,duration_days:t.duration_days}})})),1):t._e()],1)],1),n("b-tab",{scopedSlots:t._u([{key:"title",fn:function(){return[n("span",{staticStyle:{"font-size":"15px"}},[t._v("Trans")])]},proxy:!0}])},[n("b-card",{staticStyle:{height:"70%"},attrs:{"no-body":""}},[t.CurrentBondData?n("b-card-body",{staticStyle:{overflow:"scroll",height:"240px",padding:"2px"}},t._l(t.sortCurrentTransaction,(function(e){return n("info-card",{key:e.instn_cd,ref:"infoCardComponent",refInFor:!0,attrs:{transaction_name:e.transactionId,bond_data:e},on:{the_transaction_data:t.handleDataFromChild}})})),1):t._e()],1)],1)],1)],1)])]),n("div",{staticClass:"col-sm-6",staticStyle:{padding:"20 0 0 0"}},[n("b-card",{staticStyle:{height:"300px"},attrs:{"no-body":""}},[t.infomationList?n("b-table",{staticClass:"custom-table",attrs:{responsive:"",items:t.infomationList}}):t._e()],1)],1)])])],1)},Gt=[],Ft=n("29a1"),Vt=n("f902"),Ht=n("6190"),zt=n("01e3"),Yt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-card",{class:{highlighted:t.isCardHighlighted},attrs:{"no-body":""},on:{mousedown:t.highlightCard,mouseup:t.unhighlightCard,click:function(e){return t.sendDataToParent()}}},[n("b-card-header",{staticClass:"small-header",staticStyle:{"font-size":"12px",padding:"2px 2px",height:"21px"}},[n("div",{staticStyle:{transform:"scale(0.8)",display:"flex","margin-left":"-15px"}},[t._v(" "+t._s(t.transaction_name)+" ")])]),n("b-card-body",{staticStyle:{"font-size":"12px !important",padding:"2px",height:"44px",display:"flex","align-items":"left","justify-content":"left"},attrs:{id:"mg_"+t.bond_cd}},[n("div",{staticStyle:{transform:"scale(0.8)",display:"flex","flex-direction":"column","margin-right":"2px"}},[n("strong",{staticStyle:{"font-size":"12px","margin-top":"-8px"}},[t._v("Buyer:")]),t._v(" "+t._s(t.byr_instn_cn_full_nm)+" ")]),n("div",{staticStyle:{transform:"scale(0.8)",display:"flex","flex-direction":"column"}},[n("strong",{staticStyle:{"font-size":"12px","margin-top":"-8px"}},[t._v("Seller:")]),t._v(" "+t._s(t.slr_instn_cn_full_nm)+" ")])])],1)},Wt=[],qt=(n("cb29"),{name:"InfoCard",components:{BCard:l["a"],BCardBody:d["a"],BCardHeader:u["a"]},props:["transaction_name","bond_data"],data:function(){return{showInfoView:!1,infoViewData:null,bond_cd:null,bondData:null,byr_instn_cn_full_nm:null,slr_instn_cn_full_nm:null,byr_instn_cd:null,slr_instn_cd:null,isCardHighlighted:!1,isCardClicked:!1}},computed:Object(i["a"])(Object(i["a"])({},Object(o["d"])({})),Object(o["c"])("lassoInteraction",["getLatestSelectionBondcd","getLatestSelection","getGlobalLassoData","getGlobalHistory","getChangedTransaction","getGlobalLassoDataHistory","getHistoryActions","getHistoryIndex","getCurrentBondData"])),created:function(){},mounted:function(){this.byr_instn_cn_full_nm=this.bond_data.byr_instn_cn_full_nm,this.slr_instn_cn_full_nm=this.bond_data.slr_instn_cn_full_nm,this.byr_instn_cd=this.bond_data.byr_instn_cd,this.slr_instn_cd=this.bond_data.slr_instn_cd},methods:{sendDataToParent:function(){this.$emit("the_transaction_data",this.bond_data),console.log("the_transaction_data",this.bond_data),this.highlightCircles(this.bond_data.bond_cd)},highlightCard:function(){this.isCardHighlighted=!0},unhighlightCard:function(){this.isCardHighlighted=!1},highlightCircles:function(t){var e=M["select"]("#svg_micro_"+t+"_2023-07-05_1");console.log("lassoContainer:",e);var n=this.bond_data.transactionId,r=M["rgb"](174,219,155),a=M["rgb"](255,210,186),i=e.selectAll("circle:not(.origin)"),o=i._groups[0];console.log("AllNodesList:",o);for(var s=M["transition"]().duration(1e3).ease(M["easeBounce"]),c=1;c<o.length-1;c++){var l=o[c],u=l.__data__.transactionId,d=u===n;l.__originalColor||(l.__originalColor={stroke:M["select"](l).style("stroke"),strokeWidth:M["select"](l).style("stroke-width"),fill:M["select"](l).style("fill")});var h=l.__originalColor;d?M["select"](l).style("stroke","red").style("stroke-width",30).style("fill",r).transition(s).style("stroke",h.fill).style("stroke-width",h.strokeWidth).style("stroke",h.stroke):M["select"](l).style("stroke",a).style("stroke-width",1)}}}}),$t=qt,Kt=(n("d415"),Object(tt["a"])($t,Yt,Wt,!1,null,"d9bc518a",null)),Jt=Kt.exports,Qt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{"no-body":""}},[n("b-card",{attrs:{"no-body":""}},[n("b-card-header",{staticClass:"small-header",class:{highlighted:t.isCardHighlighted},staticStyle:{"font-size":"12px",padding:"2px 2px",height:"21px"},on:{mousedown:t.highlightCard,mouseup:t.unhighlightCard,click:function(e){return t.highlightCircles()}}},[n("div",{staticStyle:{display:"flex","margin-left":"4px"}},[t._v(" "+t._s(t.instn_cn_full_nm)+" "+t._s(t.instnType)+" ")])]),n("b-card-body",{staticStyle:{"font-size":"12px !important",padding:"2px",height:"100px",display:"flex","align-items":"left","justify-content":"left"},attrs:{id:"mg_"+t.bond_cd}},[n("div",[n("b-button-group",{staticStyle:{transform:"scale(0.8)","margin-top":"1px"},attrs:{vertical:"",size:"sm"}},[n("b-button",{staticStyle:{"background-color":"#fbb4ae"},on:{click:function(e){return t.transitionHistory(t.instn_cd,"byr_instn_cd",t.bond_cd)}}},[t._v("buy")]),n("b-button",{staticStyle:{"background-color":"#ccebc5"},on:{click:function(e){return t.transitionHistory(t.instn_cd,"slr_instn_cd",t.bond_cd)}}},[t._v("sell")])],1)],1),n("div",[n("svg",{staticStyle:{width:"100%",height:"90%"},attrs:{id:"svg_Institution_"+t.instn_cd+"_"+t.bond_cd}})])])],1)],1)},Xt=[],te=(n("b0c0"),{name:"InfoCard",components:{BCard:l["a"],BCardBody:d["a"],BCardHeader:u["a"],BButton:S["a"],BButtonGroup:x["a"]},props:["transaction_name","bond_data","end_date","duration_days"],data:function(){return{showInfoView:!1,infoViewData:null,bond_cd:null,bondData:null,byr_instn_cn_full_nm:null,slr_instn_cn_full_nm:null,isCardHighlighted:!1,byr_instn_cd:null,slr_instn_cd:null,instn_cd:null,instn_cn_full_nm:null,instnType:null}},computed:Object(i["a"])(Object(i["a"])({},Object(o["d"])({})),Object(o["c"])("lassoInteraction",["getLatestSelectionBondcd","getLatestSelection","getGlobalLassoData","getGlobalHistory","getChangedTransaction","getGlobalLassoDataHistory","getHistoryActions","getHistoryIndex","getCurrentBondData"])),created:function(){var t=this;b["get"]("http://localhost:5003/api/color_mapping").then((function(e){t.colorMapping=e.data})).catch((function(t){console.error("Error fetching color mapping:",t)}))},mounted:function(){this.bond_cd=this.bond_data.bond_cd,this.instn_cd=this.bond_data.instn_cd,this.instn_cn_full_nm=this.bond_data.instn_cn_full_nm,this.instnType=this.bond_data.instnType},methods:{getColor:function(t){var e=this.colorMapping[t];return e?"rgb(".concat(e[0],", ").concat(e[1],", ").concat(e[2],")"):"#fed9a6"},highlightCard:function(){this.isCardHighlighted=!0},unhighlightCard:function(){this.isCardHighlighted=!1},transitionHistory:function(t,e,n){var r=this;console.log("Buy button clicked"),console.log("bond_data:",this.bond_data),console.log("instn_cd, type, bond_cd",t,e,n),b["get"]("http://localhost:5003/api/transaction_history/".concat(t,"/").concat(e,"/").concat(n)).then((function(t){var a=e,i=t.data.json_transaction;console.log("transaction_data before:",i);var o=200,s=90,c=10,l=10,u=10,d=10;i.forEach((function(t){var e=t.timeStamp.slice(0,-6);t.timeStamp=e,t.timeStamp=new Date(t.timeStamp)}));var h=i.sort((function(t,e){return new Date(t.timeStamp)-new Date(e.timeStamp)})),f=M["scaleTime"]().domain([M["min"](h,(function(t){return t.timeStamp})),M["max"](h,(function(t){return t.timeStamp}))]).range([d,o-l]),p=M["scaleLinear"]().domain([M["min"](h,(function(t){return t.netPrice})),M["max"](h,(function(t){return t.netPrice}))]).range([s-u,c]),_=M["scaleLinear"]().range([1,5]).domain([M["min"](h,(function(t){return t.transactionVolume})),M["max"](h,(function(t){return t.transactionVolume}))]),g=M["line"]().curve(M["curveCatmullRom"]).x((function(t){return f(t.timeStamp)})).y((function(t){return p(t.netPrice)}));length=function(t){return M["create"]("svg:path").attr("d",t).node().getTotalLength()};var m=length(g(h));console.log("this.byr_instn_cd bond_cd:",r.instn_cd,n);var b=["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"],y=M["select"]("#svg_Institution_"+r.instn_cd+"_"+n).append("svg").attr("name","Container_Institution").attr("width",o).attr("height",s);y.append("g").attr("stroke","#000").attr("stroke-opacity",.1).selectAll("circle").data(h).enter().append("circle").attr("cx",(function(t){return f(t.timeStamp)})).attr("cy",(function(t){return p(t.netPrice)})).attr("r",(function(t){return _(t.transactionVolume)})).attr("fill",(function(t){return"byr_instn_cd"===a?b[1]:b[6]})).style("opacity",.6);var v=y.append("path").datum(h).attr("fill","none").attr("stroke","byr_instn_cd"===a?b[0]:b[2]).attr("stroke-width",2.5).attr("stroke-linejoin","round").attr("stroke-linecap","round").attr("stroke-dasharray","0,".concat(m)).attr("d",g);v.transition().duration(500).ease(M["easeLinear"]).attr("stroke-dasharray","".concat(m,",").concat(m))}))},getGraphdata:function(t,e){b["get"]("http://localhost:5003/api/graph_data/".concat(t,"/").concat(e)).then((function(t){var e=1200,n=380;console.log("response:",t.data);var r=t.data,a=r.links,i=r.nodes;console.log("nodes",i),console.log("graphdata.statistics_info",r);var o=r.statistics_info.max_total_volume_buyin,s=(r.statistics_info.max_total_volume_sell,M["scaleOrdinal"](M["schemeCategory10"]));function c(t,e){return M["arc"]().innerRadius(t).outerRadius(e)}var l=M["scaleLinear"]().domain([0,1]).range([0,2*Math.PI]),u=M["scaleLinear"]().domain([0,M["max"](a,(function(t){return t.volume}))]).range([10,100]),d=M["forceSimulation"](i).force("link",M["forceLink"](a).id((function(t){return t.id})).distance((function(t){return u(t.volume)})).strength(2)).force("charge",M["forceManyBody"]().strength(-900)).force("center",M["forceCenter"](e/3,n/2)).force("x",M["forceX"]().strength(.01)).force("y",M["forceY"]().strength(.01)).on("tick",_),h=M["select"]("#graphView").append("svg").attr("name","Container_graphView").attr("width",e).attr("height",n).attr("viewBox",[0,0,e,n]).attr("style","max-width: 100%; height: auto;"),f=h.append("g").attr("class","link").attr("stroke","#999").attr("stroke-opacity",.6).selectAll().data(a).join("line").attr("stroke-width",(function(t){return Math.sqrt(t.volume)})),p=h.append("g").attr("class","glyph").attr("stroke","#fff").attr("stroke-width",1.5).selectAll("g").data(i).enter().append("g");function _(){f.attr("x1",(function(t){return t.source.x})).attr("y1",(function(t){return t.source.y})).attr("x2",(function(t){return t.target.x})).attr("y2",(function(t){return t.target.y})),p.attr("transform",(function(t){return"translate(".concat(t.x,",").concat(t.y,")")}))}function g(){M["event"].active||d.alphaTarget(.3).restart(),M["event"].subject.fx=M["event"].subject.x,M["event"].subject.fy=M["event"].subject.y}function m(){M["event"].subject.fx=M["event"].x,M["event"].subject.fy=M["event"].y}function b(){M["event"].active||d.alphaTarget(0),M["event"].subject.fx=null,M["event"].subject.fy=null}p.append("circle").attr("r",15).attr("fill",(function(t){return s(t.instn_tp)})),p.append("text").text((function(t){return t.name})).attr("stroke","#fbb4ae").attr("stroke-width",.5).attr("transform","translate(30, 10)"),p.append("path").attr("class","graph_arc").attr("d",(function(t){var e=t.node_global_info.buyin.total_volume;return c(20,25)({startAngle:0,endAngle:l(e/o)})})).attr("fill",(function(t){return s(t.instn_tp)})),p.call(M["drag"]().on("start",g).on("drag",m).on("end",b))}))},getAllGraphdata:function(t){b["get"]("http://localhost:5003/api/get_global_graph_data/".concat(t)).then((function(t){var e=1200,n=380,r=t.data;console.log("response:",t.data);var a=r.links,i=r.nodes,o=M["scaleOrdinal"](M["schemeCategory10"]),s=M["forceSimulation"](i).force("link",M["forceLink"](a).id((function(t){return t.id}))).force("charge",M["forceManyBody"]().strength(-400)).force("center",M["forceCenter"](e/3,n/2)).force("x",M["forceX"]()).force("y",M["forceY"]()).on("tick",d),c=M["select"]("#globalGraphView").attr("name","Container_all_graphView").attr("width",e).attr("height",n).attr("viewBox",[0,0,e,n]).attr("style","max-width: 100%; height: auto;"),l=c.append("g").attr("class","link").attr("stroke","#999").attr("stroke-opacity",.6).selectAll().data(a).join("line").attr("stroke-width",(function(t){return Math.sqrt(t.volume)})),u=c.append("g").attr("fill","currentColor").attr("stroke-linecap","round").attr("stroke-linejoin","round").selectAll("g").data(i).join("g");function d(){l.attr("x1",(function(t){return t.source.x})).attr("y1",(function(t){return t.source.y})).attr("x2",(function(t){return t.target.x})).attr("y2",(function(t){return t.target.y})),u.attr("transform",(function(t){return"translate(".concat(t.x,",").concat(t.y,")")}))}function h(){M["event"].active||s.alphaTarget(.3).restart(),M["event"].subject.fx=M["event"].subject.x,M["event"].subject.fy=M["event"].subject.y}function f(){M["event"].subject.fx=M["event"].x,M["event"].subject.fy=M["event"].y}function p(){M["event"].active||s.alphaTarget(0),M["event"].subject.fx=null,M["event"].subject.fy=null}u.append("circle").attr("stroke","white").attr("stroke-width",1.5).attr("r",15).attr("fill",(function(t){return o(t.instn_tp)})),u.append("text").attr("x",8).attr("y","0.31em").text((function(t){return t.name})).clone(!0).lower().attr("fill","none").attr("stroke","white").attr("stroke-width",3),u.call(M["drag"]().on("start",h).on("drag",f).on("end",p))}))},drawHistroy:function(t,e,n){},highlightCircles:function(){var t=yt["a"].getters["lassoInteraction/getLatestSelectionBondcd"],e=M["select"]("#svg_micro_"+t+"_2023-07-05_1"),n=M["rgb"](174,219,155),r=M["rgb"](255,210,186),a=e.selectAll("circle"),i=a._groups[0];console.log("AllNodesList:",i);for(var o=M["transition"]().duration(1e3).ease(M["easeBounce"]),s=1;s<i.length-1;s++){var c=i[s],l=c.__data__.byr_instn_cd,u=l===this.instn_cd;c.__originalColor||(c.__originalColor={stroke:M["select"](c).style("stroke"),strokeWidth:M["select"](c).style("stroke-width"),fill:M["select"](c).style("fill")});var d=c.__originalColor;u?M["select"](c).style("stroke","red").style("stroke-width",30).style("fill",n).transition(o).style("stroke",d.fill).style("stroke-width",d.strokeWidth).style("stroke",d.stroke):M["select"](c).style("stroke",r).style("stroke-width",1)}}}}),ee=te,ne=(n("cb88"),Object(tt["a"])(ee,Qt,Xt,!1,null,"1adba718",null)),re=ne.exports,ae=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{"no-body":""}},[n("b-card",{attrs:{"no-body":""}},[n("b-card-header",{staticClass:"small-header",class:{highlighted:t.isCardHighlighted},staticStyle:{"font-size":"12px",padding:"2px 2px",height:"21px"},on:{mousedown:t.highlightCard,mouseup:t.unhighlightCard,click:function(e){return t.sendDataToParent()}}},[n("div",{staticStyle:{display:"flex","margin-left":"4px"}},[t._v(" "+t._s(t.instn_type)+" ")])]),n("b-card-body",{staticStyle:{"font-size":"12px !important",padding:"2px",height:"100px",display:"flex","align-items":"left","justify-content":"left"},attrs:{id:"mg_"+t.bond_cd}},[n("div",[n("b-button-group",{staticStyle:{transform:"scale(0.8)","margin-top":"0px"},attrs:{vertical:"",size:"sm"}},[n("b-button",{staticStyle:{},on:{click:function(e){return t.toggleDisplay(t.bond_cd)}}},[t._v(" "+t._s(t.buttonLabel)+" ")])],1)],1),n("div",[n("b-button-group",{staticStyle:{transform:"scale(0.8)","margin-top":"0px"},attrs:{vertical:"",size:"sm"}},[n("b-button",{staticStyle:{},on:{click:function(e){return t.toggleDisplayAllOnly(t.bond_cd,t.instn_type)}}},[t._v(" "+t._s(t.buttonAllOnly)+" ")])],1)],1),n("div",{staticStyle:{display:"flex","align-items":"flex-start","margin-top":"3px"}},[n("div",{staticStyle:{position:"relative"},attrs:{div:""}},[n("div",{staticStyle:{"font-size":"12px"}},[t._v("Buy volume: "+t._s(t.bond_data.buyin)+" ")]),n("div",{staticStyle:{"font-size":"12px"}},[t._v("sell volume: "+t._s(t.bond_data.sell)+" ")]),n("div",{staticStyle:{"font-size":"12px"}},[t._v("buy num: "+t._s(t.bond_data.buyinDealNum)+" ")]),n("div",{staticStyle:{"font-size":"12px"}},[t._v("sell num: "+t._s(t.bond_data.sellDealNum)+" ")]),n("div",[n("svg",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"svg_Institution_type_"+t.instn_cd+"_"+t.bond_cd}},[n("rect",{staticStyle:{position:"absolute",top:"0",right:"220"},attrs:{fill:t.getColor(t.bond_data.instn_type),width:"100%",height:"10%"}})])])])])])],1)],1)},ie=[],oe={name:"InfoCard",components:{BCard:l["a"],BCardBody:d["a"],BCardHeader:u["a"],BButton:S["a"],BButtonGroup:x["a"]},props:["transaction_name","bond_data","end_date","duration_days"],data:function(){return{isHidden:!1,isHiddenAllOnly:!1,showInfoView:!1,infoViewData:null,bond_cd:null,bondData:null,byr_instn_cn_full_nm:null,slr_instn_cn_full_nm:null,isCardHighlighted:!1,byr_instn_cd:null,slr_instn_cd:null,instn_cd:null,instn_cn_full_nm:null,the_type_instn_list:null,instn_type:null,colorMapping:!1}},computed:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(o["d"])({})),Object(o["c"])("lassoInteraction",["getLatestSelectionBondcd","getLatestSelection","getGlobalLassoData","getGlobalHistory","getChangedTransaction","getGlobalLassoDataHistory","getHistoryActions","getHistoryIndex","getCurrentBondData"])),{},{buttonStyle:function(){return this.isHidden?"background-color: #fed9a6":"background-color: #decbe4"},buttonLabel:function(){return this.isHidden?"Show":"Hide"},buttonAllOnly:function(){return this.isHiddenAllOnly?"All":"Only"}}),created:function(){var t=this;b["get"]("http://localhost:5003/api/color_mapping").then((function(e){t.colorMapping=e.data})).catch((function(t){console.error("Error fetching color mapping:",t)}))},mounted:function(){var t=this;this.bond_cd=yt["a"].getters["lassoInteraction/getLatestSelectionBondcd"],this.instn_cd=this.bond_data.instn_cd,this.instn_cn_full_nm=this.bond_data.instn_cn_full_nm,this.instn_type=this.bond_data.instn_type,this.$root.$on("return-all",(function(e){console.log("return-all",t.instn_type,e),console.log("this.instn_type != instn_type",t.instn_type!=e&&!0===t.isHiddenAllOnly),t.instn_type!=e&!0===t.isHiddenAllOnly&&t.nodeDisplayAllOnly(t.bond_cd,"only")}))},methods:{getColor:function(t){var e=this.colorMapping[t];return e?"rgb(".concat(e[0],", ").concat(e[1],", ").concat(e[2],")"):"#fed9a6"},sendDataToParent:function(){console.log("transaction_name",this.bond_data);var t=yt["a"].getters["lassoInteraction/getLatestSelectionBondcd"];this.highlightCircles(t)},highlightCard:function(){this.isCardHighlighted=!0},unhighlightCard:function(){this.isCardHighlighted=!1},nodeDisplayAllOnly:function(t,e){var n=M["select"]("#svg_micro_"+t+"_2023-07-05_1"),r=this.bond_data["instn_type"];console.log("instn_tp AllNodesList:",r);var a=n.selectAll("circle:not(.origin)"),i=a._groups[0];console.log("AllNodesList:",a);for(var o=1;o<i.length-1;o++){var s=i[o],c=s.__data__.byr_instn_tp,l=c!=r;"only"===e&&l&&M["select"](s).style("display","block"),"all"===e&&l&&M["select"](s).style("display","none")}this.isHiddenAllOnly=!this.isHiddenAllOnly},nodeDisplay:function(t,e){var n=M["select"]("#svg_micro_"+t+"_2023-07-05_1"),r=this.bond_data["instn_type"];console.log("instn_tp AllNodesList:",r);var a=n.selectAll("circle:not(.origin)"),i=a._groups[0];console.log("AllNodesList:",a);for(var o=1;o<i.length-1;o++){var s=i[o],c=s.__data__.byr_instn_tp,l=c===r;"show"===e&&l&&M["select"](s).style("display","block"),"hide"===e&&l&&M["select"](s).style("display","none")}this.isHidden=!this.isHidden},toggleDisplay:function(t){console.log("bond_cd 186",t),this.nodeDisplay(t,this.isHidden?"show":"hide")},toggleDisplayAllOnly:function(t,e){this.$root.$emit("return-all",e),console.log("bond_cd 236",t,e),console.log("bond_cd 186",t),this.nodeDisplayAllOnly(t,this.isHiddenAllOnly?"only":"all")},highlightCircles:function(t){var e=M["select"]("#svg_micro_"+t+"_2023-07-05_1");console.log("bond_data 156",this.bond_data);var n=this.bond_data["instn_type"],r=M["rgb"](255,210,186),a=e.selectAll("circle:not(.origin)"),i=a._groups[0];console.log("AllNodesList:",i),console.log("AllNodesList.length:",i.length-1);for(var o=M["transition"]().duration(1e3).ease(M["easeBounce"]),s=0;s<i.length-1;s++){var c=i[s],l=c.__data__.byr_instn_tp,u=l===n;c.__originalColor||(c.__originalColor={stroke:M["select"](c).style("stroke"),strokeWidth:M["select"](c).style("stroke-width"),fill:M["select"](c).style("fill")});var d=c.__originalColor;u?M["select"](c).style("stroke","red").style("stroke-width",30).transition(o).style("stroke",d.fill).style("stroke-width",d.strokeWidth).style("stroke",d.stroke):M["select"](c).style("stroke",r).style("stroke-width",1)}},drawHistroy:function(t,e,n){}}},se=oe,ce=(n("cdc3"),Object(tt["a"])(se,ae,ie,!1,null,"60bad616",null)),le=ce.exports,ue=Object(pt["a"])(Object(pt["a"])(Object(pt["a"])(Object(pt["a"])(Object(pt["a"])(Object(pt["a"])(Object(pt["a"])({name:"MesoView",components:{BCard:l["a"],BIcon:v["a"],BIconArrowUp:T["c"],BIconArrowDown:T["a"],BButton:S["a"],BCardHeader:u["a"],BCardBody:d["a"],BNavbar:w["a"],BDropdown:E["a"],BDropdownGroup:L["a"],BDropdownItem:A["a"],BIconGear:T["h"],BFormTags:D["a"],VueSlider:m.a,BInputGroup:I["a"],BInputGroupText:R["a"],BFormInput:k["a"],BButtonGroup:x["a"],BButtonToolbar:C["a"],InfoCard:Jt,InstitutionCard:re,TypeCard:le,BTable:Ft["a"],BTabs:Vt["a"],BTab:Ht["a"],BSpinner:zt["a"]},props:{sidebarStore:Object,historyStore:Object,ebm:Object,width:String,sidebarInfo:Object,sampleDataInitialized:Boolean}},"props",["end_date","duration_days"]),"data",(function(){return{bond_list:null,bondData:!1,CurrentBondData:!1,infomationList:!1,selectedbuyerseller:"buyer",selectedPriceVolume:"price",items:[{"项目":"buyer",first_name:"江苏昆山农村商业银行股份有限公司"},{"项目":"seller",first_name:"富国基金管理有限公司"},{"项目":"netPrice",first_name:"30"},{"项目":"Volume",first_name:"20"}],instn_dict:{}}})),"created",(function(){})),"computed",Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(o["d"])({})),Object(o["c"])("lassoInteraction",["getLatestSelectionBondcd","getLatestSelection","getGlobalLassoData","getGlobalHistory","getChangedTransaction","getGlobalLassoDataHistory","getHistoryActions","getHistoryIndex","getCurrentBondData"])),{},{sortCurrentTransaction:function(){var t=_.cloneDeep(this.CurrentBondData);return t.sort((function(t,e){return e.transactionVolume-t.transactionVolume})),t},sortCurrentInstn:function(){var t=this,e=_.cloneDeep(this.CurrentBondData);e.sort((function(t,e){return e.transactionVolume-t.transactionVolume}));var n=[];e.forEach((function(e){var r=n.find((function(t){return t.instn_cd===e.byr_instn_cd}));if(r)r.buyin+=e.transactionVolume;else{var a,i=null===(a=t.instn_dict[e.byr_instn_cd])||void 0===a?void 0:a.instn_tp;n.push({instn_cd:e.byr_instn_cd,instn_cn_full_nm:e.byr_instn_cn_full_nm,buyin:e.netPrice,bond_cd:e.bond_cd,sell:null,instnType:i})}var o=n.find((function(t){return t.instn_cd===e.slr_instn_cd}));if(o)o.sell+=e.transactionVolume;else{var s,c=null===(s=t.instn_dict[e.byr_instn_cd])||void 0===s?void 0:s.instn_tp;n.push({instn_cd:e.slr_instn_cd,instn_cn_full_nm:e.slr_instn_cn_full_nm,buyin:null,bond_cd:e.bond_cd,sell:e.netPrice,instnType:c})}}));var r=Object.values(n).sort((function(t,e){return e.buyin-t.buyin}));return r},sortCurrentInstnType:function(){var t=this,e=_.cloneDeep(this.CurrentBondData);e.sort((function(t,e){return e.transactionVolume-t.transactionVolume})),console.log("this.instn_dict:209",this.instn_dict);var n=[];e.forEach((function(e){var r,a,i=null===(r=t.instn_dict[e.byr_instn_cd])||void 0===r?void 0:r.instn_tp,o=null===(a=t.instn_dict[e.slr_instn_cd])||void 0===a?void 0:a.instn_tp,s=n.find((function(t){return t.instn_cd===e.byr_instn_cd}));s?s.buyin+=e.transactionVolume:n.push({instn_cd:e.byr_instn_cd,instn_cn_full_nm:e.byr_instn_cn_full_nm,buyin:e.transactionVolume,bond_cd:e.bond_cd,sell:null,instn_type:i});var c=n.find((function(t){return t.instn_cd===e.slr_instn_cd}));c?c.sell+=e.transactionVolume:n.push({instn_cd:e.slr_instn_cd,instn_cn_full_nm:e.slr_instn_cn_full_nm,buyin:null,bond_cd:e.bond_cd,sell:e.transactionVolume,instn_type:o})}));var r={};n.forEach((function(t){var e=t.instn_type;r.hasOwnProperty(e)?(r[e].buyin+=t.buyin||0,r[e].sell+=t.sell||0,r[e].buyinDealNum+=1,r[e].sellDealNum+=1,r[e].InstnList.push(t)):r[e]={buyin:t.buyin||0,sell:t.sell||0,instn_type:t.instn_type,InstnList:[],buyinDealNum:0,sellDealNum:0}}));var a=Object.values(r).sort((function(t,e){return e.buyin-t.buyin}));return a}})),"mounted",(function(){var t=this;b["get"]("http://localhost:5003/api/institution_types").then((function(e){var n=JSON.parse(e.data.instn_dict);t.instn_dict=n}))})),"watch",{getLatestSelectionBondcd:{handler:function(t,e){this.CurrentBondcd=yt["a"].getters["lassoInteraction/getLatestSelectionBondcd"]},deep:!0},getCurrentBondData:{handler:function(t,e){this.CurrentBondData=t["globalLassoData"]},deep:!0}}),"methods",Object(i["a"])(Object(i["a"])({},Object(o["b"])(["updateLassoSelectedTrans"])),{},{handleDataFromChild:function(t){function e(t){var e=[{Item:"ID",Info:t.transactionId},{Item:"netPrice",Info:t.netPrice},{Item:"Volume",Info:t.transactionVolume},{Item:"buyer",Info:t.byr_instn_cn_full_nm},{Item:"seller",Info:t.slr_instn_cn_full_nm},{Item:"time",Info:t.timeStamp}];return e}console.log("data 209:",t),this.infomationList=e(t)},fetchInstitutionTypes:function(){return Object(U["a"])(Object(j["a"])().mark((function t(){return Object(j["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},selectChart:function(t){console.log("chartType:",t)},selectbuyerseller:function(t){console.log("chartType:",t)}})),de=ue,he=(n("21f5"),Object(tt["a"])(de,Zt,Gt,!1,null,null,null)),fe=he.exports,pe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-card",{attrs:{"no-body":""}},[n("b-card-header",{staticClass:"small-header",staticStyle:{"font-size":"12px",height:"25px"}},[n("b-button",{staticStyle:{"font-size":"12px",float:"right","margin-right":"10px",padding:"0px 5px",height:"15px",display:"flex","align-items":"center"},attrs:{variant:"outline-secondary"},on:{click:function(e){return t.clearGraphView()}}},[n("i",{staticClass:"el-icon-refresh"})])],1),n("b-card-body",{staticClass:"graph_body",staticStyle:{height:"380px",padding:"5px 0px 5px 0px"}},[n("svg",{staticStyle:{height:"380px",width:"1180px"},attrs:{id:"graphView"}})])],1)],1)},_e=[],ge={name:"MesoView",components:{BCard:l["a"],BIcon:v["a"],BIconArrowUp:T["c"],BIconArrowDown:T["a"],BButton:S["a"],BCardHeader:u["a"],BCardBody:d["a"],BNavbar:w["a"],BDropdown:E["a"],BDropdownGroup:L["a"],BDropdownItem:A["a"],BIconGear:T["h"],BFormTags:D["a"],VueSlider:m.a,BInputGroup:I["a"],BInputGroupText:R["a"],BFormInput:k["a"],BButtonGroup:x["a"],BButtonToolbar:C["a"]},props:[],data:function(){return{bond_list:null,scatterData:!1,lassoData:[["Arsenal",30,30],["Chelsea",50,100],["Liverpool",100,70],["Manchester City",74,140],["Manchester United",150,30],["Tottenham",203,100]]}},methods:{generateScatterData:function(){return this.lassoData},createLassoChart:function(t){var e=d3.select("#TransactionScatter").attr("width",400).attr("height",400),n=e.selectAll("circle").data(t).enter().append("circle").attr("r",4).attr("cx",(function(t){return t[1]})).attr("cy",(function(t){return t[2]})).attr("fill","steelblue"),r=function(){console.log("start"),o.items().attr("r",7).classed("not_possible",!0).classed("selected",!1)},a=function(){o.possibleItems().classed("not_possible",!1).classed("possible",!0),o.notPossibleItems().classed("not_possible",!0).classed("possible",!1)},i=function(){console.log("end"),o.items().classed("not_possible",!1).classed("possible",!1),o.selectedItems().classed("selected",!0).attr("r",7),o.notSelectedItems().attr("r",3.5)},o=d3.lasso().closePathDistance(305).closePathSelect(!0).targetArea(e).items(n).on("start",r).on("draw",a).on("end",i);return e.call(o),e.node()},clearGraphView:function(){var t=document.getElementById("graphView");while(t.firstChild)t.removeChild(t.firstChild)}},created:function(){},mounted:function(){},watch:{},computed:{}},me=ge,be=Object(tt["a"])(me,pe,_e,!1,null,null,null),ye=be.exports,ve=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-card",{attrs:{"no-body":""}},[n("b-card-header",{staticClass:"small-header",staticStyle:{"font-size":"12px",height:"25px"}},[n("b-button",{staticStyle:{"font-size":"12px",float:"right","margin-right":"10px",padding:"0px 5px",height:"15px",display:"flex","align-items":"center"},attrs:{variant:"outline-secondary"},on:{click:function(e){return t.clearGraphView()}}},[n("b-icon-arrow-repeat")],1),n("b-button",{staticStyle:{"font-size":"12px",float:"right","margin-right":"10px",padding:"0px 5px",height:"15px",display:"flex","align-items":"center"},attrs:{variant:"outline-secondary"},on:{click:function(e){return t.saveAsCSV()}}},[n("b-icon-download")],1),n("b-button",{staticStyle:{"font-size":"12px",float:"right","margin-right":"10px",padding:"0px 5px",height:"15px",display:"flex","align-items":"center"},attrs:{variant:"outline-secondary"},on:{click:function(e){return t.plotGraph()}}},[n("b-icon-plus")],1)],1),n("b-card-body",{staticClass:"graph_body",staticStyle:{height:"480px",padding:"5px 0px 5px 0px"}},[n("svg",{staticStyle:{height:"480px",width:"760px"},attrs:{id:"globalGraphView"}})])],1)],1)},Te=[],Se=(n("e9c4"),n("2b3d"),n("9861"),n("7ea2")),we=Object(pt["a"])({name:"MesoView",components:Object(pt["a"])(Object(pt["a"])(Object(pt["a"])(Object(pt["a"])(Object(pt["a"])(Object(pt["a"])(Object(pt["a"])(Object(pt["a"])(Object(pt["a"])({BCard:l["a"],BIcon:v["a"],BIconArrowUp:T["c"],BIconArrowDown:T["a"],BButton:S["a"],BCardHeader:u["a"],BCardBody:d["a"],BNavbar:w["a"],BDropdown:E["a"],BDropdownGroup:L["a"],BDropdownItem:A["a"],BIconGear:T["h"],BFormTags:D["a"],BIconDownload:T["f"],BIconArrowRepeat:T["b"]},"BIcon",v["a"]),"BIconPlus",T["i"]),"BIconFileMinus",T["g"]),"VueSlider",m.a),"BInputGroup",I["a"]),"BInputGroupText",R["a"]),"BFormInput",k["a"]),"BButtonGroup",x["a"]),"BButtonToolbar",C["a"]),props:[],data:function(){return{bond_list:null,bondData:null,scatterData:!1,globalLassoData:!1,lassoData:[["Arsenal",30,30],["Chelsea",50,100],["Liverpool",100,70],["Manchester City",74,140],["Manchester United",150,30],["Tottenham",203,100]]}},computed:Object(i["a"])(Object(i["a"])({},Object(o["d"])({})),Object(o["c"])("lassoInteraction",["getLatestSelectionBondcd","getLatestSelection","getGlobalLassoData","getGlobalHistory","getChangedTransaction","getGlobalLassoDataHistory","getHistoryActions","getHistoryIndex","getCurrentBondData"])),methods:{saveAsCSV:function(){if(this.globalLassoData&&this.globalLassoData.length)try{var t=Object(Se["parse"])(this.globalLassoData),e=new Blob([t],{type:"text/csv;charset=utf-8;"}),n=document.createElement("a"),r=URL.createObjectURL(e);n.href=r,n.setAttribute("download","global_lasso_data.csv"),document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r),console.log("CSV file saved successfully")}catch(a){console.error("Error saving CSV file",a)}else console.log("No data to save")},generateScatterData:function(){return this.lassoData},createLassoChart:function(t){var e=d3.select("#TransactionScatter").attr("width",400).attr("height",400),n=e.selectAll("circle").data(t).enter().append("circle").attr("r",4).attr("cx",(function(t){return t[1]})).attr("cy",(function(t){return t[2]})).attr("fill","steelblue"),r=function(){console.log("start"),o.items().attr("r",7).classed("not_possible",!0).classed("selected",!1)},a=function(){o.possibleItems().classed("not_possible",!1).classed("possible",!0),o.notPossibleItems().classed("not_possible",!0).classed("possible",!1)},i=function(){console.log("end"),o.items().classed("not_possible",!1).classed("possible",!1),o.selectedItems().classed("selected",!0).attr("r",7),o.notSelectedItems().attr("r",3.5)},o=d3.lasso().closePathDistance(305).closePathSelect(!0).targetArea(e).items(n).on("start",r).on("draw",a).on("end",i);return e.call(o),e.node()},clearGraphView:function(){var t=document.getElementById("globalGraphView");while(t.firstChild)t.removeChild(t.firstChild)},sheetdata2Graphdata:function(t){var e=this,n={graph:t};fetch("http://localhost:5003/api/instnRelationGraph",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(t){if(!t.ok)throw new Error("Network response was not ok "+t.statusText);return t.json()})).then((function(t){e.render(t.received_data)})).catch((function(t){console.error("There was a problem with the fetch operation:",t)}))},render:function(t){var e=760,n=480;d3.select("#globalGraphView").selectAll("*").remove();var r=d3.select("#globalGraphView").attr("width",e).attr("height",n),a=(r.append("g"),d3.forceSimulation(t.nodes).force("link",d3.forceLink(t.links).id((function(t){return t.id}))).force("charge",d3.forceManyBody().strength(-40)).force("center",d3.forceCenter(e/2,n/2)).force("x",d3.forceX().strength(.045)).force("y",d3.forceY().strength(.045))),i=r.append("g").attr("class","links").selectAll("line").data(t.links).enter().append("line").attr("class","link").attr("stroke-width",(function(t){return 1})).attr("stroke","black"),o=r.append("g").attr("class","nodes").selectAll("g").data(t.nodes).enter().append("g").attr("class","node").call(d3.drag().on("start",c).on("drag",l).on("end",u));o.append("circle").attr("r",(function(t){return 2*Math.sqrt(Math.abs(t.position))})).style("fill",(function(t){return t.position>=0?"hsl(0, 40%, 70%)":"hsl(120, 40%, 70%)"})),o.append("path").attr("d",(function(t){var e=(t.transactions_info.buy_num+t.transactions_info.sell_num)/2,n=2*Math.sqrt(Math.abs(t.position)),r=0,a=2*Math.PI,i=0!==t.profit?7:0,o=d3.arc().innerRadius(n+i).outerRadius(n+i+e).startAngle(r).endAngle(a);return o()})).attr("fill","hsl(210, 90%, 80%)");var s=d3.scaleLinear().range([0,Math.PI]).domain([0,d3.max(t.nodes,(function(t){return t.profit}))+1e-4]);function c(){d3.event.active||a.alphaTarget(.3).restart(),d3.event.subject.fx=d3.event.subject.x,d3.event.subject.fy=d3.event.subject.y}function l(){d3.event.subject.fx=d3.event.x,d3.event.subject.fy=d3.event.y}function u(){d3.event.active||a.alphaTarget(0),d3.event.subject.fx=null,d3.event.subject.fy=null}o.append("path").attr("d",(function(t){t.transactions_info.buy_num,t.transactions_info.sell_num;var e=t.profit,n=2*Math.sqrt(Math.abs(t.position)),r=0,a=s(e),i=d3.arc().innerRadius(n+e).outerRadius(n+e+7).startAngle(r).endAngle(a);return i()})).attr("fill",(function(t){return t.profit>=0?"hsl(0, 60%, 60%)":"hsl(120, 60%, 60%)"})).attr("stroke","white"),o.append("title").text((function(t){return"ID: ".concat(t.id,"\nProfit: ").concat(t.profit,"\nPosition: ").concat(t.position,"\nTransactions: ").concat(JSON.stringify(t.transactions_info))})),a.on("tick",(function(){i.attr("x1",(function(t){return t.source.x})).attr("y1",(function(t){return t.source.y})).attr("x2",(function(t){return t.target.x})).attr("y2",(function(t){return t.target.y})),o.attr("transform",(function(t){return"translate(".concat(t.x,",").concat(t.y,")")}))}))},handleLassoDataChange:function(t){console.log("Lasso data has changed:",t),this.render(t)},plotGraph:function(){this.sheetdata2Graphdata(this.globalLassoData)}},created:function(){},mounted:function(){this.globalLassoData=yt["a"].getters["lassoInteraction/getGlobalLassoData"]},watch:{getGlobalLassoData:{handler:function(t,e){this.globalLassoData=t}}}},"computed",{getGlobalLassoData:function(){return yt["a"].getters["lassoInteraction/getGlobalLassoData"]}}),Ee=we,Le=Object(tt["a"])(Ee,ve,Te,!1,null,null,null),Ae=Le.exports,De={name:"",components:{MacroView:dt,MesoView:Ut,RecordView:fe,BSkeletonWrapper:s["a"],BSkeleton:c["a"],BCard:l["a"],BCardHeader:u["a"],BCardBody:d["a"],TradeInfoView:ye,GraphInfoView:Ae},data:function(){return{isLoading:!0,all_bond_list:!1,selected_bond_id_list:[],selected_bond_list:[],end_date:"2023-07-05",duration_days:1,transactionSummaryData:!1,instnTypes:!1}},computed:Object(i["a"])({},Object(o["c"])(["name"])),watch:{selected_bond_id_list:function(t){var e=this;t&&(this.selected_bond_list=this.all_bond_list.filter((function(t){return e.selected_bond_id_list.includes(t.Bond_cd)})))}},created:function(){},mounted:function(){this.$root.$on("ChangeBondSelection",this.handleBondSelection),this.$root.$on("ChangeBondSelectionClose",this.handleBondSelection)},beforeDestroy:function(){this.$root.$off("ChangeBondSelection",this.handleBondSelection),this.$root.$off("ChangeBondSelectionClose",this.handleBondSelection)},methods:{fetchData:function(){var t=this;b["get"]("http://localhost:5003/api/bondSummaryData").then((function(e){t.all_bond_list=e.data.bondSummaryData,t.isLoading=!1})).catch((function(t){console.error("Error fetching bond summary data:",t)}))},handleBondSelection:function(t){this.selected_bond_id_list.includes(t)?this.selected_bond_id_list=this.selected_bond_id_list.filter((function(e){return e!==t})):this.selected_bond_id_list.push(t)},generateTransactionSummary:function(){for(var t=[],e=1;e<=50;e++){var n={Bond_cd:e,Bond_name:"Name_"+H.a.Random.string("upper",3,4),Transaction_num:H.a.Random.integer(0,2e3),Transaction_volume:H.a.Random.float(0,3e3,2,2)};t.push(n)}return t},randomDateInRange:function(){var t=new Date,e=new Date,n=H.a.Random.integer(t.getTime(),e.getTime());return new Date(n)},handleDataLoaded:function(t){this.all_bond_list=t,console.log("Received data from child component:",t)}}},Ie=De,Re=(n("67a8"),Object(tt["a"])(Ie,r,a,!1,null,"0aba4e9b",null));e["default"]=Re.exports},"00e3":function(t,e,n){const r=n("c832"),{setProp:a,unsetProp:i}=n("9d6f");function o(t,e){return Object.keys(t).reduce((n,r)=>{const a=e?`${e}.${r}`:r,i=t[r];return"object"===typeof i&&null!==i&&!Array.isArray(i)&&"[object Function]"!==Object.prototype.toString.call(i.toJSON)&&Object.keys(i).length?n=n.concat(o(i,a)):Array.isArray(i)&&(n.push(a),n=n.concat(i.flatMap(t=>o(t,a)).filter((t,e,n)=>n.indexOf(t)!==e))),n},[])}function s({paths:t,blankOut:e=!1}={}){function n(t,n){return t.flatMap(t=>{const o=r(t,n);if(!Array.isArray(o))return t;if(!o.length)return i(t,n);const s=e?{}:t,[c,...l]=o;return[a(t,n,c),...l.map(t=>a(s,n,t))]})}return t=Array.isArray(t)?t:t?[t]:void 0,e=>(t||o(e)).reduce(n,[e])}t.exports=s},"0960":function(t,e,n){t.exports=n("b19a")},"0a34":function(t,e,n){},"0b67":function(t,e,n){"use strict";n("7694")},"0d3b":function(t,e,n){var r=n("d039"),a=n("b622"),i=n("c430"),o=a("iterator");t.exports=!r((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,n="";return t.pathname="c%20d",e.forEach((function(t,r){e["delete"]("b"),n+=r+t})),i&&!t.toJSON||!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[o]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},1:function(t,e){},1476:function(t,e){function n(t={}){const e="string"===typeof t.quote?t.quote:'"',n="string"===typeof t.escapedQuote?t.escapedQuote:`${e}${e}`;return e?t=>(t.includes(e)&&(t=t.replace(new RegExp(e,"g"),n)),`${e}${t}${e}`):t=>t}t.exports=n},"1ccf":function(t,e){const n='"',r='""""';function a(t){return`"=""${t.replace(new RegExp(n,"g"),r)}"""`}t.exports=a},"1fb5":function(t,e,n){"use strict";e.byteLength=u,e.toByteArray=h,e.fromByteArray=_;for(var r=[],a=[],i="undefined"!==typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=o.length;s<c;++s)r[s]=o[s],a[o.charCodeAt(s)]=s;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");-1===n&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function u(t){var e=l(t),n=e[0],r=e[1];return 3*(n+r)/4-r}function d(t,e,n){return 3*(e+n)/4-n}function h(t){var e,n,r=l(t),o=r[0],s=r[1],c=new i(d(t,o,s)),u=0,h=s>0?o-4:o;for(n=0;n<h;n+=4)e=a[t.charCodeAt(n)]<<18|a[t.charCodeAt(n+1)]<<12|a[t.charCodeAt(n+2)]<<6|a[t.charCodeAt(n+3)],c[u++]=e>>16&255,c[u++]=e>>8&255,c[u++]=255&e;return 2===s&&(e=a[t.charCodeAt(n)]<<2|a[t.charCodeAt(n+1)]>>4,c[u++]=255&e),1===s&&(e=a[t.charCodeAt(n)]<<10|a[t.charCodeAt(n+1)]<<4|a[t.charCodeAt(n+2)]>>2,c[u++]=e>>8&255,c[u++]=255&e),c}function f(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function p(t,e,n){for(var r,a=[],i=e;i<n;i+=3)r=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(255&t[i+2]),a.push(f(r));return a.join("")}function _(t){for(var e,n=t.length,a=n%3,i=[],o=16383,s=0,c=n-a;s<c;s+=o)i.push(p(t,s,s+o>c?c:s+o));return 1===a?(e=t[n-1],i.push(r[e>>2]+r[e<<4&63]+"==")):2===a&&(e=(t[n-2]<<8)+t[n-1],i.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),i.join("")}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},2:function(t,e){},"21f5":function(t,e,n){"use strict";n("f832")},"27bf":function(t,e,n){"use strict";t.exports=o;var r=n("b19a"),a=Object.create(n("3a7c"));function i(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=e&&this.push(e),r(t);var a=this._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}function o(t){if(!(this instanceof o))return new o(t);r.call(this,t),this._transformState={afterTransform:i.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"===typeof t.transform&&(this._transform=t.transform),"function"===typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",s)}function s(){var t=this;"function"===typeof this._flush?this._flush((function(e,n){c(t,e,n)})):c(this,null,null)}function c(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}a.inherits=n("3fb5"),a.inherits(o,r),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,r.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},o.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var a=this._readableState;(r.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},o.prototype._destroy=function(t,e){var n=this;r.prototype._destroy.call(this,t,(function(t){e(t),n.emit("close")}))}},"293d":function(t,e,n){const r=n("eea2"),{Tokenizer:a,TokenParser:i,TokenType:o}=n("a195");class s extends r{constructor(t,e){super(t),this.opts=this.preprocessOpts(t),this.initTokenizer(t,e),this.opts.fields&&this.preprocessFieldsInfo(this.opts.fields)}initTokenizer(t={},e={}){e.objectMode?this.tokenizer=this.getObjectModeTokenizer():t.ndjson?this.tokenizer=this.getNdJsonTokenizer(e):this.tokenizer=this.getBinaryModeTokenizer(e)}getObjectModeTokenizer(){return{write:t=>this.pushLine(t),end:()=>{this.pushHeaderIfNotWritten(),this.onEnd()}}}configureCallbacks(t,e){t.onToken=e.write.bind(this.tokenParser),t.onError=t=>this.onError(t),t.onEnd=()=>{this.tokenParser.isEnded||this.tokenParser.end()},e.onValue=t=>this.pushLine(t),e.onError=t=>this.onError(t),e.onEnd=()=>{this.pushHeaderIfNotWritten(),this.onEnd()}}getNdJsonTokenizer(t){const e=new a({...t,separator:"\n"});return this.tokenParser=new i({paths:["$"],keepStack:!1,separator:"\n"}),this.configureCallbacks(e,this.tokenParser),e}getBinaryModeTokenizer(t){const e=new a(t);return e.onToken=(t,n,r)=>{if(t===o.LEFT_BRACKET)this.tokenParser=new i({paths:["$.*"],keepStack:!1});else{if(t!==o.LEFT_BRACE)return void this.onError(new Error("Data should be a JSON object or array"));this.tokenParser=new i({paths:["$"],keepStack:!1})}this.configureCallbacks(e,this.tokenParser),this.tokenParser.write(t,n,r)},e.onError=()=>this.onError(new Error("Data should be a JSON object or array")),e.onEnd=()=>{this.onError(new Error('Data should not be empty or the "fields" option should be included')),this.onEnd()},e}write(t){this.tokenizer.write(t)}end(){this.tokenizer&&!this.tokenizer.isEnded&&this.tokenizer.end()}pushHeaderIfNotWritten(){this._hasWritten||(this.opts.fields?this.pushHeader():this.onError(new Error('Data should not be empty or the "fields" option should be included')))}pushHeader(){if(this.opts.withBOM&&this.onData("\ufeff"),this.opts.header){const t=this.getHeader(this.opts.fields);this.onHeader(t),this.onData(t),this._hasWritten=!0}}pushLine(t){const e=this.preprocessRow(t);this._hasWritten||(this.opts.fields=this.preprocessFieldsInfo(this.opts.fields||Object.keys(e[0])),this.pushHeader(this.opts.fields)),e.forEach(t=>{const e=this.processRow(t,this.opts.fields);void 0!==e&&(this.onLine(e),this.onData(this._hasWritten?this.opts.eol+e:e),this._hasWritten=!0)})}onHeader(t){}onLine(t){}onData(t){}onError(){}onEnd(){}}t.exports=s},"2b3d":function(t,e,n){"use strict";n("3ca3");var r,a=n("23e7"),i=n("83ab"),o=n("0d3b"),s=n("da84"),c=n("37e8"),l=n("6eeb"),u=n("19aa"),d=n("5135"),h=n("60da"),f=n("4df4"),p=n("6547").codeAt,_=n("5fb2"),g=n("d44e"),m=n("9861"),b=n("69f3"),y=s.URL,v=m.URLSearchParams,T=m.getState,S=b.set,w=b.getterFor("URL"),E=Math.floor,L=Math.pow,A="Invalid authority",D="Invalid scheme",I="Invalid host",R="Invalid port",k=/[A-Za-z]/,x=/[\d+-.A-Za-z]/,C=/\d/,N=/^(0x|0X)/,B=/^[0-7]+$/,M=/^\d+$/,O=/^[\dA-Fa-f]+$/,P=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,j=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,U=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,Z=/[\u0009\u000A\u000D]/g,G=function(t,e){var n,r,a;if("["==e.charAt(0)){if("]"!=e.charAt(e.length-1))return I;if(n=V(e.slice(1,-1)),!n)return I;t.host=n}else if(Q(t)){if(e=_(e),P.test(e))return I;if(n=F(e),null===n)return I;t.host=n}else{if(j.test(e))return I;for(n="",r=f(e),a=0;a<r.length;a++)n+=K(r[a],Y);t.host=n}},F=function(t){var e,n,r,a,i,o,s,c=t.split(".");if(c.length&&""==c[c.length-1]&&c.pop(),e=c.length,e>4)return t;for(n=[],r=0;r<e;r++){if(a=c[r],""==a)return t;if(i=10,a.length>1&&"0"==a.charAt(0)&&(i=N.test(a)?16:8,a=a.slice(8==i?1:2)),""===a)o=0;else{if(!(10==i?M:8==i?B:O).test(a))return t;o=parseInt(a,i)}n.push(o)}for(r=0;r<e;r++)if(o=n[r],r==e-1){if(o>=L(256,5-e))return null}else if(o>255)return null;for(s=n.pop(),r=0;r<n.length;r++)s+=n[r]*L(256,3-r);return s},V=function(t){var e,n,r,a,i,o,s,c=[0,0,0,0,0,0,0,0],l=0,u=null,d=0,h=function(){return t.charAt(d)};if(":"==h()){if(":"!=t.charAt(1))return;d+=2,l++,u=l}while(h()){if(8==l)return;if(":"!=h()){e=n=0;while(n<4&&O.test(h()))e=16*e+parseInt(h(),16),d++,n++;if("."==h()){if(0==n)return;if(d-=n,l>6)return;r=0;while(h()){if(a=null,r>0){if(!("."==h()&&r<4))return;d++}if(!C.test(h()))return;while(C.test(h())){if(i=parseInt(h(),10),null===a)a=i;else{if(0==a)return;a=10*a+i}if(a>255)return;d++}c[l]=256*c[l]+a,r++,2!=r&&4!=r||l++}if(4!=r)return;break}if(":"==h()){if(d++,!h())return}else if(h())return;c[l++]=e}else{if(null!==u)return;d++,l++,u=l}}if(null!==u){o=l-u,l=7;while(0!=l&&o>0)s=c[l],c[l--]=c[u+o-1],c[u+--o]=s}else if(8!=l)return;return c},H=function(t){for(var e=null,n=1,r=null,a=0,i=0;i<8;i++)0!==t[i]?(a>n&&(e=r,n=a),r=null,a=0):(null===r&&(r=i),++a);return a>n&&(e=r,n=a),e},z=function(t){var e,n,r,a;if("number"==typeof t){for(e=[],n=0;n<4;n++)e.unshift(t%256),t=E(t/256);return e.join(".")}if("object"==typeof t){for(e="",r=H(t),n=0;n<8;n++)a&&0===t[n]||(a&&(a=!1),r===n?(e+=n?":":"::",a=!0):(e+=t[n].toString(16),n<7&&(e+=":")));return"["+e+"]"}return t},Y={},W=h({},Y,{" ":1,'"':1,"<":1,">":1,"`":1}),q=h({},W,{"#":1,"?":1,"{":1,"}":1}),$=h({},q,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),K=function(t,e){var n=p(t,0);return n>32&&n<127&&!d(e,t)?t:encodeURIComponent(t)},J={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Q=function(t){return d(J,t.scheme)},X=function(t){return""!=t.username||""!=t.password},tt=function(t){return!t.host||t.cannotBeABaseURL||"file"==t.scheme},et=function(t,e){var n;return 2==t.length&&k.test(t.charAt(0))&&(":"==(n=t.charAt(1))||!e&&"|"==n)},nt=function(t){var e;return t.length>1&&et(t.slice(0,2))&&(2==t.length||"/"===(e=t.charAt(2))||"\\"===e||"?"===e||"#"===e)},rt=function(t){var e=t.path,n=e.length;!n||"file"==t.scheme&&1==n&&et(e[0],!0)||e.pop()},at=function(t){return"."===t||"%2e"===t.toLowerCase()},it=function(t){return t=t.toLowerCase(),".."===t||"%2e."===t||".%2e"===t||"%2e%2e"===t},ot={},st={},ct={},lt={},ut={},dt={},ht={},ft={},pt={},_t={},gt={},mt={},bt={},yt={},vt={},Tt={},St={},wt={},Et={},Lt={},At={},Dt=function(t,e,n,a){var i,o,s,c,l=n||ot,u=0,h="",p=!1,_=!1,g=!1;n||(t.scheme="",t.username="",t.password="",t.host=null,t.port=null,t.path=[],t.query=null,t.fragment=null,t.cannotBeABaseURL=!1,e=e.replace(U,"")),e=e.replace(Z,""),i=f(e);while(u<=i.length){switch(o=i[u],l){case ot:if(!o||!k.test(o)){if(n)return D;l=ct;continue}h+=o.toLowerCase(),l=st;break;case st:if(o&&(x.test(o)||"+"==o||"-"==o||"."==o))h+=o.toLowerCase();else{if(":"!=o){if(n)return D;h="",l=ct,u=0;continue}if(n&&(Q(t)!=d(J,h)||"file"==h&&(X(t)||null!==t.port)||"file"==t.scheme&&!t.host))return;if(t.scheme=h,n)return void(Q(t)&&J[t.scheme]==t.port&&(t.port=null));h="","file"==t.scheme?l=yt:Q(t)&&a&&a.scheme==t.scheme?l=lt:Q(t)?l=ft:"/"==i[u+1]?(l=ut,u++):(t.cannotBeABaseURL=!0,t.path.push(""),l=Et)}break;case ct:if(!a||a.cannotBeABaseURL&&"#"!=o)return D;if(a.cannotBeABaseURL&&"#"==o){t.scheme=a.scheme,t.path=a.path.slice(),t.query=a.query,t.fragment="",t.cannotBeABaseURL=!0,l=At;break}l="file"==a.scheme?yt:dt;continue;case lt:if("/"!=o||"/"!=i[u+1]){l=dt;continue}l=pt,u++;break;case ut:if("/"==o){l=_t;break}l=wt;continue;case dt:if(t.scheme=a.scheme,o==r)t.username=a.username,t.password=a.password,t.host=a.host,t.port=a.port,t.path=a.path.slice(),t.query=a.query;else if("/"==o||"\\"==o&&Q(t))l=ht;else if("?"==o)t.username=a.username,t.password=a.password,t.host=a.host,t.port=a.port,t.path=a.path.slice(),t.query="",l=Lt;else{if("#"!=o){t.username=a.username,t.password=a.password,t.host=a.host,t.port=a.port,t.path=a.path.slice(),t.path.pop(),l=wt;continue}t.username=a.username,t.password=a.password,t.host=a.host,t.port=a.port,t.path=a.path.slice(),t.query=a.query,t.fragment="",l=At}break;case ht:if(!Q(t)||"/"!=o&&"\\"!=o){if("/"!=o){t.username=a.username,t.password=a.password,t.host=a.host,t.port=a.port,l=wt;continue}l=_t}else l=pt;break;case ft:if(l=pt,"/"!=o||"/"!=h.charAt(u+1))continue;u++;break;case pt:if("/"!=o&&"\\"!=o){l=_t;continue}break;case _t:if("@"==o){p&&(h="%40"+h),p=!0,s=f(h);for(var m=0;m<s.length;m++){var b=s[m];if(":"!=b||g){var y=K(b,$);g?t.password+=y:t.username+=y}else g=!0}h=""}else if(o==r||"/"==o||"?"==o||"#"==o||"\\"==o&&Q(t)){if(p&&""==h)return A;u-=f(h).length+1,h="",l=gt}else h+=o;break;case gt:case mt:if(n&&"file"==t.scheme){l=Tt;continue}if(":"!=o||_){if(o==r||"/"==o||"?"==o||"#"==o||"\\"==o&&Q(t)){if(Q(t)&&""==h)return I;if(n&&""==h&&(X(t)||null!==t.port))return;if(c=G(t,h),c)return c;if(h="",l=St,n)return;continue}"["==o?_=!0:"]"==o&&(_=!1),h+=o}else{if(""==h)return I;if(c=G(t,h),c)return c;if(h="",l=bt,n==mt)return}break;case bt:if(!C.test(o)){if(o==r||"/"==o||"?"==o||"#"==o||"\\"==o&&Q(t)||n){if(""!=h){var v=parseInt(h,10);if(v>65535)return R;t.port=Q(t)&&v===J[t.scheme]?null:v,h=""}if(n)return;l=St;continue}return R}h+=o;break;case yt:if(t.scheme="file","/"==o||"\\"==o)l=vt;else{if(!a||"file"!=a.scheme){l=wt;continue}if(o==r)t.host=a.host,t.path=a.path.slice(),t.query=a.query;else if("?"==o)t.host=a.host,t.path=a.path.slice(),t.query="",l=Lt;else{if("#"!=o){nt(i.slice(u).join(""))||(t.host=a.host,t.path=a.path.slice(),rt(t)),l=wt;continue}t.host=a.host,t.path=a.path.slice(),t.query=a.query,t.fragment="",l=At}}break;case vt:if("/"==o||"\\"==o){l=Tt;break}a&&"file"==a.scheme&&!nt(i.slice(u).join(""))&&(et(a.path[0],!0)?t.path.push(a.path[0]):t.host=a.host),l=wt;continue;case Tt:if(o==r||"/"==o||"\\"==o||"?"==o||"#"==o){if(!n&&et(h))l=wt;else if(""==h){if(t.host="",n)return;l=St}else{if(c=G(t,h),c)return c;if("localhost"==t.host&&(t.host=""),n)return;h="",l=St}continue}h+=o;break;case St:if(Q(t)){if(l=wt,"/"!=o&&"\\"!=o)continue}else if(n||"?"!=o)if(n||"#"!=o){if(o!=r&&(l=wt,"/"!=o))continue}else t.fragment="",l=At;else t.query="",l=Lt;break;case wt:if(o==r||"/"==o||"\\"==o&&Q(t)||!n&&("?"==o||"#"==o)){if(it(h)?(rt(t),"/"==o||"\\"==o&&Q(t)||t.path.push("")):at(h)?"/"==o||"\\"==o&&Q(t)||t.path.push(""):("file"==t.scheme&&!t.path.length&&et(h)&&(t.host&&(t.host=""),h=h.charAt(0)+":"),t.path.push(h)),h="","file"==t.scheme&&(o==r||"?"==o||"#"==o))while(t.path.length>1&&""===t.path[0])t.path.shift();"?"==o?(t.query="",l=Lt):"#"==o&&(t.fragment="",l=At)}else h+=K(o,q);break;case Et:"?"==o?(t.query="",l=Lt):"#"==o?(t.fragment="",l=At):o!=r&&(t.path[0]+=K(o,Y));break;case Lt:n||"#"!=o?o!=r&&("'"==o&&Q(t)?t.query+="%27":t.query+="#"==o?"%23":K(o,Y)):(t.fragment="",l=At);break;case At:o!=r&&(t.fragment+=K(o,W));break}u++}},It=function(t){var e,n,r=u(this,It,"URL"),a=arguments.length>1?arguments[1]:void 0,o=String(t),s=S(r,{type:"URL"});if(void 0!==a)if(a instanceof It)e=w(a);else if(n=Dt(e={},String(a)),n)throw TypeError(n);if(n=Dt(s,o,null,e),n)throw TypeError(n);var c=s.searchParams=new v,l=T(c);l.updateSearchParams(s.query),l.updateURL=function(){s.query=String(c)||null},i||(r.href=kt.call(r),r.origin=xt.call(r),r.protocol=Ct.call(r),r.username=Nt.call(r),r.password=Bt.call(r),r.host=Mt.call(r),r.hostname=Ot.call(r),r.port=Pt.call(r),r.pathname=jt.call(r),r.search=Ut.call(r),r.searchParams=Zt.call(r),r.hash=Gt.call(r))},Rt=It.prototype,kt=function(){var t=w(this),e=t.scheme,n=t.username,r=t.password,a=t.host,i=t.port,o=t.path,s=t.query,c=t.fragment,l=e+":";return null!==a?(l+="//",X(t)&&(l+=n+(r?":"+r:"")+"@"),l+=z(a),null!==i&&(l+=":"+i)):"file"==e&&(l+="//"),l+=t.cannotBeABaseURL?o[0]:o.length?"/"+o.join("/"):"",null!==s&&(l+="?"+s),null!==c&&(l+="#"+c),l},xt=function(){var t=w(this),e=t.scheme,n=t.port;if("blob"==e)try{return new URL(e.path[0]).origin}catch(r){return"null"}return"file"!=e&&Q(t)?e+"://"+z(t.host)+(null!==n?":"+n:""):"null"},Ct=function(){return w(this).scheme+":"},Nt=function(){return w(this).username},Bt=function(){return w(this).password},Mt=function(){var t=w(this),e=t.host,n=t.port;return null===e?"":null===n?z(e):z(e)+":"+n},Ot=function(){var t=w(this).host;return null===t?"":z(t)},Pt=function(){var t=w(this).port;return null===t?"":String(t)},jt=function(){var t=w(this),e=t.path;return t.cannotBeABaseURL?e[0]:e.length?"/"+e.join("/"):""},Ut=function(){var t=w(this).query;return t?"?"+t:""},Zt=function(){return w(this).searchParams},Gt=function(){var t=w(this).fragment;return t?"#"+t:""},Ft=function(t,e){return{get:t,set:e,configurable:!0,enumerable:!0}};if(i&&c(Rt,{href:Ft(kt,(function(t){var e=w(this),n=String(t),r=Dt(e,n);if(r)throw TypeError(r);T(e.searchParams).updateSearchParams(e.query)})),origin:Ft(xt),protocol:Ft(Ct,(function(t){var e=w(this);Dt(e,String(t)+":",ot)})),username:Ft(Nt,(function(t){var e=w(this),n=f(String(t));if(!tt(e)){e.username="";for(var r=0;r<n.length;r++)e.username+=K(n[r],$)}})),password:Ft(Bt,(function(t){var e=w(this),n=f(String(t));if(!tt(e)){e.password="";for(var r=0;r<n.length;r++)e.password+=K(n[r],$)}})),host:Ft(Mt,(function(t){var e=w(this);e.cannotBeABaseURL||Dt(e,String(t),gt)})),hostname:Ft(Ot,(function(t){var e=w(this);e.cannotBeABaseURL||Dt(e,String(t),mt)})),port:Ft(Pt,(function(t){var e=w(this);tt(e)||(t=String(t),""==t?e.port=null:Dt(e,t,bt))})),pathname:Ft(jt,(function(t){var e=w(this);e.cannotBeABaseURL||(e.path=[],Dt(e,t+"",St))})),search:Ft(Ut,(function(t){var e=w(this);t=String(t),""==t?e.query=null:("?"==t.charAt(0)&&(t=t.slice(1)),e.query="",Dt(e,t,Lt)),T(e.searchParams).updateSearchParams(e.query)})),searchParams:Ft(Zt),hash:Ft(Gt,(function(t){var e=w(this);t=String(t),""!=t?("#"==t.charAt(0)&&(t=t.slice(1)),e.fragment="",Dt(e,t,At)):e.fragment=null}))}),l(Rt,"toJSON",(function(){return kt.call(this)}),{enumerable:!0}),l(Rt,"toString",(function(){return kt.call(this)}),{enumerable:!0}),y){var Vt=y.createObjectURL,Ht=y.revokeObjectURL;Vt&&l(It,"createObjectURL",(function(t){return Vt.apply(y,arguments)})),Ht&&l(It,"revokeObjectURL",(function(t){return Ht.apply(y,arguments)}))}g(It,"URL"),a({global:!0,forced:!o,sham:!i},{URL:It})},"2c63":function(t,e,n){t.exports=n("dc14")},"2c7f":function(t,e){function n(t){return null===t||void 0===t?"":""+t}t.exports=n},"37c3":function(t,e,n){},"3a7c":function(t,e,n){function r(t){return Array.isArray?Array.isArray(t):"[object Array]"===m(t)}function a(t){return"boolean"===typeof t}function i(t){return null===t}function o(t){return null==t}function s(t){return"number"===typeof t}function c(t){return"string"===typeof t}function l(t){return"symbol"===typeof t}function u(t){return void 0===t}function d(t){return"[object RegExp]"===m(t)}function h(t){return"object"===typeof t&&null!==t}function f(t){return"[object Date]"===m(t)}function p(t){return"[object Error]"===m(t)||t instanceof Error}function _(t){return"function"===typeof t}function g(t){return null===t||"boolean"===typeof t||"number"===typeof t||"string"===typeof t||"symbol"===typeof t||"undefined"===typeof t}function m(t){return Object.prototype.toString.call(t)}e.isArray=r,e.isBoolean=a,e.isNull=i,e.isNullOrUndefined=o,e.isNumber=s,e.isString=c,e.isSymbol=l,e.isUndefined=u,e.isRegExp=d,e.isObject=h,e.isDate=f,e.isError=p,e.isFunction=_,e.isPrimitive=g,e.isBuffer=n("b639").Buffer.isBuffer},"3c43":function(t,e){e.endianness=function(){return"LE"},e.hostname=function(){return"undefined"!==typeof location?location.hostname:""},e.loadavg=function(){return[]},e.uptime=function(){return 0},e.freemem=function(){return Number.MAX_VALUE},e.totalmem=function(){return Number.MAX_VALUE},e.cpus=function(){return[]},e.type=function(){return"Browser"},e.release=function(){return"undefined"!==typeof navigator?navigator.appVersion:""},e.networkInterfaces=e.getNetworkInterfaces=function(){return{}},e.arch=function(){return"javascript"},e.platform=function(){return"browser"},e.tmpdir=e.tmpDir=function(){return"/tmp"},e.EOL="\n",e.homedir=function(){return"/"}},"3c60":function(t,e,n){},"3fb5":function(t,e){"function"===typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}},"420a":function(t,e,n){"use strict";n("fd82")},"429b":function(t,e,n){t.exports=n("faa1").EventEmitter},4681:function(t,e,n){"use strict";var r=n("966d");function a(t,e){var n=this,a=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return a||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,r.nextTick(o,this,t)):r.nextTick(o,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!e&&t?n._writableState?n._writableState.errorEmitted||(n._writableState.errorEmitted=!0,r.nextTick(o,n,t)):r.nextTick(o,n,t):e&&e(t)})),this)}function i(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function o(t,e){t.emit("error",e)}t.exports={destroy:a,undestroy:i}},"59a1":function(t,e,n){},"5e1a":function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=n("8707").Buffer,i=n(2);function o(t,e,n){t.copy(e,n)}t.exports=function(){function t(){r(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";var e=this.head,n=""+e.data;while(e=e.next)n+=t+e.data;return n},t.prototype.concat=function(t){if(0===this.length)return a.alloc(0);var e=a.allocUnsafe(t>>>0),n=this.head,r=0;while(n)o(n.data,e,r),r+=n.data.length,n=n.next;return e},t}(),i&&i.inspect&&i.inspect.custom&&(t.exports.prototype[i.inspect.custom]=function(){var t=i.inspect({length:this.length});return this.constructor.name+" "+t})},"5fb2":function(t,e,n){"use strict";var r=2147483647,a=36,i=1,o=26,s=38,c=700,l=72,u=128,d="-",h=/[^\0-\u007E]/,f=/[.\u3002\uFF0E\uFF61]/g,p="Overflow: input needs wider integers to process",_=a-i,g=Math.floor,m=String.fromCharCode,b=function(t){var e=[],n=0,r=t.length;while(n<r){var a=t.charCodeAt(n++);if(a>=55296&&a<=56319&&n<r){var i=t.charCodeAt(n++);56320==(64512&i)?e.push(((1023&a)<<10)+(1023&i)+65536):(e.push(a),n--)}else e.push(a)}return e},y=function(t){return t+22+75*(t<26)},v=function(t,e,n){var r=0;for(t=n?g(t/c):t>>1,t+=g(t/e);t>_*o>>1;r+=a)t=g(t/_);return g(r+(_+1)*t/(t+s))},T=function(t){var e=[];t=b(t);var n,s,c=t.length,h=u,f=0,_=l;for(n=0;n<t.length;n++)s=t[n],s<128&&e.push(m(s));var T=e.length,S=T;T&&e.push(d);while(S<c){var w=r;for(n=0;n<t.length;n++)s=t[n],s>=h&&s<w&&(w=s);var E=S+1;if(w-h>g((r-f)/E))throw RangeError(p);for(f+=(w-h)*E,h=w,n=0;n<t.length;n++){if(s=t[n],s<h&&++f>r)throw RangeError(p);if(s==h){for(var L=f,A=a;;A+=a){var D=A<=_?i:A>=_+o?o:A-_;if(L<D)break;var I=L-D,R=a-D;e.push(m(y(D+I%R))),L=g(I/R)}e.push(m(y(L))),_=v(f,E,S==T),f=0,++S}}++f,++h}return e.join("")};t.exports=function(t){var e,n,r=[],a=t.toLowerCase().replace(f,".").split(".");for(e=0;e<a.length;e++)n=a[e],r.push(h.test(n)?"xn--"+T(n):n);return r.join(".")}},6581:function(t,e,n){"use strict";n("37c3")},"67a8":function(t,e,n){"use strict";n("59a1")},7222:function(t,e,n){const r=n("3c43"),a=n("1476");function i(t={}){const e="string"===typeof t.quote?t.quote:'"',n="string"===typeof t.escapedQuote?t.escapedQuote:`${e}${e}`,i="string"===typeof t.separator?t.separator:",",o="string"===typeof t.eol?t.escapedQeoluote:r.EOL,s=a({quote:e,escapedQuote:n});return t=>[e,i,o].some(e=>t.includes(e))?s(t):t}t.exports=i},7694:function(t,e,n){},"76d3":function(t,e,n){"use strict";n("dd92")},"780f":function(t,e,n){"use strict";t.exports=i;var r=n("27bf"),a=Object.create(n("3a7c"));function i(t){if(!(this instanceof i))return new i(t);r.call(this,t)}a.inherits=n("3fb5"),a.inherits(i,r),i.prototype._transform=function(t,e,n){n(null,t)}},"7d72":function(t,e,n){"use strict";var r=n("8707").Buffer,a=r.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(t){if(!t)return"utf8";var e;while(1)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function o(t){var e=i(t);if("string"!==typeof e&&(r.isEncoding===a||!a(t)))throw new Error("Unknown encoding: "+t);return e||t}function s(t){var e;switch(this.encoding=o(t),this.encoding){case"utf16le":this.text=p,this.end=_,e=4;break;case"utf8":this.fillLast=d,e=4;break;case"base64":this.text=g,this.end=m,e=3;break;default:return this.write=b,void(this.end=y)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function c(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function l(t,e,n){var r=e.length-1;if(r<n)return 0;var a=c(e[r]);return a>=0?(a>0&&(t.lastNeed=a-1),a):--r<n||-2===a?0:(a=c(e[r]),a>=0?(a>0&&(t.lastNeed=a-2),a):--r<n||-2===a?0:(a=c(e[r]),a>=0?(a>0&&(2===a?a=0:t.lastNeed=a-3),a):0))}function u(t,e,n){if(128!==(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!==(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!==(192&e[2]))return t.lastNeed=2,"�"}}function d(t){var e=this.lastTotal-this.lastNeed,n=u(this,t,e);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function h(t,e){var n=l(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)}function f(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e}function p(t,e){if((t.length-e)%2===0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function _(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function g(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function m(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function b(t){return t.toString(this.encoding)}function y(t){return t&&t.length?this.write(t):""}e.StringDecoder=s,s.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(e=this.fillLast(t),void 0===e)return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},s.prototype.end=f,s.prototype.text=h,s.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},"7ea2":function(t,e,n){"use strict";const r=n("8b76"),a=n("abe6"),i=n("293d"),o=n("ee72"),s=n("82ab"),c=n("00e3"),l=n("2c7f"),u=n("aecd"),d=n("1476"),h=n("7222"),f=n("1ccf"),p=n("8a74"),_=n("a9ff");t.exports.Parser=r,t.exports.AsyncParser=a,t.exports.StreamParser=i,t.exports.Transform=o,t.exports.parse=(t,e)=>new r(e).parse(t),t.exports.parseAsync=(t,e,n)=>new a(e,n).parse(t).promise(),t.exports.transforms={flatten:s,unwind:c},t.exports.formatters={default:l,number:u,string:d,stringQuoteOnlyIfNecessary:h,stringExcel:f,symbol:p,object:_}},"82ab":function(t,e){function n({objects:t=!0,arrays:e=!1,separator:n="."}={}){function r(a,i,o){return Object.keys(a).forEach(s=>{const c=o?`${o}${n}${s}`:s,l=a[s];t&&"object"===typeof l&&null!==l&&!Array.isArray(l)&&"[object Function]"!==Object.prototype.toString.call(l.toJSON)&&Object.keys(l).length||e&&Array.isArray(l)?r(l,i,c):i[c]=l}),i}return t=>r(t,{})}t.exports=n},8707:function(t,e,n){var r=n("b639"),a=r.Buffer;function i(t,e){for(var n in t)e[n]=t[n]}function o(t,e,n){return a(t,e,n)}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=o),i(a,o),o.from=function(t,e,n){if("number"===typeof t)throw new TypeError("Argument must not be a number");return a(t,e,n)},o.alloc=function(t,e,n){if("number"!==typeof t)throw new TypeError("Argument must be a number");var r=a(t);return void 0!==e?"string"===typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},o.allocUnsafe=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return a(t)},o.allocUnsafeSlow=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},"8a74":function(t,e,n){const r=n("1476");function a(t={stringFormatter:r()}){return e=>t.stringFormatter(e.toString().slice(7,-1))}t.exports=a},"8b76":function(t,e,n){"use strict";const r=n("eea2");class a extends r{constructor(t){super(t)}parse(t){const e=this.preprocessData(t,this.opts.fields),n=this.opts.fields||this.preprocessFieldsInfo(e.reduce((t,e)=>(Object.keys(e).forEach(e=>{t.includes(e)||t.push(e)}),t),[])),r=this.opts.header?this.getHeader(n):"",a=this.processData(e,n),i=(this.opts.withBOM?"\ufeff":"")+r+(r&&a?this.opts.eol:"")+a;return i}preprocessData(t,e){const n=Array.isArray(t)?t:[t];if(!e&&(0===n.length||"object"!==typeof n[0]))throw new Error('Data should not be empty or the "fields" option should be included');return 0===this.opts.transforms.length?n:n.flatMap(t=>this.preprocessRow(t))}processData(t,e){return t.map(t=>this.processRow(t,e)).filter(t=>t).join(this.opts.eol)}}t.exports=a},9152:function(t,e){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,n,r,a){var i,o,s=8*a-r-1,c=(1<<s)-1,l=c>>1,u=-7,d=n?a-1:0,h=n?-1:1,f=t[e+d];for(d+=h,i=f&(1<<-u)-1,f>>=-u,u+=s;u>0;i=256*i+t[e+d],d+=h,u-=8);for(o=i&(1<<-u)-1,i>>=-u,u+=r;u>0;o=256*o+t[e+d],d+=h,u-=8);if(0===i)i=1-l;else{if(i===c)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,r),i-=l}return(f?-1:1)*o*Math.pow(2,i-r)},e.write=function(t,e,n,r,a,i){var o,s,c,l=8*i-a-1,u=(1<<l)-1,d=u>>1,h=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:i-1,p=r?1:-1,_=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),e+=o+d>=1?h/c:h*Math.pow(2,1-d),e*c>=2&&(o++,c/=2),o+d>=u?(s=0,o=u):o+d>=1?(s=(e*c-1)*Math.pow(2,a),o+=d):(s=e*Math.pow(2,d-1)*Math.pow(2,a),o=0));a>=8;t[n+f]=255&s,f+=p,s/=256,a-=8);for(o=o<<a|s,l+=a;l>0;t[n+f]=255&o,f+=p,o/=256,l-=8);t[n+f-p]|=128*_}},"966d":function(t,e,n){"use strict";(function(e){function n(t,n,r,a){if("function"!==typeof t)throw new TypeError('"callback" argument must be a function');var i,o,s=arguments.length;switch(s){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick((function(){t.call(null,n)}));case 3:return e.nextTick((function(){t.call(null,n,r)}));case 4:return e.nextTick((function(){t.call(null,n,r,a)}));default:i=new Array(s-1),o=0;while(o<i.length)i[o++]=arguments[o];return e.nextTick((function(){t.apply(null,i)}))}}"undefined"===typeof e||!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:n}:t.exports=e}).call(this,n("4362"))},9861:function(t,e,n){"use strict";n("e260");var r=n("23e7"),a=n("d066"),i=n("0d3b"),o=n("6eeb"),s=n("e2cc"),c=n("d44e"),l=n("9ed3"),u=n("69f3"),d=n("19aa"),h=n("5135"),f=n("0366"),p=n("f5df"),_=n("825a"),g=n("861d"),m=n("7c73"),b=n("5c6c"),y=n("9a1f"),v=n("35a1"),T=n("b622"),S=a("fetch"),w=a("Headers"),E=T("iterator"),L="URLSearchParams",A=L+"Iterator",D=u.set,I=u.getterFor(L),R=u.getterFor(A),k=/\+/g,x=Array(4),C=function(t){return x[t-1]||(x[t-1]=RegExp("((?:%[\\da-f]{2}){"+t+"})","gi"))},N=function(t){try{return decodeURIComponent(t)}catch(e){return t}},B=function(t){var e=t.replace(k," "),n=4;try{return decodeURIComponent(e)}catch(r){while(n)e=e.replace(C(n--),N);return e}},M=/[!'()~]|%20/g,O={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},P=function(t){return O[t]},j=function(t){return encodeURIComponent(t).replace(M,P)},U=function(t,e){if(e){var n,r,a=e.split("&"),i=0;while(i<a.length)n=a[i++],n.length&&(r=n.split("="),t.push({key:B(r.shift()),value:B(r.join("="))}))}},Z=function(t){this.entries.length=0,U(this.entries,t)},G=function(t,e){if(t<e)throw TypeError("Not enough arguments")},F=l((function(t,e){D(this,{type:A,iterator:y(I(t).entries),kind:e})}),"Iterator",(function(){var t=R(this),e=t.kind,n=t.iterator.next(),r=n.value;return n.done||(n.value="keys"===e?r.key:"values"===e?r.value:[r.key,r.value]),n})),V=function(){d(this,V,L);var t,e,n,r,a,i,o,s,c,l=arguments.length>0?arguments[0]:void 0,u=this,f=[];if(D(u,{type:L,entries:f,updateURL:function(){},updateSearchParams:Z}),void 0!==l)if(g(l))if(t=v(l),"function"===typeof t){e=t.call(l),n=e.next;while(!(r=n.call(e)).done){if(a=y(_(r.value)),i=a.next,(o=i.call(a)).done||(s=i.call(a)).done||!i.call(a).done)throw TypeError("Expected sequence with length 2");f.push({key:o.value+"",value:s.value+""})}}else for(c in l)h(l,c)&&f.push({key:c,value:l[c]+""});else U(f,"string"===typeof l?"?"===l.charAt(0)?l.slice(1):l:l+"")},H=V.prototype;s(H,{append:function(t,e){G(arguments.length,2);var n=I(this);n.entries.push({key:t+"",value:e+""}),n.updateURL()},delete:function(t){G(arguments.length,1);var e=I(this),n=e.entries,r=t+"",a=0;while(a<n.length)n[a].key===r?n.splice(a,1):a++;e.updateURL()},get:function(t){G(arguments.length,1);for(var e=I(this).entries,n=t+"",r=0;r<e.length;r++)if(e[r].key===n)return e[r].value;return null},getAll:function(t){G(arguments.length,1);for(var e=I(this).entries,n=t+"",r=[],a=0;a<e.length;a++)e[a].key===n&&r.push(e[a].value);return r},has:function(t){G(arguments.length,1);var e=I(this).entries,n=t+"",r=0;while(r<e.length)if(e[r++].key===n)return!0;return!1},set:function(t,e){G(arguments.length,1);for(var n,r=I(this),a=r.entries,i=!1,o=t+"",s=e+"",c=0;c<a.length;c++)n=a[c],n.key===o&&(i?a.splice(c--,1):(i=!0,n.value=s));i||a.push({key:o,value:s}),r.updateURL()},sort:function(){var t,e,n,r=I(this),a=r.entries,i=a.slice();for(a.length=0,n=0;n<i.length;n++){for(t=i[n],e=0;e<n;e++)if(a[e].key>t.key){a.splice(e,0,t);break}e===n&&a.push(t)}r.updateURL()},forEach:function(t){var e,n=I(this).entries,r=f(t,arguments.length>1?arguments[1]:void 0,3),a=0;while(a<n.length)e=n[a++],r(e.value,e.key,this)},keys:function(){return new F(this,"keys")},values:function(){return new F(this,"values")},entries:function(){return new F(this,"entries")}},{enumerable:!0}),o(H,E,H.entries),o(H,"toString",(function(){var t,e=I(this).entries,n=[],r=0;while(r<e.length)t=e[r++],n.push(j(t.key)+"="+j(t.value));return n.join("&")}),{enumerable:!0}),c(V,L),r({global:!0,forced:!i},{URLSearchParams:V}),i||"function"!=typeof S||"function"!=typeof w||r({global:!0,enumerable:!0,forced:!0},{fetch:function(t){var e,n,r,a=[t];return arguments.length>1&&(e=arguments[1],g(e)&&(n=e.body,p(n)===L&&(r=e.headers?new w(e.headers):new w,r.has("content-type")||r.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),e=m(e,{body:b(0,String(n)),headers:b(0,r)}))),a.push(e)),S.apply(this,a)}}),t.exports={URLSearchParams:V,getState:I}},"9a1f":function(t,e,n){var r=n("825a"),a=n("35a1");t.exports=function(t){var e=a(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return r(e.call(t))}},"9d6f":function(t,e,n){"use strict";function r(t,e,n){return void 0===t[e]?n:t[e]}function a(t,e,n){const r=Array.isArray(e)?e:e.split("."),[i,...o]=r;return{...t,[i]:r.length>1?a(t[i]||{},o,n):n}}function i(t,e){const n=Array.isArray(e)?e:e.split("."),[r,...a]=n;return"object"!==typeof t[r]?t:1===n.length?Object.keys(t).filter(t=>t!==r).reduce((e,n)=>({...e,[n]:t[n]}),{}):Object.keys(t).reduce((e,n)=>({...e,[n]:n!==r?t[n]:i(t[r],a)}),{})}function o(t,e){let n=e.prototype;do{Object.getOwnPropertyNames(n).filter(t=>!["constructor","__proto__","__defineGetter__","__defineSetter__","__lookupGetter__","__lookupSetter__","isPrototypeOf","hasOwnProperty","propertyIsEnumerable","valueOf","toString","toLocaleString"].includes(t)).forEach(e=>{t[e]||Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}),n=Object.getPrototypeOf(n)}while(null!=n)}t.exports={getProp:r,setProp:a,unsetProp:i,fakeInherit:o}},a195:function(t,e,n){(function(t,n){n(e)})(0,(function(t){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},e(t,n)};function n(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var r,a,i=function(){return i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},i.apply(this,arguments)};(function(t){t[t["BACKSPACE"]=8]="BACKSPACE",t[t["FORM_FEED"]=12]="FORM_FEED",t[t["NEWLINE"]=10]="NEWLINE",t[t["CARRIAGE_RETURN"]=13]="CARRIAGE_RETURN",t[t["TAB"]=9]="TAB",t[t["SPACE"]=32]="SPACE",t[t["EXCLAMATION_MARK"]=33]="EXCLAMATION_MARK",t[t["QUOTATION_MARK"]=34]="QUOTATION_MARK",t[t["NUMBER_SIGN"]=35]="NUMBER_SIGN",t[t["DOLLAR_SIGN"]=36]="DOLLAR_SIGN",t[t["PERCENT_SIGN"]=37]="PERCENT_SIGN",t[t["AMPERSAND"]=38]="AMPERSAND",t[t["APOSTROPHE"]=39]="APOSTROPHE",t[t["LEFT_PARENTHESIS"]=40]="LEFT_PARENTHESIS",t[t["RIGHT_PARENTHESIS"]=41]="RIGHT_PARENTHESIS",t[t["ASTERISK"]=42]="ASTERISK",t[t["PLUS_SIGN"]=43]="PLUS_SIGN",t[t["COMMA"]=44]="COMMA",t[t["HYPHEN_MINUS"]=45]="HYPHEN_MINUS",t[t["FULL_STOP"]=46]="FULL_STOP",t[t["SOLIDUS"]=47]="SOLIDUS",t[t["DIGIT_ZERO"]=48]="DIGIT_ZERO",t[t["DIGIT_ONE"]=49]="DIGIT_ONE",t[t["DIGIT_TWO"]=50]="DIGIT_TWO",t[t["DIGIT_THREE"]=51]="DIGIT_THREE",t[t["DIGIT_FOUR"]=52]="DIGIT_FOUR",t[t["DIGIT_FIVE"]=53]="DIGIT_FIVE",t[t["DIGIT_SIX"]=54]="DIGIT_SIX",t[t["DIGIT_SEVEN"]=55]="DIGIT_SEVEN",t[t["DIGIT_EIGHT"]=56]="DIGIT_EIGHT",t[t["DIGIT_NINE"]=57]="DIGIT_NINE",t[t["COLON"]=58]="COLON",t[t["SEMICOLON"]=59]="SEMICOLON",t[t["LESS_THAN_SIGN"]=60]="LESS_THAN_SIGN",t[t["EQUALS_SIGN"]=61]="EQUALS_SIGN",t[t["GREATER_THAN_SIGN"]=62]="GREATER_THAN_SIGN",t[t["QUESTION_MARK"]=63]="QUESTION_MARK",t[t["COMMERCIAL_AT"]=64]="COMMERCIAL_AT",t[t["LATIN_CAPITAL_LETTER_A"]=65]="LATIN_CAPITAL_LETTER_A",t[t["LATIN_CAPITAL_LETTER_B"]=66]="LATIN_CAPITAL_LETTER_B",t[t["LATIN_CAPITAL_LETTER_C"]=67]="LATIN_CAPITAL_LETTER_C",t[t["LATIN_CAPITAL_LETTER_D"]=68]="LATIN_CAPITAL_LETTER_D",t[t["LATIN_CAPITAL_LETTER_E"]=69]="LATIN_CAPITAL_LETTER_E",t[t["LATIN_CAPITAL_LETTER_F"]=70]="LATIN_CAPITAL_LETTER_F",t[t["LATIN_CAPITAL_LETTER_G"]=71]="LATIN_CAPITAL_LETTER_G",t[t["LATIN_CAPITAL_LETTER_H"]=72]="LATIN_CAPITAL_LETTER_H",t[t["LATIN_CAPITAL_LETTER_I"]=73]="LATIN_CAPITAL_LETTER_I",t[t["LATIN_CAPITAL_LETTER_J"]=74]="LATIN_CAPITAL_LETTER_J",t[t["LATIN_CAPITAL_LETTER_K"]=75]="LATIN_CAPITAL_LETTER_K",t[t["LATIN_CAPITAL_LETTER_L"]=76]="LATIN_CAPITAL_LETTER_L",t[t["LATIN_CAPITAL_LETTER_M"]=77]="LATIN_CAPITAL_LETTER_M",t[t["LATIN_CAPITAL_LETTER_N"]=78]="LATIN_CAPITAL_LETTER_N",t[t["LATIN_CAPITAL_LETTER_O"]=79]="LATIN_CAPITAL_LETTER_O",t[t["LATIN_CAPITAL_LETTER_P"]=80]="LATIN_CAPITAL_LETTER_P",t[t["LATIN_CAPITAL_LETTER_Q"]=81]="LATIN_CAPITAL_LETTER_Q",t[t["LATIN_CAPITAL_LETTER_R"]=82]="LATIN_CAPITAL_LETTER_R",t[t["LATIN_CAPITAL_LETTER_S"]=83]="LATIN_CAPITAL_LETTER_S",t[t["LATIN_CAPITAL_LETTER_T"]=84]="LATIN_CAPITAL_LETTER_T",t[t["LATIN_CAPITAL_LETTER_U"]=85]="LATIN_CAPITAL_LETTER_U",t[t["LATIN_CAPITAL_LETTER_V"]=86]="LATIN_CAPITAL_LETTER_V",t[t["LATIN_CAPITAL_LETTER_W"]=87]="LATIN_CAPITAL_LETTER_W",t[t["LATIN_CAPITAL_LETTER_X"]=88]="LATIN_CAPITAL_LETTER_X",t[t["LATIN_CAPITAL_LETTER_Y"]=89]="LATIN_CAPITAL_LETTER_Y",t[t["LATIN_CAPITAL_LETTER_Z"]=90]="LATIN_CAPITAL_LETTER_Z",t[t["LEFT_SQUARE_BRACKET"]=91]="LEFT_SQUARE_BRACKET",t[t["REVERSE_SOLIDUS"]=92]="REVERSE_SOLIDUS",t[t["RIGHT_SQUARE_BRACKET"]=93]="RIGHT_SQUARE_BRACKET",t[t["CIRCUMFLEX_ACCENT"]=94]="CIRCUMFLEX_ACCENT",t[t["LOW_LINE"]=95]="LOW_LINE",t[t["GRAVE_ACCENT"]=96]="GRAVE_ACCENT",t[t["LATIN_SMALL_LETTER_A"]=97]="LATIN_SMALL_LETTER_A",t[t["LATIN_SMALL_LETTER_B"]=98]="LATIN_SMALL_LETTER_B",t[t["LATIN_SMALL_LETTER_C"]=99]="LATIN_SMALL_LETTER_C",t[t["LATIN_SMALL_LETTER_D"]=100]="LATIN_SMALL_LETTER_D",t[t["LATIN_SMALL_LETTER_E"]=101]="LATIN_SMALL_LETTER_E",t[t["LATIN_SMALL_LETTER_F"]=102]="LATIN_SMALL_LETTER_F",t[t["LATIN_SMALL_LETTER_G"]=103]="LATIN_SMALL_LETTER_G",t[t["LATIN_SMALL_LETTER_H"]=104]="LATIN_SMALL_LETTER_H",t[t["LATIN_SMALL_LETTER_I"]=105]="LATIN_SMALL_LETTER_I",t[t["LATIN_SMALL_LETTER_J"]=106]="LATIN_SMALL_LETTER_J",t[t["LATIN_SMALL_LETTER_K"]=107]="LATIN_SMALL_LETTER_K",t[t["LATIN_SMALL_LETTER_L"]=108]="LATIN_SMALL_LETTER_L",t[t["LATIN_SMALL_LETTER_M"]=109]="LATIN_SMALL_LETTER_M",t[t["LATIN_SMALL_LETTER_N"]=110]="LATIN_SMALL_LETTER_N",t[t["LATIN_SMALL_LETTER_O"]=111]="LATIN_SMALL_LETTER_O",t[t["LATIN_SMALL_LETTER_P"]=112]="LATIN_SMALL_LETTER_P",t[t["LATIN_SMALL_LETTER_Q"]=113]="LATIN_SMALL_LETTER_Q",t[t["LATIN_SMALL_LETTER_R"]=114]="LATIN_SMALL_LETTER_R",t[t["LATIN_SMALL_LETTER_S"]=115]="LATIN_SMALL_LETTER_S",t[t["LATIN_SMALL_LETTER_T"]=116]="LATIN_SMALL_LETTER_T",t[t["LATIN_SMALL_LETTER_U"]=117]="LATIN_SMALL_LETTER_U",t[t["LATIN_SMALL_LETTER_V"]=118]="LATIN_SMALL_LETTER_V",t[t["LATIN_SMALL_LETTER_W"]=119]="LATIN_SMALL_LETTER_W",t[t["LATIN_SMALL_LETTER_X"]=120]="LATIN_SMALL_LETTER_X",t[t["LATIN_SMALL_LETTER_Y"]=121]="LATIN_SMALL_LETTER_Y",t[t["LATIN_SMALL_LETTER_Z"]=122]="LATIN_SMALL_LETTER_Z",t[t["LEFT_CURLY_BRACKET"]=123]="LEFT_CURLY_BRACKET",t[t["VERTICAL_LINE"]=124]="VERTICAL_LINE",t[t["RIGHT_CURLY_BRACKET"]=125]="RIGHT_CURLY_BRACKET",t[t["TILDE"]=126]="TILDE"})(a||(a={}));var o=(r={},r[a.QUOTATION_MARK]=a.QUOTATION_MARK,r[a.REVERSE_SOLIDUS]=a.REVERSE_SOLIDUS,r[a.SOLIDUS]=a.SOLIDUS,r[a.LATIN_SMALL_LETTER_B]=a.BACKSPACE,r[a.LATIN_SMALL_LETTER_F]=a.FORM_FEED,r[a.LATIN_SMALL_LETTER_N]=a.NEWLINE,r[a.LATIN_SMALL_LETTER_R]=a.CARRIAGE_RETURN,r[a.LATIN_SMALL_LETTER_T]=a.TAB,r),s=Object.freeze({__proto__:null,get charset(){return a},escapedSequences:o}),c=function(){function t(){this.decoder=new TextDecoder("utf-8"),this.string="",this.byteLength=0}return t.prototype.appendChar=function(t){this.string+=String.fromCharCode(t),this.byteLength+=1},t.prototype.appendBuf=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=t.length),this.string+=this.decoder.decode(t.subarray(e,n)),this.byteLength+=n-e},t.prototype.reset=function(){this.string="",this.byteLength=0},t.prototype.toString=function(){return this.string},t}(),l=function(){function t(t){this.decoder=new TextDecoder("utf-8"),this.bufferOffset=0,this.string="",this.byteLength=0,this.buffer=new Uint8Array(t)}return t.prototype.appendChar=function(t){this.bufferOffset>=this.buffer.length&&this.flushStringBuffer(),this.buffer[this.bufferOffset++]=t,this.byteLength+=1},t.prototype.appendBuf=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=t.length);var r=n-e;this.bufferOffset+r>this.buffer.length&&this.flushStringBuffer(),this.buffer.set(t.subarray(e,n),this.bufferOffset),this.bufferOffset+=r,this.byteLength+=r},t.prototype.flushStringBuffer=function(){this.string+=this.decoder.decode(this.buffer.subarray(0,this.bufferOffset)),this.bufferOffset=0},t.prototype.reset=function(){this.string="",this.bufferOffset=0,this.byteLength=0},t.prototype.toString=function(){return this.flushStringBuffer(),this.string},t}();t.TokenType=void 0,function(t){t[t["LEFT_BRACE"]=1]="LEFT_BRACE",t[t["RIGHT_BRACE"]=2]="RIGHT_BRACE",t[t["LEFT_BRACKET"]=3]="LEFT_BRACKET",t[t["RIGHT_BRACKET"]=4]="RIGHT_BRACKET",t[t["COLON"]=5]="COLON",t[t["COMMA"]=6]="COMMA",t[t["TRUE"]=7]="TRUE",t[t["FALSE"]=8]="FALSE",t[t["NULL"]=9]="NULL",t[t["STRING"]=10]="STRING",t[t["NUMBER"]=11]="NUMBER",t[t["SEPARATOR"]=12]="SEPARATOR"}(t.TokenType||(t.TokenType={}));var u,d=t.TokenType.LEFT_BRACE,h=t.TokenType.RIGHT_BRACE,f=t.TokenType.LEFT_BRACKET,p=t.TokenType.RIGHT_BRACKET,_=t.TokenType.COLON,g=t.TokenType.COMMA,m=t.TokenType.TRUE,b=t.TokenType.FALSE,y=t.TokenType.NULL,v=t.TokenType.STRING,T=t.TokenType.NUMBER;(function(t){t[t["START"]=0]="START",t[t["ENDED"]=1]="ENDED",t[t["ERROR"]=2]="ERROR",t[t["TRUE1"]=3]="TRUE1",t[t["TRUE2"]=4]="TRUE2",t[t["TRUE3"]=5]="TRUE3",t[t["FALSE1"]=6]="FALSE1",t[t["FALSE2"]=7]="FALSE2",t[t["FALSE3"]=8]="FALSE3",t[t["FALSE4"]=9]="FALSE4",t[t["NULL1"]=10]="NULL1",t[t["NULL2"]=11]="NULL2",t[t["NULL3"]=12]="NULL3",t[t["STRING_DEFAULT"]=13]="STRING_DEFAULT",t[t["STRING_AFTER_BACKSLASH"]=14]="STRING_AFTER_BACKSLASH",t[t["STRING_UNICODE_DIGIT_1"]=15]="STRING_UNICODE_DIGIT_1",t[t["STRING_UNICODE_DIGIT_2"]=16]="STRING_UNICODE_DIGIT_2",t[t["STRING_UNICODE_DIGIT_3"]=17]="STRING_UNICODE_DIGIT_3",t[t["STRING_UNICODE_DIGIT_4"]=18]="STRING_UNICODE_DIGIT_4",t[t["STRING_INCOMPLETE_CHAR"]=19]="STRING_INCOMPLETE_CHAR",t[t["NUMBER_AFTER_INITIAL_MINUS"]=20]="NUMBER_AFTER_INITIAL_MINUS",t[t["NUMBER_AFTER_INITIAL_ZERO"]=21]="NUMBER_AFTER_INITIAL_ZERO",t[t["NUMBER_AFTER_INITIAL_NON_ZERO"]=22]="NUMBER_AFTER_INITIAL_NON_ZERO",t[t["NUMBER_AFTER_FULL_STOP"]=23]="NUMBER_AFTER_FULL_STOP",t[t["NUMBER_AFTER_DECIMAL"]=24]="NUMBER_AFTER_DECIMAL",t[t["NUMBER_AFTER_E"]=25]="NUMBER_AFTER_E",t[t["NUMBER_AFTER_E_AND_SIGN"]=26]="NUMBER_AFTER_E_AND_SIGN",t[t["NUMBER_AFTER_E_AND_DIGIT"]=27]="NUMBER_AFTER_E_AND_DIGIT",t[t["SEPARATOR"]=28]="SEPARATOR"})(u||(u={}));var S,w,E={stringBufferSize:0,numberBufferSize:0,separator:void 0},L=function(t){function e(n){var r=t.call(this,n)||this;return Object.setPrototypeOf(r,e.prototype),r}return n(e,t),e}(Error),A=function(){function e(t){this.state=u.START,this.separatorIndex=0,this.unicode=void 0,this.highSurrogate=void 0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.char_split_buffer=new Uint8Array(4),this.encoder=new TextEncoder,this.offset=-1,t=i(i({},E),t),this.bufferedString=t.stringBufferSize&&t.stringBufferSize>4?new l(t.stringBufferSize):new c,this.bufferedNumber=t.numberBufferSize&&t.numberBufferSize>0?new l(t.numberBufferSize):new c,this.separator=t.separator,this.separatorBytes=t.separator?this.encoder.encode(t.separator):void 0}return Object.defineProperty(e.prototype,"isEnded",{get:function(){return this.state===u.ENDED},enumerable:!1,configurable:!0}),e.prototype.write=function(e){var n;if(e instanceof Uint8Array)n=e;else if("string"===typeof e)n=this.encoder.encode(e);else{if(!("object"===typeof e&&"buffer"in e||Array.isArray(e)))return void this.error(new TypeError("Unexpected type. The `write` function only accepts Arrays, TypedArrays and Strings."));n=Uint8Array.from(e)}for(var r=0;r<n.length;r+=1){var i=n[r];switch(this.state){case u.START:if(this.offset+=1,this.separatorBytes&&i===this.separatorBytes[0]){if(1===this.separatorBytes.length){this.state=u.START,this.onToken(t.TokenType.SEPARATOR,this.separator,this.offset+this.separatorBytes.length-1);continue}this.state=u.SEPARATOR;continue}if(i===a.SPACE||i===a.NEWLINE||i===a.CARRIAGE_RETURN||i===a.TAB)continue;if(i===a.LEFT_CURLY_BRACKET){this.onToken(d,"{",this.offset);continue}if(i===a.RIGHT_CURLY_BRACKET){this.onToken(h,"}",this.offset);continue}if(i===a.LEFT_SQUARE_BRACKET){this.onToken(f,"[",this.offset);continue}if(i===a.RIGHT_SQUARE_BRACKET){this.onToken(p,"]",this.offset);continue}if(i===a.COLON){this.onToken(_,":",this.offset);continue}if(i===a.COMMA){this.onToken(g,",",this.offset);continue}if(i===a.LATIN_SMALL_LETTER_T){this.state=u.TRUE1;continue}if(i===a.LATIN_SMALL_LETTER_F){this.state=u.FALSE1;continue}if(i===a.LATIN_SMALL_LETTER_N){this.state=u.NULL1;continue}if(i===a.QUOTATION_MARK){this.bufferedString.reset(),this.state=u.STRING_DEFAULT;continue}if(i>=a.DIGIT_ONE&&i<=a.DIGIT_NINE){this.bufferedNumber.reset(),this.bufferedNumber.appendChar(i),this.state=u.NUMBER_AFTER_INITIAL_NON_ZERO;continue}if(i===a.DIGIT_ZERO){this.bufferedNumber.reset(),this.bufferedNumber.appendChar(i),this.state=u.NUMBER_AFTER_INITIAL_ZERO;continue}if(i===a.HYPHEN_MINUS){this.bufferedNumber.reset(),this.bufferedNumber.appendChar(i),this.state=u.NUMBER_AFTER_INITIAL_MINUS;continue}break;case u.STRING_DEFAULT:if(i===a.QUOTATION_MARK){var s=this.bufferedString.toString();this.state=u.START,this.onToken(v,s,this.offset),this.offset+=this.bufferedString.byteLength+1;continue}if(i===a.REVERSE_SOLIDUS){this.state=u.STRING_AFTER_BACKSLASH;continue}if(i>=128){if(this.bytes_in_sequence=i>=194&&i<=223?2:i<=239?3:4,this.bytes_in_sequence<=n.length-r){this.bufferedString.appendBuf(n,r,r+this.bytes_in_sequence),r+=this.bytes_in_sequence-1;continue}this.bytes_remaining=r+this.bytes_in_sequence-n.length,this.char_split_buffer.set(n.subarray(r)),r=n.length-1,this.state=u.STRING_INCOMPLETE_CHAR;continue}if(i>=a.SPACE){this.bufferedString.appendChar(i);continue}break;case u.STRING_INCOMPLETE_CHAR:this.char_split_buffer.set(n.subarray(r,r+this.bytes_remaining),this.bytes_in_sequence-this.bytes_remaining),this.bufferedString.appendBuf(this.char_split_buffer,0,this.bytes_in_sequence),r=this.bytes_remaining-1,this.state=u.STRING_DEFAULT;continue;case u.STRING_AFTER_BACKSLASH:var c=o[i];if(c){this.bufferedString.appendChar(c),this.state=u.STRING_DEFAULT;continue}if(i===a.LATIN_SMALL_LETTER_U){this.unicode="",this.state=u.STRING_UNICODE_DIGIT_1;continue}break;case u.STRING_UNICODE_DIGIT_1:case u.STRING_UNICODE_DIGIT_2:case u.STRING_UNICODE_DIGIT_3:if(i>=a.DIGIT_ZERO&&i<=a.DIGIT_NINE||i>=a.LATIN_CAPITAL_LETTER_A&&i<=a.LATIN_CAPITAL_LETTER_F||i>=a.LATIN_SMALL_LETTER_A&&i<=a.LATIN_SMALL_LETTER_F){this.unicode+=String.fromCharCode(i),this.state+=1;continue}break;case u.STRING_UNICODE_DIGIT_4:if(i>=a.DIGIT_ZERO&&i<=a.DIGIT_NINE||i>=a.LATIN_CAPITAL_LETTER_A&&i<=a.LATIN_CAPITAL_LETTER_F||i>=a.LATIN_SMALL_LETTER_A&&i<=a.LATIN_SMALL_LETTER_F){var l=parseInt(this.unicode+String.fromCharCode(i),16);void 0===this.highSurrogate?l>=55296&&l<=56319?this.highSurrogate=l:this.bufferedString.appendBuf(this.encoder.encode(String.fromCharCode(l))):(l>=56320&&l<=57343?this.bufferedString.appendBuf(this.encoder.encode(String.fromCharCode(this.highSurrogate,l))):this.bufferedString.appendBuf(this.encoder.encode(String.fromCharCode(this.highSurrogate))),this.highSurrogate=void 0),this.state=u.STRING_DEFAULT;continue}case u.NUMBER_AFTER_INITIAL_MINUS:if(i===a.DIGIT_ZERO){this.bufferedNumber.appendChar(i),this.state=u.NUMBER_AFTER_INITIAL_ZERO;continue}if(i>=a.DIGIT_ONE&&i<=a.DIGIT_NINE){this.bufferedNumber.appendChar(i),this.state=u.NUMBER_AFTER_INITIAL_NON_ZERO;continue}break;case u.NUMBER_AFTER_INITIAL_ZERO:if(i===a.FULL_STOP){this.bufferedNumber.appendChar(i),this.state=u.NUMBER_AFTER_FULL_STOP;continue}if(i===a.LATIN_SMALL_LETTER_E||i===a.LATIN_CAPITAL_LETTER_E){this.bufferedNumber.appendChar(i),this.state=u.NUMBER_AFTER_E;continue}r-=1,this.state=u.START,this.emitNumber();continue;case u.NUMBER_AFTER_INITIAL_NON_ZERO:if(i>=a.DIGIT_ZERO&&i<=a.DIGIT_NINE){this.bufferedNumber.appendChar(i);continue}if(i===a.FULL_STOP){this.bufferedNumber.appendChar(i),this.state=u.NUMBER_AFTER_FULL_STOP;continue}if(i===a.LATIN_SMALL_LETTER_E||i===a.LATIN_CAPITAL_LETTER_E){this.bufferedNumber.appendChar(i),this.state=u.NUMBER_AFTER_E;continue}r-=1,this.state=u.START,this.emitNumber();continue;case u.NUMBER_AFTER_FULL_STOP:if(i>=a.DIGIT_ZERO&&i<=a.DIGIT_NINE){this.bufferedNumber.appendChar(i),this.state=u.NUMBER_AFTER_DECIMAL;continue}break;case u.NUMBER_AFTER_DECIMAL:if(i>=a.DIGIT_ZERO&&i<=a.DIGIT_NINE){this.bufferedNumber.appendChar(i);continue}if(i===a.LATIN_SMALL_LETTER_E||i===a.LATIN_CAPITAL_LETTER_E){this.bufferedNumber.appendChar(i),this.state=u.NUMBER_AFTER_E;continue}r-=1,this.state=u.START,this.emitNumber();continue;case u.NUMBER_AFTER_E:if(i===a.PLUS_SIGN||i===a.HYPHEN_MINUS){this.bufferedNumber.appendChar(i),this.state=u.NUMBER_AFTER_E_AND_SIGN;continue}case u.NUMBER_AFTER_E_AND_SIGN:if(i>=a.DIGIT_ZERO&&i<=a.DIGIT_NINE){this.bufferedNumber.appendChar(i),this.state=u.NUMBER_AFTER_E_AND_DIGIT;continue}break;case u.NUMBER_AFTER_E_AND_DIGIT:if(i>=a.DIGIT_ZERO&&i<=a.DIGIT_NINE){this.bufferedNumber.appendChar(i);continue}r-=1,this.state=u.START,this.emitNumber();continue;case u.TRUE1:if(i===a.LATIN_SMALL_LETTER_R){this.state=u.TRUE2;continue}break;case u.TRUE2:if(i===a.LATIN_SMALL_LETTER_U){this.state=u.TRUE3;continue}break;case u.TRUE3:if(i===a.LATIN_SMALL_LETTER_E){this.state=u.START,this.onToken(m,!0,this.offset),this.offset+=3;continue}break;case u.FALSE1:if(i===a.LATIN_SMALL_LETTER_A){this.state=u.FALSE2;continue}break;case u.FALSE2:if(i===a.LATIN_SMALL_LETTER_L){this.state=u.FALSE3;continue}break;case u.FALSE3:if(i===a.LATIN_SMALL_LETTER_S){this.state=u.FALSE4;continue}break;case u.FALSE4:if(i===a.LATIN_SMALL_LETTER_E){this.state=u.START,this.onToken(b,!1,this.offset),this.offset+=4;continue}break;case u.NULL1:if(i===a.LATIN_SMALL_LETTER_U){this.state=u.NULL2;continue}break;case u.NULL2:if(i===a.LATIN_SMALL_LETTER_L){this.state=u.NULL3;continue}break;case u.NULL3:if(i===a.LATIN_SMALL_LETTER_L){this.state=u.START,this.onToken(y,null,this.offset),this.offset+=3;continue}break;case u.SEPARATOR:if(this.separatorIndex+=1,!this.separatorBytes||i!==this.separatorBytes[this.separatorIndex])break;this.separatorIndex===this.separatorBytes.length-1&&(this.state=u.START,this.onToken(t.TokenType.SEPARATOR,this.separator,this.offset+this.separatorIndex),this.separatorIndex=0);continue;case u.ENDED:if(i===a.SPACE||i===a.NEWLINE||i===a.CARRIAGE_RETURN||i===a.TAB)continue}return void this.error(new L('Unexpected "'.concat(String.fromCharCode(i),'" at position "').concat(r,'" in state ').concat(u[this.state])))}},e.prototype.emitNumber=function(){this.onToken(T,this.parseNumber(this.bufferedNumber.toString()),this.offset),this.offset+=this.bufferedNumber.byteLength-1},e.prototype.parseNumber=function(t){return Number(t)},e.prototype.error=function(t){this.state!==u.ENDED&&(this.state=u.ERROR),this.onError(t)},e.prototype.end=function(){switch(this.state){case u.NUMBER_AFTER_INITIAL_ZERO:case u.NUMBER_AFTER_INITIAL_NON_ZERO:case u.NUMBER_AFTER_DECIMAL:case u.NUMBER_AFTER_E_AND_DIGIT:this.state=u.ENDED,this.emitNumber(),this.onEnd();break;case u.START:case u.ERROR:case u.SEPARATOR:this.state=u.ENDED,this.onEnd();break;default:this.error(new L("Tokenizer ended in the middle of a token (state: ".concat(u[this.state],"). Either not all the data was received or the data was invalid.")))}},e.prototype.onToken=function(t,e,n){throw new L('Can\'t emit tokens before the "onToken" callback has been set up.')},e.prototype.onError=function(t){throw t},e.prototype.onEnd=function(){},e}(),D=t.TokenType.LEFT_BRACE,I=t.TokenType.RIGHT_BRACE,R=t.TokenType.LEFT_BRACKET,k=t.TokenType.RIGHT_BRACKET,x=t.TokenType.COLON,C=t.TokenType.COMMA,N=t.TokenType.TRUE,B=t.TokenType.FALSE,M=t.TokenType.NULL,O=t.TokenType.STRING,P=t.TokenType.NUMBER,j=t.TokenType.SEPARATOR;(function(t){t[t["VALUE"]=0]="VALUE",t[t["KEY"]=1]="KEY",t[t["COLON"]=2]="COLON",t[t["COMMA"]=3]="COMMA",t[t["ENDED"]=4]="ENDED",t[t["ERROR"]=5]="ERROR",t[t["SEPARATOR"]=6]="SEPARATOR"})(S||(S={})),function(t){t[t["OBJECT"]=0]="OBJECT",t[t["ARRAY"]=1]="ARRAY"}(w||(w={}));var U={paths:void 0,keepStack:!0,separator:void 0},Z=function(t){function e(n){var r=t.call(this,n)||this;return Object.setPrototypeOf(r,e.prototype),r}return n(e,t),e}(Error),G=function(){function e(t){this.state=S.VALUE,this.mode=void 0,this.key=void 0,this.value=void 0,this.stack=[],t=i(i({},U),t),t.paths&&(this.paths=t.paths.map((function(t){if(void 0!==t&&"$*"!==t){if(!t.startsWith("$"))throw new Z('Invalid selector "'.concat(t,'". Should start with "$".'));var e=t.split(".").slice(1);if(e.includes(""))throw new Z('Invalid selector "'.concat(t,'". ".." syntax not supported.'));return e}}))),this.keepStack=t.keepStack,this.separator=t.separator}return e.prototype.shouldEmit=function(){var t=this;return!this.paths||this.paths.some((function(e){var n;if(void 0===e)return!0;if(e.length!==t.stack.length)return!1;for(var r=0;r<e.length-1;r++){var a=e[r],i=t.stack[r+1].key;if("*"!==a&&a!==i)return!1}var o=e[e.length-1];return"*"===o||o===(null===(n=t.key)||void 0===n?void 0:n.toString())}))},e.prototype.push=function(){this.stack.push({key:this.key,value:this.value,mode:this.mode,emit:this.shouldEmit()})},e.prototype.pop=function(){var t,e,n=this.value;t=this.stack.pop(),this.key=t.key,this.value=t.value,this.mode=t.mode,e=t.emit,this.state=void 0!==this.mode?S.COMMA:S.VALUE,this.emit(n,e)},e.prototype.emit=function(t,e){!this.keepStack&&this.value&&this.stack.every((function(t){return!t.emit}))&&delete this.value[this.key],e&&this.onValue(t,this.key,this.value,this.stack),0===this.stack.length&&(this.separator?this.state=S.SEPARATOR:void 0===this.separator&&this.end())},Object.defineProperty(e.prototype,"isEnded",{get:function(){return this.state===S.ENDED},enumerable:!1,configurable:!0}),e.prototype.write=function(e,n){if(this.state===S.VALUE){if(e===O||e===P||e===N||e===B||e===M)return this.mode===w.OBJECT?(this.value[this.key]=n,this.state=S.COMMA):this.mode===w.ARRAY&&(this.value.push(n),this.state=S.COMMA),void this.emit(n,this.shouldEmit());if(e===D){if(this.push(),this.mode===w.OBJECT)this.value=this.value[this.key]={};else if(this.mode===w.ARRAY){var r={};this.value.push(r),this.value=r}else this.value={};return this.mode=w.OBJECT,this.state=S.KEY,void(this.key=void 0)}if(e===R){if(this.push(),this.mode===w.OBJECT)this.value=this.value[this.key]=[];else if(this.mode===w.ARRAY){r=[];this.value.push(r),this.value=r}else this.value=[];return this.mode=w.ARRAY,this.state=S.VALUE,void(this.key=0)}if(this.mode===w.ARRAY&&e===k&&0===this.value.length)return void this.pop()}if(this.state===S.KEY){if(e===O)return this.key=n,void(this.state=S.COLON);if(e===I&&0===Object.keys(this.value).length)return void this.pop()}if(this.state!==S.COLON||e!==x){if(this.state===S.COMMA){if(e===C){if(this.mode===w.ARRAY)return this.state=S.VALUE,void(this.key+=1);if(this.mode===w.OBJECT)return void(this.state=S.KEY)}if(e===I&&this.mode===w.OBJECT||e===k&&this.mode===w.ARRAY)return void this.pop()}this.state!==S.SEPARATOR||e!==j||n!==this.separator?this.error(new Z("Unexpected ".concat(t.TokenType[e]," (").concat(JSON.stringify(n),") in state ").concat(S[this.state]))):this.state=S.VALUE}else this.state=S.VALUE},e.prototype.error=function(t){this.state!==S.ENDED&&(this.state=S.ERROR),this.onError(t)},e.prototype.end=function(){this.state!==S.VALUE&&this.state!==S.SEPARATOR||this.stack.length>0?this.error(new Error("Parser ended in mid-parsing (state: ".concat(S[this.state],"). Either not all the data was received or the data was invalid."))):(this.state=S.ENDED,this.onEnd())},e.prototype.onValue=function(t,e,n,r){throw new Z('Can\'t emit data before the "onValue" callback has been set up.')},e.prototype.onError=function(t){throw t},e.prototype.onEnd=function(){},e}(),F=function(){function t(t){var e=this;void 0===t&&(t={}),this.tokenizer=new A(t),this.tokenParser=new G(t),this.tokenizer.onToken=this.tokenParser.write.bind(this.tokenParser),this.tokenizer.onEnd=function(){e.tokenParser.isEnded||e.tokenParser.end()},this.tokenParser.onError=this.tokenizer.error.bind(this.tokenizer),this.tokenParser.onEnd=function(){e.tokenizer.isEnded||e.tokenizer.end()}}return Object.defineProperty(t.prototype,"isEnded",{get:function(){return this.tokenizer.isEnded&&this.tokenParser.isEnded},enumerable:!1,configurable:!0}),t.prototype.write=function(t){this.tokenizer.write(t)},t.prototype.end=function(){this.tokenizer.end()},Object.defineProperty(t.prototype,"onToken",{set:function(t){this.tokenizer.onToken=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onValue",{set:function(t){this.tokenParser.onValue=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onError",{set:function(t){this.tokenizer.onError=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onEnd",{set:function(t){var e=this;this.tokenParser.onEnd=function(){e.tokenizer.isEnded||e.tokenizer.end(),t.call(e.tokenParser)}},enumerable:!1,configurable:!0}),t}();t.JSONParser=F,t.TokenParser=G,t.Tokenizer=A,t.utf8=s,Object.defineProperty(t,"__esModule",{value:!0})}))},a9ff:function(t,e,n){const r=n("1476");function a(t={stringFormatter:r()}){return e=>null===e?"":(e=JSON.stringify(e),void 0===e?"":('"'===e[0]&&(e=e.replace(/^"(.+)"$/,"$1")),t.stringFormatter(e)))}t.exports=a},abe6:function(t,e,n){"use strict";const{Readable:r}=n("d485"),a=n("ee72");class i{constructor(t,e){this.opts=t,this.transformOpts=e}parse(t){if("string"===typeof t||ArrayBuffer.isView(t)?t=r.from(t,{objectMode:!1}):Array.isArray(t)?t=r.from(t.filter(t=>null!==t)):"object"!==typeof t||t instanceof r||(t=r.from([t])),!(t instanceof r))throw new Error("Data should be a JSON object, JSON array, typed array, string or stream");return t.pipe(new a(this.opts,{objectMode:t.readableObjectMode,...this.transformOpts}))}}t.exports=i},ad71:function(t,e,n){"use strict";(function(e,r){var a=n("966d");t.exports=S;var i,o=n("e3db");S.ReadableState=T;n("faa1").EventEmitter;var s=function(t,e){return t.listeners(e).length},c=n("429b"),l=n("8707").Buffer,u=("undefined"!==typeof e?e:"undefined"!==typeof window?window:"undefined"!==typeof self?self:{}).Uint8Array||function(){};function d(t){return l.from(t)}function h(t){return l.isBuffer(t)||t instanceof u}var f=Object.create(n("3a7c"));f.inherits=n("3fb5");var p=n(1),_=void 0;_=p&&p.debuglog?p.debuglog("stream"):function(){};var g,m=n("5e1a"),b=n("4681");f.inherits(S,c);var y=["error","close","destroy","pause","resume"];function v(t,e,n){if("function"===typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?o(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}function T(t,e){i=i||n("b19a"),t=t||{};var r=e instanceof i;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var a=t.highWaterMark,o=t.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=a||0===a?a:r&&(o||0===o)?o:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(g||(g=n("7d72").StringDecoder),this.decoder=new g(t.encoding),this.encoding=t.encoding)}function S(t){if(i=i||n("b19a"),!(this instanceof S))return new S(t);this._readableState=new T(t,this),this.readable=!0,t&&("function"===typeof t.read&&(this._read=t.read),"function"===typeof t.destroy&&(this._destroy=t.destroy)),c.call(this)}function w(t,e,n,r,a){var i,o=t._readableState;null===e?(o.reading=!1,k(t,o)):(a||(i=L(o,e)),i?t.emit("error",i):o.objectMode||e&&e.length>0?("string"===typeof e||o.objectMode||Object.getPrototypeOf(e)===l.prototype||(e=d(e)),r?o.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):E(t,o,e,!0):o.ended?t.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!n?(e=o.decoder.write(e),o.objectMode||0!==e.length?E(t,o,e,!1):N(t,o)):E(t,o,e,!1))):r||(o.reading=!1));return A(o)}function E(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&x(t)),N(t,e)}function L(t,e){var n;return h(e)||"string"===typeof e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function A(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}Object.defineProperty(S.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),S.prototype.destroy=b.destroy,S.prototype._undestroy=b.undestroy,S.prototype._destroy=function(t,e){this.push(null),e(t)},S.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"===typeof t&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=l.from(t,e),e=""),n=!0),w(this,t,e,!1,n)},S.prototype.unshift=function(t){return w(this,t,null,!0,!1)},S.prototype.isPaused=function(){return!1===this._readableState.flowing},S.prototype.setEncoding=function(t){return g||(g=n("7d72").StringDecoder),this._readableState.decoder=new g(t),this._readableState.encoding=t,this};var D=8388608;function I(t){return t>=D?t=D:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function R(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=I(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function k(t,e){if(!e.ended){if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,x(t)}}function x(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(_("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?a.nextTick(C,t):C(t))}function C(t){_("emit readable"),t.emit("readable"),U(t)}function N(t,e){e.readingMore||(e.readingMore=!0,a.nextTick(B,t,e))}function B(t,e){var n=e.length;while(!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark){if(_("maybeReadMore read 0"),t.read(0),n===e.length)break;n=e.length}e.readingMore=!1}function M(t){return function(){var e=t._readableState;_("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&s(t,"data")&&(e.flowing=!0,U(t))}}function O(t){_("readable nexttick read 0"),t.read(0)}function P(t,e){e.resumeScheduled||(e.resumeScheduled=!0,a.nextTick(j,t,e))}function j(t,e){e.reading||(_("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),U(t),e.flowing&&!e.reading&&t.read(0)}function U(t){var e=t._readableState;_("flow",e.flowing);while(e.flowing&&null!==t.read());}function Z(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=G(t,e.buffer,e.decoder),n);var n}function G(t,e,n){var r;return t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():n?F(t,e):V(t,e),r}function F(t,e){var n=e.head,r=1,a=n.data;t-=a.length;while(n=n.next){var i=n.data,o=t>i.length?i.length:t;if(o===i.length?a+=i:a+=i.slice(0,t),t-=o,0===t){o===i.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=i.slice(o));break}++r}return e.length-=r,a}function V(t,e){var n=l.allocUnsafe(t),r=e.head,a=1;r.data.copy(n),t-=r.data.length;while(r=r.next){var i=r.data,o=t>i.length?i.length:t;if(i.copy(n,n.length-t,0,o),t-=o,0===t){o===i.length?(++a,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=i.slice(o));break}++a}return e.length-=a,n}function H(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,a.nextTick(z,e,t))}function z(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function Y(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}S.prototype.read=function(t){_("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return _("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?H(this):x(this),null;if(t=R(t,e),0===t&&e.ended)return 0===e.length&&H(this),null;var r,a=e.needReadable;return _("need readable",a),(0===e.length||e.length-t<e.highWaterMark)&&(a=!0,_("length less than watermark",a)),e.ended||e.reading?(a=!1,_("reading or ended",a)):a&&(_("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=R(n,e))),r=t>0?Z(t,e):null,null===r?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&H(this)),null!==r&&this.emit("data",r),r},S.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},S.prototype.pipe=function(t,e){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=t;break;case 1:i.pipes=[i.pipes,t];break;default:i.pipes.push(t);break}i.pipesCount+=1,_("pipe count=%d opts=%j",i.pipesCount,e);var o=(!e||!1!==e.end)&&t!==r.stdout&&t!==r.stderr,c=o?u:T;function l(t,e){_("onunpipe"),t===n&&e&&!1===e.hasUnpiped&&(e.hasUnpiped=!0,f())}function u(){_("onend"),t.end()}i.endEmitted?a.nextTick(c):n.once("end",c),t.on("unpipe",l);var d=M(n);t.on("drain",d);var h=!1;function f(){_("cleanup"),t.removeListener("close",b),t.removeListener("finish",y),t.removeListener("drain",d),t.removeListener("error",m),t.removeListener("unpipe",l),n.removeListener("end",u),n.removeListener("end",T),n.removeListener("data",g),h=!0,!i.awaitDrain||t._writableState&&!t._writableState.needDrain||d()}var p=!1;function g(e){_("ondata"),p=!1;var r=t.write(e);!1!==r||p||((1===i.pipesCount&&i.pipes===t||i.pipesCount>1&&-1!==Y(i.pipes,t))&&!h&&(_("false write response, pause",i.awaitDrain),i.awaitDrain++,p=!0),n.pause())}function m(e){_("onerror",e),T(),t.removeListener("error",m),0===s(t,"error")&&t.emit("error",e)}function b(){t.removeListener("finish",y),T()}function y(){_("onfinish"),t.removeListener("close",b),T()}function T(){_("unpipe"),n.unpipe(t)}return n.on("data",g),v(t,"error",m),t.once("close",b),t.once("finish",y),t.emit("pipe",n),i.flowing||(_("pipe resume"),n.resume()),t},S.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n)),this;if(!t){var r=e.pipes,a=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var i=0;i<a;i++)r[i].emit("unpipe",this,{hasUnpiped:!1});return this}var o=Y(e.pipes,t);return-1===o||(e.pipes.splice(o,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n)),this},S.prototype.on=function(t,e){var n=c.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&x(this):a.nextTick(O,this))}return n},S.prototype.addListener=S.prototype.on,S.prototype.resume=function(){var t=this._readableState;return t.flowing||(_("resume"),t.flowing=!0,P(this,t)),this},S.prototype.pause=function(){return _("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(_("pause"),this._readableState.flowing=!1,this.emit("pause")),this},S.prototype.wrap=function(t){var e=this,n=this._readableState,r=!1;for(var a in t.on("end",(function(){if(_("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(a){if(_("wrapped data"),n.decoder&&(a=n.decoder.write(a)),(!n.objectMode||null!==a&&void 0!==a)&&(n.objectMode||a&&a.length)){var i=e.push(a);i||(r=!0,t.pause())}})),t)void 0===this[a]&&"function"===typeof t[a]&&(this[a]=function(e){return function(){return t[e].apply(t,arguments)}}(a));for(var i=0;i<y.length;i++)t.on(y[i],this.emit.bind(this,y[i]));return this._read=function(e){_("wrapped _read",e),r&&(r=!1,t.resume())},this},Object.defineProperty(S.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),S._fromList=Z}).call(this,n("c8ba"),n("4362"))},aecd:function(t,e){function n(t,e){return t.toFixed(e)}function r(t,e){return t.replace(".",e)}function a(t={}){return t.separator?t.decimals?e=>r(n(e,t.decimals),t.separator):e=>r(e.toString(),t.separator):t.decimals?e=>n(e,t.decimals):t=>t.toString()}t.exports=a},b19a:function(t,e,n){"use strict";var r=n("966d"),a=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=d;var i=Object.create(n("3a7c"));i.inherits=n("3fb5");var o=n("ad71"),s=n("dc14");i.inherits(d,o);for(var c=a(s.prototype),l=0;l<c.length;l++){var u=c[l];d.prototype[u]||(d.prototype[u]=s.prototype[u])}function d(t){if(!(this instanceof d))return new d(t);o.call(this,t),s.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",h)}function h(){this.allowHalfOpen||this._writableState.ended||r.nextTick(f,this)}function f(t){t.end()}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(d.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),d.prototype._destroy=function(t,e){this.push(null),this.end(),r.nextTick(e,t)}},b256:function(t,e,n){"use strict";n("3c60")},b639:function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n("1fb5"),a=n("9152"),i=n("e3db");function o(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"===typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}function s(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function c(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=l.prototype):(null===t&&(t=new l(e)),t.length=e),t}function l(t,e,n){if(!l.TYPED_ARRAY_SUPPORT&&!(this instanceof l))return new l(t,e,n);if("number"===typeof t){if("string"===typeof e)throw new Error("If encoding is specified then the first argument must be a string");return f(this,t)}return u(this,t,e,n)}function u(t,e,n,r){if("number"===typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer?g(t,e,n,r):"string"===typeof e?p(t,e,n):m(t,e)}function d(t){if("number"!==typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e,n,r){return d(e),e<=0?c(t,e):void 0!==n?"string"===typeof r?c(t,e).fill(n,r):c(t,e).fill(n):c(t,e)}function f(t,e){if(d(e),t=c(t,e<0?0:0|b(e)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function p(t,e,n){if("string"===typeof n&&""!==n||(n="utf8"),!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|v(e,n);t=c(t,r);var a=t.write(e,n);return a!==r&&(t=t.slice(0,a)),t}function _(t,e){var n=e.length<0?0:0|b(e.length);t=c(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function g(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),l.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=l.prototype):t=_(t,e),t}function m(t,e){if(l.isBuffer(e)){var n=0|b(e.length);return t=c(t,n),0===t.length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!==typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!==typeof e.length||et(e.length)?c(t,0):_(t,e);if("Buffer"===e.type&&i(e.data))return _(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function b(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function y(t){return+t!=t&&(t=0),l.alloc(+t)}function v(t,e){if(l.isBuffer(t))return t.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!==typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return K(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return X(t).length;default:if(r)return K(t).length;e=(""+e).toLowerCase(),r=!0}}function T(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";t||(t="utf8");while(1)switch(t){case"hex":return P(this,e,n);case"utf8":case"utf-8":return C(this,e,n);case"ascii":return M(this,e,n);case"latin1":case"binary":return O(this,e,n);case"base64":return x(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function S(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function w(t,e,n,r,a){if(0===t.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=a?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(a)return-1;n=t.length-1}else if(n<0){if(!a)return-1;n=0}if("string"===typeof e&&(e=l.from(e,r)),l.isBuffer(e))return 0===e.length?-1:E(t,e,n,r,a);if("number"===typeof e)return e&=255,l.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):E(t,[e],n,r,a);throw new TypeError("val must be string, number or Buffer")}function E(t,e,n,r,a){var i,o=1,s=t.length,c=e.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;o=2,s/=2,c/=2,n/=2}function l(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(a){var u=-1;for(i=n;i<s;i++)if(l(t,i)===l(e,-1===u?0:i-u)){if(-1===u&&(u=i),i-u+1===c)return u*o}else-1!==u&&(i-=i-u),u=-1}else for(n+c>s&&(n=s-c),i=n;i>=0;i--){for(var d=!0,h=0;h<c;h++)if(l(t,i+h)!==l(e,h)){d=!1;break}if(d)return i}return-1}function L(t,e,n,r){n=Number(n)||0;var a=t.length-n;r?(r=Number(r),r>a&&(r=a)):r=a;var i=e.length;if(i%2!==0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var o=0;o<r;++o){var s=parseInt(e.substr(2*o,2),16);if(isNaN(s))return o;t[n+o]=s}return o}function A(t,e,n,r){return tt(K(e,t.length-n),t,n,r)}function D(t,e,n,r){return tt(J(e),t,n,r)}function I(t,e,n,r){return D(t,e,n,r)}function R(t,e,n,r){return tt(X(e),t,n,r)}function k(t,e,n,r){return tt(Q(e,t.length-n),t,n,r)}function x(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function C(t,e,n){n=Math.min(t.length,n);var r=[],a=e;while(a<n){var i,o,s,c,l=t[a],u=null,d=l>239?4:l>223?3:l>191?2:1;if(a+d<=n)switch(d){case 1:l<128&&(u=l);break;case 2:i=t[a+1],128===(192&i)&&(c=(31&l)<<6|63&i,c>127&&(u=c));break;case 3:i=t[a+1],o=t[a+2],128===(192&i)&&128===(192&o)&&(c=(15&l)<<12|(63&i)<<6|63&o,c>2047&&(c<55296||c>57343)&&(u=c));break;case 4:i=t[a+1],o=t[a+2],s=t[a+3],128===(192&i)&&128===(192&o)&&128===(192&s)&&(c=(15&l)<<18|(63&i)<<12|(63&o)<<6|63&s,c>65535&&c<1114112&&(u=c))}null===u?(u=65533,d=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),a+=d}return B(r)}e.Buffer=l,e.SlowBuffer=y,e.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:o(),e.kMaxLength=s(),l.poolSize=8192,l._augment=function(t){return t.__proto__=l.prototype,t},l.from=function(t,e,n){return u(null,t,e,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(t,e,n){return h(null,t,e,n)},l.allocUnsafe=function(t){return f(null,t)},l.allocUnsafeSlow=function(t){return f(null,t)},l.isBuffer=function(t){return!(null==t||!t._isBuffer)},l.compare=function(t,e){if(!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,a=0,i=Math.min(n,r);a<i;++a)if(t[a]!==e[a]){n=t[a],r=e[a];break}return n<r?-1:r<n?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!i(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=l.allocUnsafe(e),a=0;for(n=0;n<t.length;++n){var o=t[n];if(!l.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,a),a+=o.length}return r},l.byteLength=v,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)S(this,e,e+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)S(this,e,e+3),S(this,e+1,e+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)S(this,e,e+7),S(this,e+1,e+6),S(this,e+2,e+5),S(this,e+3,e+4);return this},l.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?C(this,0,t):T.apply(this,arguments)},l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},l.prototype.compare=function(t,e,n,r,a){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===a&&(a=this.length),e<0||n>t.length||r<0||a>this.length)throw new RangeError("out of range index");if(r>=a&&e>=n)return 0;if(r>=a)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,a>>>=0,this===t)return 0;for(var i=a-r,o=n-e,s=Math.min(i,o),c=this.slice(r,a),u=t.slice(e,n),d=0;d<s;++d)if(c[d]!==u[d]){i=c[d],o=u[d];break}return i<o?-1:o<i?1:0},l.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},l.prototype.indexOf=function(t,e,n){return w(this,t,e,n,!0)},l.prototype.lastIndexOf=function(t,e,n){return w(this,t,e,n,!1)},l.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"===typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var a=this.length-e;if((void 0===n||n>a)&&(n=a),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return L(this,t,e,n);case"utf8":case"utf-8":return A(this,t,e,n);case"ascii":return D(this,t,e,n);case"latin1":case"binary":return I(this,t,e,n);case"base64":return R(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,e,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var N=4096;function B(t){var e=t.length;if(e<=N)return String.fromCharCode.apply(String,t);var n="",r=0;while(r<e)n+=String.fromCharCode.apply(String,t.slice(r,r+=N));return n}function M(t,e,n){var r="";n=Math.min(t.length,n);for(var a=e;a<n;++a)r+=String.fromCharCode(127&t[a]);return r}function O(t,e,n){var r="";n=Math.min(t.length,n);for(var a=e;a<n;++a)r+=String.fromCharCode(t[a]);return r}function P(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var a="",i=e;i<n;++i)a+=$(t[i]);return a}function j(t,e,n){for(var r=t.slice(e,n),a="",i=0;i<r.length;i+=2)a+=String.fromCharCode(r[i]+256*r[i+1]);return a}function U(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function Z(t,e,n,r,a,i){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>a||e<i)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function G(t,e,n,r){e<0&&(e=65535+e+1);for(var a=0,i=Math.min(t.length-n,2);a<i;++a)t[n+a]=(e&255<<8*(r?a:1-a))>>>8*(r?a:1-a)}function F(t,e,n,r){e<0&&(e=4294967295+e+1);for(var a=0,i=Math.min(t.length-n,4);a<i;++a)t[n+a]=e>>>8*(r?a:3-a)&255}function V(t,e,n,r,a,i){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function H(t,e,n,r,i){return i||V(t,e,n,4,34028234663852886e22,-34028234663852886e22),a.write(t,e,n,r,23,4),n+4}function z(t,e,n,r,i){return i||V(t,e,n,8,17976931348623157e292,-17976931348623157e292),a.write(t,e,n,r,52,8),n+8}l.prototype.slice=function(t,e){var n,r=this.length;if(t=~~t,e=void 0===e?r:~~e,t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),e<t&&(e=t),l.TYPED_ARRAY_SUPPORT)n=this.subarray(t,e),n.__proto__=l.prototype;else{var a=e-t;n=new l(a,void 0);for(var i=0;i<a;++i)n[i]=this[i+t]}return n},l.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||U(t,e,this.length);var r=this[t],a=1,i=0;while(++i<e&&(a*=256))r+=this[t+i]*a;return r},l.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||U(t,e,this.length);var r=this[t+--e],a=1;while(e>0&&(a*=256))r+=this[t+--e]*a;return r},l.prototype.readUInt8=function(t,e){return e||U(t,1,this.length),this[t]},l.prototype.readUInt16LE=function(t,e){return e||U(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUInt16BE=function(t,e){return e||U(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUInt32LE=function(t,e){return e||U(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUInt32BE=function(t,e){return e||U(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||U(t,e,this.length);var r=this[t],a=1,i=0;while(++i<e&&(a*=256))r+=this[t+i]*a;return a*=128,r>=a&&(r-=Math.pow(2,8*e)),r},l.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||U(t,e,this.length);var r=e,a=1,i=this[t+--r];while(r>0&&(a*=256))i+=this[t+--r]*a;return a*=128,i>=a&&(i-=Math.pow(2,8*e)),i},l.prototype.readInt8=function(t,e){return e||U(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){e||U(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(t,e){e||U(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(t,e){return e||U(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return e||U(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readFloatLE=function(t,e){return e||U(t,4,this.length),a.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return e||U(t,4,this.length),a.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return e||U(t,8,this.length),a.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return e||U(t,8,this.length),a.read(this,t,!1,52,8)},l.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e|=0,n|=0,!r){var a=Math.pow(2,8*n)-1;Z(this,t,e,n,a,0)}var i=1,o=0;this[e]=255&t;while(++o<n&&(i*=256))this[e+o]=t/i&255;return e+n},l.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e|=0,n|=0,!r){var a=Math.pow(2,8*n)-1;Z(this,t,e,n,a,0)}var i=n-1,o=1;this[e+i]=255&t;while(--i>=0&&(o*=256))this[e+i]=t/o&255;return e+n},l.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||Z(this,t,e,1,255,0),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},l.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||Z(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):G(this,t,e,!0),e+2},l.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||Z(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):G(this,t,e,!1),e+2},l.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||Z(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):F(this,t,e,!0),e+4},l.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||Z(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):F(this,t,e,!1),e+4},l.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var a=Math.pow(2,8*n-1);Z(this,t,e,n,a-1,-a)}var i=0,o=1,s=0;this[e]=255&t;while(++i<n&&(o*=256))t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+n},l.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var a=Math.pow(2,8*n-1);Z(this,t,e,n,a-1,-a)}var i=n-1,o=1,s=0;this[e+i]=255&t;while(--i>=0&&(o*=256))t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+n},l.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||Z(this,t,e,1,127,-128),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||Z(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):G(this,t,e,!0),e+2},l.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||Z(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):G(this,t,e,!1),e+2},l.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||Z(this,t,e,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):F(this,t,e,!0),e+4},l.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||Z(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):F(this,t,e,!1),e+4},l.prototype.writeFloatLE=function(t,e,n){return H(this,t,e,!0,n)},l.prototype.writeFloatBE=function(t,e,n){return H(this,t,e,!1,n)},l.prototype.writeDoubleLE=function(t,e,n){return z(this,t,e,!0,n)},l.prototype.writeDoubleBE=function(t,e,n){return z(this,t,e,!1,n)},l.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var a,i=r-n;if(this===t&&n<e&&e<r)for(a=i-1;a>=0;--a)t[a+e]=this[a+n];else if(i<1e3||!l.TYPED_ARRAY_SUPPORT)for(a=0;a<i;++a)t[a+e]=this[a+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+i),e);return i},l.prototype.fill=function(t,e,n,r){if("string"===typeof t){if("string"===typeof e?(r=e,e=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===t.length){var a=t.charCodeAt(0);a<256&&(t=a)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var i;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"===typeof t)for(i=e;i<n;++i)this[i]=t;else{var o=l.isBuffer(t)?t:K(new l(t,r).toString()),s=o.length;for(i=0;i<n-e;++i)this[i+e]=o[i%s]}return this};var Y=/[^+\/0-9A-Za-z-_]/g;function W(t){if(t=q(t).replace(Y,""),t.length<2)return"";while(t.length%4!==0)t+="=";return t}function q(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function $(t){return t<16?"0"+t.toString(16):t.toString(16)}function K(t,e){var n;e=e||1/0;for(var r=t.length,a=null,i=[],o=0;o<r;++o){if(n=t.charCodeAt(o),n>55295&&n<57344){if(!a){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(o+1===r){(e-=3)>-1&&i.push(239,191,189);continue}a=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),a=n;continue}n=65536+(a-55296<<10|n-56320)}else a&&(e-=3)>-1&&i.push(239,191,189);if(a=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function J(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function Q(t,e){for(var n,r,a,i=[],o=0;o<t.length;++o){if((e-=2)<0)break;n=t.charCodeAt(o),r=n>>8,a=n%256,i.push(a),i.push(r)}return i}function X(t){return r.toByteArray(W(t))}function tt(t,e,n,r){for(var a=0;a<r;++a){if(a+n>=e.length||a>=t.length)break;e[a+n]=t[a]}return a}function et(t){return t!==t}}).call(this,n("c8ba"))},b7d1:function(t,e,n){(function(e){function n(t,e){if(r("noDeprecation"))return t;var n=!1;function a(){if(!n){if(r("throwDeprecation"))throw new Error(e);r("traceDeprecation")?console.trace(e):console.warn(e),n=!0}return t.apply(this,arguments)}return a}function r(t){try{if(!e.localStorage)return!1}catch(_){return!1}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=n}).call(this,n("c8ba"))},c2ae:function(t,e,n){t.exports=n("e372").PassThrough},c832:function(t,e,n){(function(e){var n="Expected a function",r="__lodash_hash_undefined__",a=1/0,i="[object Function]",o="[object GeneratorFunction]",s="[object Symbol]",c=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,l=/^\w*$/,u=/^\./,d=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,h=/[\\^$.*+?()[\]{}|]/g,f=/\\(\\)?/g,p=/^\[object .+?Constructor\]$/,_="object"==typeof e&&e&&e.Object===Object&&e,g="object"==typeof self&&self&&self.Object===Object&&self,m=_||g||Function("return this")();function b(t,e){return null==t?void 0:t[e]}function y(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(n){}return e}var v=Array.prototype,T=Function.prototype,S=Object.prototype,w=m["__core-js_shared__"],E=function(){var t=/[^.]+$/.exec(w&&w.keys&&w.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),L=T.toString,A=S.hasOwnProperty,D=S.toString,I=RegExp("^"+L.call(A).replace(h,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),R=m.Symbol,k=v.splice,x=it(m,"Map"),C=it(Object,"create"),N=R?R.prototype:void 0,B=N?N.toString:void 0;function M(t){var e=-1,n=t?t.length:0;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}function O(){this.__data__=C?C(null):{}}function P(t){return this.has(t)&&delete this.__data__[t]}function j(t){var e=this.__data__;if(C){var n=e[t];return n===r?void 0:n}return A.call(e,t)?e[t]:void 0}function U(t){var e=this.__data__;return C?void 0!==e[t]:A.call(e,t)}function Z(t,e){var n=this.__data__;return n[t]=C&&void 0===e?r:e,this}function G(t){var e=-1,n=t?t.length:0;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}function F(){this.__data__=[]}function V(t){var e=this.__data__,n=X(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():k.call(e,n,1),!0}function H(t){var e=this.__data__,n=X(e,t);return n<0?void 0:e[n][1]}function z(t){return X(this.__data__,t)>-1}function Y(t,e){var n=this.__data__,r=X(n,t);return r<0?n.push([t,e]):n[r][1]=e,this}function W(t){var e=-1,n=t?t.length:0;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}function q(){this.__data__={hash:new M,map:new(x||G),string:new M}}function $(t){return at(this,t)["delete"](t)}function K(t){return at(this,t).get(t)}function J(t){return at(this,t).has(t)}function Q(t,e){return at(this,t).set(t,e),this}function X(t,e){var n=t.length;while(n--)if(ft(t[n][0],e))return n;return-1}function tt(t,e){e=ot(e,t)?[e]:rt(e);var n=0,r=e.length;while(null!=t&&n<r)t=t[ut(e[n++])];return n&&n==r?t:void 0}function et(t){if(!gt(t)||ct(t))return!1;var e=_t(t)||y(t)?I:p;return e.test(dt(t))}function nt(t){if("string"==typeof t)return t;if(bt(t))return B?B.call(t):"";var e=t+"";return"0"==e&&1/t==-a?"-0":e}function rt(t){return pt(t)?t:lt(t)}function at(t,e){var n=t.__data__;return st(e)?n["string"==typeof e?"string":"hash"]:n.map}function it(t,e){var n=b(t,e);return et(n)?n:void 0}function ot(t,e){if(pt(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!bt(t))||(l.test(t)||!c.test(t)||null!=e&&t in Object(e))}function st(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function ct(t){return!!E&&E in t}M.prototype.clear=O,M.prototype["delete"]=P,M.prototype.get=j,M.prototype.has=U,M.prototype.set=Z,G.prototype.clear=F,G.prototype["delete"]=V,G.prototype.get=H,G.prototype.has=z,G.prototype.set=Y,W.prototype.clear=q,W.prototype["delete"]=$,W.prototype.get=K,W.prototype.has=J,W.prototype.set=Q;var lt=ht((function(t){t=yt(t);var e=[];return u.test(t)&&e.push(""),t.replace(d,(function(t,n,r,a){e.push(r?a.replace(f,"$1"):n||t)})),e}));function ut(t){if("string"==typeof t||bt(t))return t;var e=t+"";return"0"==e&&1/t==-a?"-0":e}function dt(t){if(null!=t){try{return L.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function ht(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(n);var r=function(){var n=arguments,a=e?e.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var o=t.apply(this,n);return r.cache=i.set(a,o),o};return r.cache=new(ht.Cache||W),r}function ft(t,e){return t===e||t!==t&&e!==e}ht.Cache=W;var pt=Array.isArray;function _t(t){var e=gt(t)?D.call(t):"";return e==i||e==o}function gt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function mt(t){return!!t&&"object"==typeof t}function bt(t){return"symbol"==typeof t||mt(t)&&D.call(t)==s}function yt(t){return null==t?"":nt(t)}function vt(t,e,n){var r=null==t?void 0:tt(t,e);return void 0===r?n:r}t.exports=vt}).call(this,n("c8ba"))},cb88:function(t,e,n){"use strict";n("db46")},cdc3:function(t,e,n){"use strict";n("dbb2")},d120:function(t,e,n){},d17b:function(t,e,n){t.exports=n("e372").Transform},d415:function(t,e,n){"use strict";n("d120")},d485:function(t,e,n){t.exports=i;var r=n("faa1").EventEmitter,a=n("3fb5");function i(){r.call(this)}a(i,r),i.Readable=n("e372"),i.Writable=n("2c63"),i.Duplex=n("0960"),i.Transform=n("d17b"),i.PassThrough=n("c2ae"),i.Stream=i,i.prototype.pipe=function(t,e){var n=this;function a(e){t.writable&&!1===t.write(e)&&n.pause&&n.pause()}function i(){n.readable&&n.resume&&n.resume()}n.on("data",a),t.on("drain",i),t._isStdio||e&&!1===e.end||(n.on("end",s),n.on("close",c));var o=!1;function s(){o||(o=!0,t.end())}function c(){o||(o=!0,"function"===typeof t.destroy&&t.destroy())}function l(t){if(u(),0===r.listenerCount(this,"error"))throw t}function u(){n.removeListener("data",a),t.removeListener("drain",i),n.removeListener("end",s),n.removeListener("close",c),n.removeListener("error",l),t.removeListener("error",l),n.removeListener("end",u),n.removeListener("close",u),t.removeListener("close",u)}return n.on("error",l),t.on("error",l),n.on("end",u),n.on("close",u),t.on("close",u),t.emit("pipe",n),t}},db46:function(t,e,n){},dbb2:function(t,e,n){},dc14:function(t,e,n){"use strict";(function(e,r){var a=n("966d");function i(t){var e=this;this.next=null,this.entry=null,this.finish=function(){P(e,t)}}t.exports=v;var o,s=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?setImmediate:a.nextTick;v.WritableState=y;var c=Object.create(n("3a7c"));c.inherits=n("3fb5");var l={deprecate:n("b7d1")},u=n("429b"),d=n("8707").Buffer,h=("undefined"!==typeof r?r:"undefined"!==typeof window?window:"undefined"!==typeof self?self:{}).Uint8Array||function(){};function f(t){return d.from(t)}function p(t){return d.isBuffer(t)||t instanceof h}var g,m=n("4681");function b(){}function y(t,e){o=o||n("b19a"),t=t||{};var r=e instanceof o;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var a=t.highWaterMark,s=t.writableHighWaterMark,c=this.objectMode?16:16384;this.highWaterMark=a||0===a?a:r&&(s||0===s)?s:c,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var l=!1===t.decodeStrings;this.decodeStrings=!l,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){I(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function v(t){if(o=o||n("b19a"),!g.call(v,this)&&!(this instanceof o))return new v(t);this._writableState=new y(t,this),this.writable=!0,t&&("function"===typeof t.write&&(this._write=t.write),"function"===typeof t.writev&&(this._writev=t.writev),"function"===typeof t.destroy&&(this._destroy=t.destroy),"function"===typeof t.final&&(this._final=t.final)),u.call(this)}function T(t,e){var n=new Error("write after end");t.emit("error",n),a.nextTick(e,n)}function S(t,e,n,r){var i=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):"string"===typeof n||void 0===n||e.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(t.emit("error",o),a.nextTick(r,o),i=!1),i}function w(t,e,n){return t.objectMode||!1===t.decodeStrings||"string"!==typeof e||(e=d.from(e,n)),e}function E(t,e,n,r,a,i){if(!n){var o=w(e,r,a);r!==o&&(n=!0,a="buffer",r=o)}var s=e.objectMode?1:r.length;e.length+=s;var c=e.length<e.highWaterMark;if(c||(e.needDrain=!0),e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:a,isBuf:n,callback:i,next:null},l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else L(t,e,!1,s,r,a,i);return c}function L(t,e,n,r,a,i,o){e.writelen=r,e.writecb=o,e.writing=!0,e.sync=!0,n?t._writev(a,e.onwrite):t._write(a,i,e.onwrite),e.sync=!1}function A(t,e,n,r,i){--e.pendingcb,n?(a.nextTick(i,r),a.nextTick(M,t,e),t._writableState.errorEmitted=!0,t.emit("error",r)):(i(r),t._writableState.errorEmitted=!0,t.emit("error",r),M(t,e))}function D(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function I(t,e){var n=t._writableState,r=n.sync,a=n.writecb;if(D(n),e)A(t,n,r,e,a);else{var i=C(n);i||n.corked||n.bufferProcessing||!n.bufferedRequest||x(t,n),r?s(R,t,n,i,a):R(t,n,i,a)}}function R(t,e,n,r){n||k(t,e),e.pendingcb--,r(),M(t,e)}function k(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function x(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,a=new Array(r),o=e.corkedRequestsFree;o.entry=n;var s=0,c=!0;while(n)a[s]=n,n.isBuf||(c=!1),n=n.next,s+=1;a.allBuffers=c,L(t,e,!0,e.length,a,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new i(e),e.bufferedRequestCount=0}else{while(n){var l=n.chunk,u=n.encoding,d=n.callback,h=e.objectMode?1:l.length;if(L(t,e,!1,h,l,u,d),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function C(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function N(t,e){t._final((function(n){e.pendingcb--,n&&t.emit("error",n),e.prefinished=!0,t.emit("prefinish"),M(t,e)}))}function B(t,e){e.prefinished||e.finalCalled||("function"===typeof t._final?(e.pendingcb++,e.finalCalled=!0,a.nextTick(N,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function M(t,e){var n=C(e);return n&&(B(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),n}function O(t,e,n){e.ending=!0,M(t,e),n&&(e.finished?a.nextTick(n):t.once("finish",n)),e.ended=!0,t.writable=!1}function P(t,e,n){var r=t.entry;t.entry=null;while(r){var a=r.callback;e.pendingcb--,a(n),r=r.next}e.corkedRequestsFree.next=t}c.inherits(v,u),y.prototype.getBuffer=function(){var t=this.bufferedRequest,e=[];while(t)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(y.prototype,"buffer",{get:l.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(_){}}(),"function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]?(g=Function.prototype[Symbol.hasInstance],Object.defineProperty(v,Symbol.hasInstance,{value:function(t){return!!g.call(this,t)||this===v&&(t&&t._writableState instanceof y)}})):g=function(t){return t instanceof this},v.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},v.prototype.write=function(t,e,n){var r=this._writableState,a=!1,i=!r.objectMode&&p(t);return i&&!d.isBuffer(t)&&(t=f(t)),"function"===typeof e&&(n=e,e=null),i?e="buffer":e||(e=r.defaultEncoding),"function"!==typeof n&&(n=b),r.ended?T(this,n):(i||S(this,r,t,n))&&(r.pendingcb++,a=E(this,r,i,t,e,n)),a},v.prototype.cork=function(){var t=this._writableState;t.corked++},v.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||x(this,t))},v.prototype.setDefaultEncoding=function(t){if("string"===typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),v.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},v.prototype._writev=null,v.prototype.end=function(t,e,n){var r=this._writableState;"function"===typeof t?(n=t,t=null,e=null):"function"===typeof e&&(n=e,e=null),null!==t&&void 0!==t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||O(this,r,n)},Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),v.prototype.destroy=m.destroy,v.prototype._undestroy=m.undestroy,v.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,n("4362"),n("c8ba"))},dd92:function(t,e,n){},e372:function(t,e,n){e=t.exports=n("ad71"),e.Stream=e,e.Readable=e,e.Writable=n("dc14"),e.Duplex=n("b19a"),e.Transform=n("27bf"),e.PassThrough=n("780f")},e3db:function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},e9c4:function(t,e,n){var r=n("23e7"),a=n("d066"),i=n("d039"),o=a("JSON","stringify"),s=/[\uD800-\uDFFF]/g,c=/^[\uD800-\uDBFF]$/,l=/^[\uDC00-\uDFFF]$/,u=function(t,e,n){var r=n.charAt(e-1),a=n.charAt(e+1);return c.test(t)&&!l.test(a)||l.test(t)&&!c.test(r)?"\\u"+t.charCodeAt(0).toString(16):t},d=i((function(){return'"\\udf06\\ud834"'!==o("\udf06\ud834")||'"\\udead"'!==o("\udead")}));o&&r({target:"JSON",stat:!0,forced:d},{stringify:function(t,e,n){var r=o.apply(null,arguments);return"string"==typeof r?r.replace(s,u):r}})},ec92:function(t,e,n){"use strict";n("0a34")},ee72:function(t,e,n){"use strict";const{Transform:r}=n("d485"),a=n("293d"),{fakeInherit:i}=n("9d6f");class o extends r{constructor(t,e={},n={}){super(e),i(this,a),this.endUnderlayingParser=a.prototype.end,this.opts=this.preprocessOpts(t),this.initTokenizer(t,{...n,objectMode:e.objectMode||e.readableObjectMode}),this.opts.fields&&this.preprocessFieldsInfo(this.opts.fields)}onHeader(t){this.emit("header",t)}onLine(t){this.emit("line",t)}onData(t){this.push(t)}onError(t){throw t}onEnd(){this.writableEnded||this.end()}_transform(t,e,n){try{this.tokenizer.write(t),n()}catch(r){n(r)}}_final(t){try{this.endUnderlayingParser(),t()}catch(e){t(e)}}promise(){return new Promise((t,e)=>{const n=[];this.on("data",t=>n.push(t.toString())).on("finish",()=>t(n.join(""))).on("error",t=>e(t))})}}t.exports=o},eea2:function(t,e,n){"use strict";const r=n("3c43"),a=n("c832"),{getProp:i}=n("9d6f"),o=n("2c7f"),s=n("aecd"),c=n("1476"),l=n("8a74"),u=n("a9ff");class d{constructor(t){this.opts=this.preprocessOpts(t)}preprocessOpts(t){const e=Object.assign({},t);e.fields&&(e.fields=this.preprocessFieldsInfo(e.fields,e.defaultValue)),e.transforms=e.transforms||[];const n=e.formatters&&e.formatters["string"]||c(),a=u({stringFormatter:n}),i={header:n,undefined:o,boolean:o,number:s(),bigint:o,string:n,symbol:l({stringFormatter:n}),function:a,object:a};return e.formatters={...i,...e.formatters},e.delimiter=e.delimiter||",",e.eol=e.eol||r.EOL,e.header=!1!==e.header,e.includeEmptyRows=e.includeEmptyRows||!1,e.withBOM=e.withBOM||!1,e}preprocessFieldsInfo(t,e){return t.map(t=>{if("string"===typeof t)return{label:t,value:t.includes(".")||t.includes("[")?n=>a(n,t,e):n=>i(n,t,e)};if("object"===typeof t){const n="default"in t?t.default:e;if("string"===typeof t.value)return{label:t.label||t.value,value:t.value.includes(".")||t.value.includes("[")?e=>a(e,t.value,n):e=>i(e,t.value,n)};if("function"===typeof t.value){const e=t.label||t.value.name||"",r={label:e,default:n};return{label:e,value(e){const a=t.value(e,r);return null===a||void 0===a?n:a}}}}throw new Error("Invalid field info option. "+JSON.stringify(t))})}getHeader(t){return t.map(t=>this.opts.formatters.header(t.label)).join(this.opts.delimiter)}preprocessRow(t){return this.opts.transforms.reduce((t,e)=>t.flatMap(t=>e(t)),[t])}processRow(t,e){if(!t)return;const n=e.map(e=>this.processCell(t,e));return this.opts.includeEmptyRows||!n.every(t=>""===t)?n.join(this.opts.delimiter):void 0}processCell(t,e){return this.processValue(e.value(t))}processValue(t){return this.opts.formatters[typeof t](t)}}t.exports=d},f832:function(t,e,n){},faa1:function(t,e,n){"use strict";var r,a="object"===typeof Reflect?Reflect:null,i=a&&"function"===typeof a.apply?a.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};function o(t){console&&console.warn&&console.warn(t)}r=a&&"function"===typeof a.ownKeys?a.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var s=Number.isNaN||function(t){return t!==t};function c(){c.init.call(this)}t.exports=c,t.exports.once=v,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._eventsCount=0,c.prototype._maxListeners=void 0;var l=10;function u(t){if("function"!==typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function d(t){return void 0===t._maxListeners?c.defaultMaxListeners:t._maxListeners}function h(t,e,n,r){var a,i,s;if(u(n),i=t._events,void 0===i?(i=t._events=Object.create(null),t._eventsCount=0):(void 0!==i.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),s=i[e]),void 0===s)s=i[e]=n,++t._eventsCount;else if("function"===typeof s?s=i[e]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),a=d(t),a>0&&s.length>a&&!s.warned){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=s.length,o(c)}return t}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},a=f.bind(r);return a.listener=n,r.wrapFn=a,a}function _(t,e,n){var r=t._events;if(void 0===r)return[];var a=r[e];return void 0===a?[]:"function"===typeof a?n?[a.listener||a]:[a]:n?y(a):m(a,a.length)}function g(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"===typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function b(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function y(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function v(t,e){return new Promise((function(n,r){function a(n){t.removeListener(e,i),r(n)}function i(){"function"===typeof t.removeListener&&t.removeListener("error",a),n([].slice.call(arguments))}S(t,e,i,{once:!0}),"error"!==e&&T(t,a,{once:!0})}))}function T(t,e,n){"function"===typeof t.on&&S(t,"error",e,n)}function S(t,e,n,r){if("function"===typeof t.on)r.once?t.once(e,n):t.on(e,n);else{if("function"!==typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function a(i){r.once&&t.removeEventListener(e,a),n(i)}))}}Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(t){if("number"!==typeof t||t<0||s(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");l=t}}),c.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},c.prototype.setMaxListeners=function(t){if("number"!==typeof t||t<0||s(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},c.prototype.getMaxListeners=function(){return d(this)},c.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,a=this._events;if(void 0!==a)r=r&&void 0===a.error;else if(!r)return!1;if(r){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var c=a[t];if(void 0===c)return!1;if("function"===typeof c)i(c,this,e);else{var l=c.length,u=m(c,l);for(n=0;n<l;++n)i(u[n],this,e)}return!0},c.prototype.addListener=function(t,e){return h(this,t,e,!1)},c.prototype.on=c.prototype.addListener,c.prototype.prependListener=function(t,e){return h(this,t,e,!0)},c.prototype.once=function(t,e){return u(e),this.on(t,p(this,t,e)),this},c.prototype.prependOnceListener=function(t,e){return u(e),this.prependListener(t,p(this,t,e)),this},c.prototype.removeListener=function(t,e){var n,r,a,i,o;if(u(e),r=this._events,void 0===r)return this;if(n=r[t],void 0===n)return this;if(n===e||n.listener===e)0===--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!==typeof n){for(a=-1,i=n.length-1;i>=0;i--)if(n[i]===e||n[i].listener===e){o=n[i].listener,a=i;break}if(a<0)return this;0===a?n.shift():b(n,a),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,o||e)}return this},c.prototype.off=c.prototype.removeListener,c.prototype.removeAllListeners=function(t){var e,n,r;if(n=this._events,void 0===n)return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var a,i=Object.keys(n);for(r=0;r<i.length;++r)a=i[r],"removeListener"!==a&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=n[t],"function"===typeof e)this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},c.prototype.listeners=function(t){return _(this,t,!0)},c.prototype.rawListeners=function(t){return _(this,t,!1)},c.listenerCount=function(t,e){return"function"===typeof t.listenerCount?t.listenerCount(e):g.call(t,e)},c.prototype.listenerCount=g,c.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},fd82:function(t,e,n){}}]);
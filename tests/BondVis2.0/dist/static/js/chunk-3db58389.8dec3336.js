(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3db58389"],{"08da":function(t,e,n){},"2af3":function(t,e,n){"use strict";n("6e74")},"2d5b":function(t,e,n){},"31dd":function(t,e,n){"use strict";n("08da")},3316:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"stand-alone-page"},[n("div",[n("div",{staticClass:"dashboard-container",staticStyle:{width:"1800px padding: 0 0"}},[n("div",{staticClass:"content",staticStyle:{height:"100%",padding:"0px 0px"}},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm-2",staticStyle:{padding:"0 0"}},[n("MacroView",{attrs:{end_date:t.end_date,duration_days:t.duration_days}})],1),n("div",{staticClass:"col-sm-5",staticStyle:{padding:"0 0"}},[n("GraphView")],1),n("div",{staticClass:"col-sm-5",staticStyle:{padding:"0 0"}},[n("SankeyView"),n("LineView")],1)])])])])])},r=[],o=(n("4de4"),n("caad"),n("b64b"),n("d3b7"),n("2532"),n("96eb")),i=n.n(o),s=n("bc3a"),c=n.n(s),u=(n("f9e3"),n("2dd8"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-card",{staticStyle:{height:"100%"},attrs:{"no-body":""}},[n("b-card-header",{staticClass:"large-header",staticStyle:{height:"230px",padding:"5px 20px 0px 20px"}},[n("div",{staticStyle:{display:"flex","margin-top":"10px"}},[n("span",{staticStyle:{"font-size":"15px"}},[n("b",[t._v("Bond List View")])]),n("b-dropdown",{staticStyle:{"margin-left":"20px",height:"15px",display:"flex","align-items":"center"},attrs:{dropright:"",size:"sm",variant:"outline-secondary","toggle-class":"text-decoration-none"},scopedSlots:t._u([{key:"button-content",fn:function(){return[n("b-icon-gear",{staticStyle:{"font-size":"12px",height:"16px",width:"20px"}})]},proxy:!0}])},[n("div",{staticStyle:{width:"150px","margin-left":"10px","font-size":"12px"}},[t._v(" Bond price Threshold1 "),n("vue-slider",{staticStyle:{"margin-left":"20px","margin-right":"10px","margin-bottom":"30px"},attrs:{min:1,max:4,interval:.5,marks:!0},model:{value:t.Threshold_local,callback:function(e){t.Threshold_local=e},expression:"Threshold_local"}})],1)])],1),n("div",{staticStyle:{display:"flex","margin-top":"10px",float:"left"}},[n("el-date-picker",{attrs:{type:"date",placeholder:"Pick a day"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),n("button",{staticClass:"btn btn-secondary button",staticStyle:{"margin-right":"10px"},on:{click:function(e){return t.timeClick(t.date)}}},[t._v(" OK ")])],1),n("div",{staticStyle:{display:"flex","margin-top":"10px",float:"left"}},[n("span",{staticStyle:{"font-size":"12px"}},[t._v("Trans num")]),n("vue-slider",{staticStyle:{width:"150px","margin-left":"20px"},attrs:{adsorb:!0,data:t.transaction_num_range_list,included:!0},model:{value:t.transaction_num_range,callback:function(e){t.transaction_num_range=e},expression:"transaction_num_range"}})],1),n("div",{staticStyle:{display:"flex","margin-top":"10px",float:"left"}},[n("span",{staticStyle:{"margin-top":"5px"}},[t._v("Sort by number")]),n("b-button-group",{staticStyle:{"margin-left":"10px",float:"right"},attrs:{size:"sm"}},[n("b-button",{staticStyle:{"font-size":"12px",height:"25px","margin-left":"24px",float:"right"},attrs:{variant:"outline-secondary"},on:{click:function(e){return t.updateNumSort("num_descending")}}},[n("b-icon-arrow-down")],1),n("b-button",{staticStyle:{"font-size":"12px",height:"25px"},attrs:{variant:"outline-secondary"},on:{click:function(e){return t.updateNumSort("num_ascending")}}},[n("b-icon-arrow-up")],1)],1)],1),n("div",{staticStyle:{display:"flex","margin-top":"10px",float:"left"}},[n("span",{staticStyle:{"font-size":"12px",float:"left"}},[t._v("Trans vol")]),n("vue-slider",{staticStyle:{width:"150px","margin-left":"27px"},attrs:{adsorb:!0,data:t.transaction_volume_range_list,included:!0},model:{value:t.transaction_volume_range,callback:function(e){t.transaction_volume_range=e},expression:"transaction_volume_range"}})],1),n("div",{staticStyle:{display:"flex","margin-top":"10px",float:"left"}},[n("span",{staticStyle:{"margin-top":"5px"}},[t._v("Sort by volume")]),n("b-button-group",{staticStyle:{"margin-left":"10px",float:"right"},attrs:{size:"sm"}},[n("b-button",{staticStyle:{"font-size":"12px",height:"25px","margin-left":"24px",float:"right"},attrs:{variant:"outline-secondary"},on:{click:function(e){return t.updateVolSort("vol_descending")}}},[n("b-icon-arrow-down")],1),n("b-button",{staticStyle:{"font-size":"12px",height:"25px"},attrs:{variant:"outline-secondary"},on:{click:function(e){return t.updateVolSort("vol_ascending")}}},[n("b-icon-arrow-up")],1)],1)],1)]),n("b-card-body",{staticStyle:{overflow:"scroll",height:"570px",padding:"2px"}},[n("div",{staticStyle:{display:"flex","flex-direction":"column"}},[n("div",{staticStyle:{flex:"1"}},[n("div",{staticStyle:{display:"block",height:"20px","margin-top":"0px",float:"right"}},[n("b-input-group",{staticStyle:{width:"278px"},attrs:{size:"sm"},scopedSlots:t._u([{key:"append",fn:function(){return[n("b-input-group-text",{staticStyle:{float:"right"}},[n("svg",{staticClass:"bi bi-search",attrs:{width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[n("path",{attrs:{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"}})])])]},proxy:!0}])},[n("b-form-input",{attrs:{placeholder:"Search by Name or ID"},model:{value:t.searchQuery,callback:function(e){t.searchQuery=e},expression:"searchQuery"}})],1)],1)]),n("div",{staticStyle:{flex:"1","margin-top":"13px"}},[t.marcoDataLoaded?n("div",[n("div",{staticStyle:{"font-size":"12px"}},[t._v("Transaction Num Range: "+t._s(t.transaction_num_range[0])+" - "+t._s(t.transaction_num_range[1]))]),n("div",{staticStyle:{"font-size":"12px"}},[t._v("Transaction Volume Range: "+t._s(t.transaction_volume_range[0])+" - "+t._s(t.transaction_volume_range[1]))]),n("div",{staticStyle:{"font-size":"12px"}},[t._v("Filtered Projects Count: "+t._s(t.filteredAndSortedProjects.length))]),t._l(t.filteredAndSortedProjects,(function(e){return n("MarcoCard",{key:e.Bond_cd,attrs:{bond_cd:e.Bond_cd,bond_name:e.Bond_name,transaction_num:e.Transaction_num,transaction_volume:e.Transaction_volume,duration_days:t.duration_days,end_date:t.end_date}})}))],2):t._e()])])])],1)],1)}),l=[],d=n("2909"),p=(n("d81d"),n("fb6a"),n("4e82"),n("25f0"),n("4971")),h=n.n(p),f=(n("24df"),n("205f")),g=n("0759"),m=n("7386"),v=n("1947"),b=n("b885"),y=n("6197"),x=n("d0b9"),_=n("dd9a"),k=n("3734"),w=n("9eaa"),S=n("a17a"),B=n("5e12"),D=n("d190"),P=n("4797"),C=n("12aa"),T=n("404b"),E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-card",{attrs:{"no-body":""}},[n("b-card-header",{staticClass:"small-header",staticStyle:{"font-size":"12px",padding:"2px 2px",height:"26px"}},[t._v(" "+t._s(t.bond_cd)+" "),n("b",[t._v("Num:")]),t._v(" "+t._s(t.transaction_num)+" "),n("b",[t._v("Name:")]),t._v(" "+t._s(t.bond_name)+" "),t.selected?t._e():n("b-button",{staticStyle:{float:"right",padding:"0"},attrs:{size:"sm",variant:"outline"},on:{click:t.onClick}},[n("b-icon-plus-square")],1),t.selected?n("b-button",{staticStyle:{float:"right",padding:"0"},attrs:{size:"sm",variant:"outline"},on:{click:t.onClick}},[n("b-icon-dash-square")],1):t._e()],1),n("b-card-body",{staticStyle:{padding:"2px"},attrs:{id:"mg_"+t.bond_cd}},[n("MarcoGlyph",{attrs:{bond_cd:t.bond_cd,end_date:t.end_date,duration_days:t.duration_days}})],1)],1)},M=[],A=n("5698"),L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{staticStyle:{width:"100%",height:"40px"},attrs:{id:"svg_marcoGlyph_"+t.bond_cd+"_"+t.end_date+"_"+t.duration_days,end_date:t.end_date,duration_days:t.duration_days}})},j=[],O=n("c7eb"),V=n("1da1"),I=n("3835"),$=n("d4ec"),G=n("bee2"),R=(n("99af"),n("13d5"),n("4fad"),n("07ac"),n("4d90"),n("159b"),n("b166")),z=function(){function t(){Object($["a"])(this,t),this.dataPackage={mktPrice:[],transaction:[],valuation:[],volume:[],gradient:[],mktPriceTrue:[]}}return Object(G["a"])(t,[{key:"generateData",value:function(){var t=Object(V["a"])(Object(O["a"])().mark((function t(e,n,a){var r,o,i,s;return Object(O["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.getMarketPriceData(e);case 3:return r=t.sent,t.next=6,this.getTransactionData(e);case 6:return o=t.sent,t.next=9,this.getTransactionData(e);case 9:return i=t.sent,t.next=12,this.getTransactionData(e);case 12:s=t.sent,this.dataPackage.mktPrice=r,this.dataPackage.transaction=o,this.dataPackage.valuation=i,this.dataPackage.volume=s,t.next=22;break;case 19:t.prev=19,t.t0=t["catch"](0),console.error("Error generating data:",t.t0);case 22:case"end":return t.stop()}}),t,this,[[0,19]])})));function e(e,n,a){return t.apply(this,arguments)}return e}()},{key:"getMarketPriceData",value:function(){var t=Object(V["a"])(Object(O["a"])().mark((function t(e){var n,a;return Object(O["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.a.get("http://localhost:5003/api/BasicData_MarketPrice/".concat(e));case 3:return n=t.sent,a=n.data.filtered_json_mkt,t.abrupt("return",a);case 8:return t.prev=8,t.t0=t["catch"](0),console.error("Error fetching market price data:",t.t0),t.abrupt("return",[]);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getTransactionData",value:function(){var t=Object(V["a"])(Object(O["a"])().mark((function t(e){var n,a;return Object(O["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.a.get("http://localhost:5003/api/BasicData_transaction/".concat(e));case 3:return n=t.sent,a=n.data.filtered_json_transaction,t.abrupt("return",a);case 8:return t.prev=8,t.t0=t["catch"](0),console.error("Error fetching market price data:",t.t0),t.abrupt("return",[]);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"updatedata",value:function(t){var e=t.mktPrice_flask,n=t.transaction_flask;return e.then((function(e){t.mktPrice=e,console.log("mktPrice_flask parsedDate",e)})),n.then((function(e){t.transaction=e,console.log("transaction_flask parsedDate",e)})),console.log("parsedDate dataPackage:",t),t}},{key:"generateMarketPriceData",value:function(t,e,n){for(var a=[],r=n;r>=0;r--)for(var o=i.a.Random.integer(40,60),s=1;s<=o;s++){var c={bond_cd:t,netValue:i.a.Random.float(90,110,2,2),tradeVolume:i.a.Random.integer(10,1e3),timeStamp:this._randomDateInRange(e,r).toLocaleString()};a.push(c)}return a}},{key:"generateTransactionData",value:function(t,e,n){for(var a=[],r=n;r>=0;r--)for(var o=i.a.Random.integer(40,60),s=1;s<=o;s++){var c={bond_cd:t,transactionId:i.a.Random.string("upper",3,7),netPrice:i.a.Random.float(95,105,0,2),transactionVolume:i.a.Random.float(10,400),tradeResult:i.a.Random.boolean(),timeStamp:this._randomDateInRange(e,r).toLocaleString()};a.push(c)}return a}},{key:"generateValuationData",value:function(t,e,n){for(var a=[],r=n;r>0;r--){var o=new Date(e);o.setDate(o.getDate()-r);var s=Object(R["a"])(o,"yyyy-MM-dd"),c={bond_cd:t,valuationPrice:i.a.Random.float(98,103,2,2),profitRate:i.a.Random.float(.02,.04,2,2),recommendFlag:i.a.Random.boolean(),timeStamp:s};a.push(c)}return a}},{key:"_randomDateInRange",value:function(t,e){var n=new Date(t+" 09:00:00"),a=new Date,r=new Date;a.setTime(n),r.setTime(n),a.setDate(a.getDate()-e),r.setDate(r.getDate()-e),a.setHours(9,30,0,0),r.setHours(15,0,0,0);var o=a.getTime(),s=r.getTime(),c=i.a.Random.integer(o,s);return new Date(c)}},{key:"generateGradient",value:function(){}},{key:"volumeStatistic",value:function(){}}]),t}(),N=z,H=n("2ef0"),F=n.n(H),U=n("6ff4"),W=U.format,q={props:["bond_cd","end_date","duration_days"],data:function(){return{}},created:function(){},mounted:function(){this.dataPackages=this.fetchData()},methods:{dataPackageGeneration:function(t,e,n){var a=function(){function t(e,n,a){Object($["a"])(this,t);var r={};r["mktPrice"]=this.generateMarketPriceData(e,n,a),r["transaction"]=this.generateTransactionData(e,n,a),r["valuation"]=this.generateValuationData(e,n,a),r["volume"]=this.generateMarketPriceData(e,n,a),r["gradient"]=this.generateMarketPriceData(e,n,a),this.dataPackage=r}return Object(G["a"])(t,[{key:"generateMarketPriceData",value:function(t,e,n){for(var a=[],r=n;r>=0;r--)for(var o=i.a.Random.integer(40,60),s=1;s<=o;s++){var c={bond_cd:t,netValue:i.a.Random.float(90,110,2,2),tradeVolume:i.a.Random.integer(10,1e3),timeStamp:this._randomDateInRange(e,r).toLocaleString()};a.push(c)}return a}},{key:"generateTransactionData",value:function(t,e,n){for(var a=[],r=n;r>=0;r--)for(var o=i.a.Random.integer(40,60),s=1;s<=o;s++){var c={bond_cd:t,transactionId:i.a.Random.string("upper",3,4),netPrice:i.a.Random.float(95,105,0,2),transactionVolume:i.a.Random.float(10,400),tradeResult:i.a.Random.boolean(),timeStamp:this._randomDateInRange(e,r).toLocaleString()};a.push(c)}return a}},{key:"generateValuationData",value:function(t,e,n){for(var a=[],r=n;r>0;r--){var o=new Date(e);o.setDate(o.getDate()-r);var s=W(o,"yyyy-MM-dd"),c={bond_cd:t,valuationPrice:i.a.Random.float(98,103,2,2),profitRate:i.a.Random.float(.02,.04,2,2),recommendFlag:i.a.Random.boolean(),timeStamp:s};a.push(c)}return a}},{key:"_randomDateInRange",value:function(t,e){var n=new Date(t+" 09:00:00"),a=new Date,r=new Date;a.setTime(n),r.setTime(n),a.setDate(a.getDate()-e),r.setDate(r.getDate()-e),a.setHours(9,30,0,0),r.setHours(15,0,0,0);var o=a.getTime(),s=r.getTime(),c=i.a.Random.integer(o,s);return new Date(c)}},{key:"generateGradient",value:function(){}},{key:"volumeStatistic",value:function(){}}]),t}(),r=new a(t,e,n);return r.dataPackage},drawMultiCharts:function(t,e,n,a,r,o){var i=function(){function t(e,n,a,r,o,i){Object($["a"])(this,t),this.allData=e,this.bond_cd=n,this.endDay=a,this.duration_days=r,this.margin={top:3,right:3,bottom:3,left:3},this.width=297,this.height=40,this.vueComponent=o,this.upper=i[1],this.lower=i[0];var s=A["select"]("#svg_marcoGlyph_"+n+"_"+a+"_"+r).append("svg").append("g").attr("width",this.width).attr("height",this.height);this.chartContainer=s;var c=this.chartContainer.append("svg").attr("width",this.width).attr("height",this.height).attr("name","lineContainer");this.lineContainer=c}return Object(G["a"])(t,[{key:"drawMultiDayData",value:function(t){var e=this,n=this.allData[t],a=n.sort((function(t,e){return new Date(t.timeStamp)-new Date(e.timeStamp)})),r=a.reduce((function(t,e){var n=e.timeStamp.substr(0,10);return t[n]||(t[n]=[]),t[n].push(e),t}),{}),o=2*Object.keys(r).length;Object.entries(r).forEach((function(n,a){var r=Object(I["a"])(n,2),i=r[0],s=r[1],c=2*a/o*e.width,u=(2*a+1)/o*e.width,l=e.dataFilter(s,i),d=F.a.cloneDeep(l),p=d[0].AM,h=d[0].PM,f=F.a.cloneDeep(p),g=F.a.cloneDeep(h);e.drawDayData(f,t,i,c,"AM",o),e.drawDayData(g,t,i,u,"PM",o)}))}},{key:"drawDayData",value:function(t,e,n,a,r,o){var i=!1,s=!1;switch("AM"===r&&(i=this.offsetTime(n,9,30),s=this.offsetTime(n,11,30)),"PM"===r&&(i=this.offsetTime(n,13,30),s=this.offsetTime(n,15,0)),e){case"mktPrice":this.drawMktPriceLine(t,a,i,s,o);break;case"valuation":this.drawValuationLine(t,a,i,s,o);break;case"transaction":this.drawTrasactionScatter(t,a,i,s,o);break;case"volume":this.drawVolumeBar(t,a,i,s,o);break;case"gradient":this.drawGradTimeline(t,a,i,s,o);break}}},{key:"formatDateToCustomString",value:function(t){var e=new Date(t),n=e.getFullYear(),a=(e.getMonth()+1).toString().padStart(2,"0"),r=e.getDate().toString().padStart(2,"0"),o=e.getHours().toString().padStart(2,"0"),i=e.getMinutes().toString().padStart(2,"0"),s=e.getSeconds().toString().padStart(2,"0"),c="".concat(n,"_").concat(a,"_").concat(r,"_").concat(o,"_").concat(i,"_").concat(s);return c}},{key:"formatDateToCustomDateString",value:function(t){var e=new Date(t),n=e.getFullYear(),a=(e.getMonth()+1).toString().padStart(2,"0"),r=e.getDate().toString().padStart(2,"0"),o=e.getHours().toString().padStart(2,"0"),i=e.getMinutes().toString().padStart(2,"0"),s=e.getSeconds().toString().padStart(2,"0"),c="".concat(n,"-").concat(a,"-").concat(r," ").concat(o,":").concat(i,":").concat(s);return c}},{key:"offsetTime",value:function(t,e,n){var a=new Date(t),r=1e3*(3600*e+60*n),o=a.getTime()+r,i=new Date(o),s=i.getFullYear(),c=(i.getMonth()+1).toString().padStart(2,"0"),u=i.getDate().toString().padStart(2,"0"),l=i.getHours().toString().padStart(2,"0"),d=i.getMinutes().toString().padStart(2,"0"),p=i.getSeconds().toString().padStart(2,"0"),h="".concat(s,"-").concat(c,"-").concat(u,"T").concat(l,":").concat(d,":").concat(p,".000Z");return h}},{key:"drawMktPriceLine",value:function(t,e,n,a,r){t.forEach((function(t){var e=t.timeStamp.slice(0,-6);t.timeStamp=e,t.timeStamp=new Date(t.timeStamp)})),t.sort((function(t,e){return t.timeStamp-e.timeStamp})),n=this.formatDateToCustomDateString(n),a=this.formatDateToCustomDateString(a);var o=A["scaleTime"]().range([0,this.width/r]).domain([A["min"](t,(function(t){return t.timeStamp})),A["max"](t,(function(t){return t.timeStamp}))]),i=A["scaleLinear"]().range([this.height,0]).domain([A["min"](t,(function(t){return t.netValue})),A["max"](t,(function(t){return t.netValue}))]),s=A["area"]().x((function(t){return o(t.timeStamp)})).y0(i(0)).y1((function(t){return i(t.netValue)})),c=this.lineContainer.append("g");c.append("path").attr("transform","translate(".concat(e,", 0)")).style("stroke",A["schemeRdYlBu"][3][2]).style("stroke-width",2).attr("d",s(t)).attr("fill",A["schemeRdYlBu"][3][2])}},{key:"drawValuationLine",value:function(t,e,n,a){var r=this,o=A["scaleLinear"]().domain([0,A["max"](t,(function(t){return t.transactionVolume}))]).range([0,10]);this.chartContainer.selectAll("rect").data(t).enter().append("rect").attr("cx",(function(t,e){return 10*e})).attr("cy",(function(t,e){return r.height-1*t.netPrice})).attr("r",(function(t,e){return o(t.transactionVolume)}))}},{key:"drawTrasactionScatter",value:function(t,e,n,a,r){var o=this;t.forEach((function(t){var e=t.timeStamp.slice(0,-6);t.timeStamp=e,t.timeStamp=new Date(t.timeStamp)})),n=this.formatDateToCustomDateString(n),a=this.formatDateToCustomDateString(a);var i=A["scaleTime"]().range([0,this.width/r]).domain([A["min"](t,(function(t){return t.timeStamp})),A["max"](t,(function(t){return t.timeStamp}))]),s=A["scaleLinear"]().range([.25*this.height,.95*this.height]).domain([A["min"](t,(function(t){return t.netPrice})),A["max"](t,(function(t){return t.netPrice}))]),c=A["rgb"](255,210,186),u=A["scaleLinear"]().range([1,5]).domain([A["min"](t,(function(t){return t.transactionVolume})),A["max"](t,(function(t){return t.transactionVolume}))]);this.lassoContainer.append("g").attr("stroke","#000").attr("stroke-opacity",.2).selectAll("circle").data(t).enter().append("circle").attr("cx",(function(t){return i(t.timeStamp)})).attr("cy",(function(t){return o.height-s(t.netPrice)})).attr("r",(function(t){return u(t.transactionVolume)})).attr("fill",(function(t){return c})).attr("transform","translate(".concat(e,", 0)")).style("opacity",.6)}},{key:"drawVolumeBar",value:function(t,e,n,a,r){var o=this,i=10,s=this.bucketDataByMinute(t,i);t.forEach((function(t){var e=t.timeStamp.slice(0,-6);t.timeStamp=e,t.timeStamp=new Date(t.timeStamp)})),n=this.formatDateToCustomDateString(n),a=this.formatDateToCustomDateString(a);var c=s.map((function(t){return A["sum"](t,(function(t){return t.tradeVolume}))})),u=A["max"](c),l=A["scaleTime"]().range([0,this.width/r]).domain([A["min"](t,(function(t){return t.timeStamp})),A["max"](t,(function(t){return t.timeStamp}))]),d=A["scaleLinear"]().range([0,.1*this.height]).domain([0,u]);this.VolumeBarContainer.append("g").selectAll("rect").data(s).attr("class","volumeBar").enter().append("rect").attr("x",(function(t){return l(t[0].timeStamp)})).attr("y",(function(t){return.9*o.height-d(A["sum"](t,(function(t){return t.tradeVolume})))})).attr("height",(function(t){return d(A["sum"](t,(function(t){return t.tradeVolume})))})).attr("width",this.width/r/(150/i)).attr("fill","SteelBlue").attr("transform","translate(".concat(e,", 0)")).on("mouseover",(function(){A["select"](this).attr("fill","Maroon")})).on("mouseout",(function(){A["select"](this).attr("fill","SteelBlue")}))}},{key:"bucketDataByMinute",value:function(t,e){var n={};t.forEach((function(t){var a=new Date(t.timeStamp),r=Math.floor(a.getMinutes()/e)*e;n[r]||(n[r]=[]),n[r].push(t)}));var a=Object.values(n);return a}},{key:"drawGradTimeline",value:function(t,e,n,a,r){var o=10,i=(this.bucketDataByMinute(t,o),A["timeParse"]("%Y/%m/%d %H:%M:%S"));t.forEach((function(t){t.timeStamp=i(t.timeStamp)})),n=this.formatDateToCustomDateString(n),a=this.formatDateToCustomDateString(a);var s=A["scaleTime"]().range([0,this.width]).domain([A["min"](t,(function(t){return t.timeStamp})),A["max"](t,(function(t){return t.timeStamp}))]),c=A["timeParse"]("%Y-%m-%dT%H:%M:%S.%LZ");timelineData.forEach((function(t){t.startDate=c(t.startDate),t.endDate=c(t.endDate)})),this.chartContainer.append("g").selectAll("rect").data(timelineData).enter().append("rect").attr("x",(function(t){return s(t.startDate)})).attr("y",this.height-10).attr("width",(function(t){return s(t.endDate)-s(t.startDate)})).attr("height",10).attr("fill","#FFD325").attr("rx",4).attr("stroke","white").style("stroke-width",2).attr("fill","none")}},{key:"generateVirtualFeature",value:function(t,e,n){var a={transactionData:{timeStamp:"timeStamp",netValue:null,tradeVolume:null},valuationData:{timeStamp:"timeStamp",netValue:null,tradeVolume:null,bond_cd:null,valuationPrice:null,profitRate:null,recommendFlag:null}},r=a[n],o={};if(r)for(var i in o["timeStamp"]=t+e.timeStamp,r)"timeStamp"!==i&&(o[i]=r[i]);return o}},{key:"dataFilter",value:function(t,e){var n=[];Array.isArray(t)||(t=[t]);var a=new Date("".concat(e," 12:00:00+08:00")),r=t.filter((function(t){return new Date(t.timeStamp)<a})),o=t.filter((function(t){return new Date(t.timeStamp)>=a}));return n.push({AM:r,PM:o}),n}}]),t}(),s=new i(t,e,n,a,this,o);s.drawMultiDayData("mktPrice")},fetchData:function(){var t=this;return Object(V["a"])(Object(O["a"])().mark((function e(){var n,a,r,o,i,s;return Object(O["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=function(t){var e=-1/0,n=1/0;return t.forEach((function(t){t.netValue>e&&(e=t.netValue),t.netValue<n&&(n=t.netValue)})),[n,e]},n=function(t,e,n){return new Promise(function(){var a=Object(V["a"])(Object(O["a"])().mark((function a(r,o){var i;return Object(O["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=new N(t,e,n),a.prev=1,a.next=4,i.generateData(t,e,n);case 4:r(i.dataPackage),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](1),o(a.t0);case 10:case"end":return a.stop()}}),a,null,[[1,7]])})));return function(t,e){return a.apply(this,arguments)}}())},function(t){var e=t[0],n=t[1],a=e+50*n,r=e-50*n;return[r,a]},function(t){var e=t.reduce((function(t,e){return t+e}),0)/t.length,n=t.reduce((function(t,n){return t+Math.pow(n-e,2)}),0)/t.length;return[e,n]},e.prev=4,e.next=7,n(t.bond_cd,t.end_date,t.duration_days);case 7:return r=e.sent,o=r.mktPrice,i=a(o),s=F.a.cloneDeep(r),t.drawMultiCharts(s,t.bond_cd,t.end_date,t.duration_days,t,i),e.abrupt("return",r);case 15:e.prev=15,e.t0=e["catch"](4),console.log("Error:",e.t0);case 18:case"end":return e.stop()}}),e,null,[[4,15]])})))()}}},K=q,Y=(n("69b2"),n("2877")),Q=Object(Y["a"])(K,L,j,!1,null,"573beb6f",null),J=Q.exports,Z={name:"MacroCard",components:{BCard:f["a"],BButton:v["a"],BCardBody:y["a"],BIconPlusSquare:m["j"],BIconDashSquare:m["e"],BCardHeader:b["a"],MarcoGlyph:J},props:["bond_cd","bond_name","transaction_num","transaction_volume","duration_days","end_date"],data:function(){return{selected:!1}},mounted:function(){},methods:{onClick:function(){this.selected=!this.selected,this.$root.$emit("ChangeBondSelection",this.bond_cd)}}},X=Z,tt=Object(Y["a"])(X,E,M,!1,null,null,null),et=tt.exports,nt=n("6ff4"),at=(nt.format,{name:"MacroView",components:{BCard:f["a"],BIcon:g["a"],BIconArrowUp:m["c"],BIconArrowDown:m["a"],BButton:v["a"],BCardHeader:b["a"],BCardBody:y["a"],BNavbar:x["a"],BDropdown:_["a"],BDropdownGroup:k["a"],BDropdownItem:w["a"],BIconGear:m["h"],BFormTags:S["a"],VueSlider:h.a,BInputGroup:B["a"],BInputGroupText:D["a"],BFormInput:P["a"],MarcoCard:et,BButtonGroup:C["a"],BButtonToolbar:T["a"]},props:["all_bond_list","end_date","duration_days"],data:function(){return{bond_list:null,transaction_num_range:["0","2000"],transaction_volume_range:["1000","50000"],transaction_num_range_list:["0","3","5","10","100","1000","2000"],transaction_volume_range_list:["1000","3000","5000","8000","10000","20000","50000"],Threshold_local:1,sortByNum:"",sortByVol:"",isSortByNumSelected:!1,isSortByVolSelected:!1,filteredBonds:null,searchQuery:"",date:null,marcoDataLoaded:!1}},methods:{fetchData:function(){var t=this;s["get"]("http://localhost:5003/api/bondSummaryData").then((function(e){t.bond_list=e.data.bondSummaryData,t.isLoading=!1,t.$emit("data-loaded",t.bond_list),t.marcoDataLoaded=!0})).catch((function(t){console.error("Error fetching bond summary data:",t)}))},timeClick:function(t){var e=t.toISOString().slice(0,10),n="http://localhost:5003/api/getAllData/".concat(e);console.log("timeClick",n),this.fetchData()},updateNumSort:function(t){this.sortByNum=t,this.isSortByNumSelected=!0,console.log(this.sortByNum)},updateVolSort:function(t){this.sortByVol=t,this.isSortByVolSelected=!0,console.log(this.sortByVol)}},created:function(){this.bond_list=this.all_bond_list},mounted:function(){},watch:{sortByNum:function(t){t&&(this.isSortByNumSelected=!0,this.isSortByVolSelected=!1)},sortByVol:function(t){t&&(this.isSortByVolSelected=!0,this.isSortByNumSelected=!1)},marcoDataLoaded:function(t){t&&console.log("marcoDataLoaded 已更新为 true，开始渲染 MarcoCard 组件")}},computed:{filteredAndSortedProjects:function(){var t=this,e=this.transaction_num_range.map((function(t){return parseInt(t)})),n=this.transaction_volume_range.map((function(t){return parseInt(t)})),a=Math.min.apply(Math,Object(d["a"])(e)),r=Math.max.apply(Math,Object(d["a"])(e)),o=Math.min.apply(Math,Object(d["a"])(n)),i=Math.max.apply(Math,Object(d["a"])(n));if(this.filteredBonds=this.bond_list.filter((function(t){var e=t.Transaction_num>=a&&t.Transaction_num<r,n=t.Transaction_volume>=o&&t.Transaction_volume<i;return e&&n})),!this.sortByNum&&!this.sortByVol)return this.filteredBonds;var s=Object(d["a"])(this.filteredBonds);return s=s.filter((function(e){var n=e.Bond_cd.toString();return e.Bond_name.toLowerCase().includes(t.searchQuery.toLowerCase())||n.toLowerCase().includes(t.searchQuery.toLowerCase())})),this.isSortByNumSelected&&("num_descending"===this.sortByNum?s.sort((function(t,e){return t.Transaction_num-e.Transaction_num})):"num_ascending"===this.sortByNum&&s.sort((function(t,e){return e.Transaction_num-t.Transaction_num}))),this.isSortByVolSelected&&("vol_descending"===this.sortByVol?s.sort((function(t,e){return t.Transaction_volume-e.Transaction_volume})):"vol_ascending"===this.sortByVol&&s.sort((function(t,e){return e.Transaction_volume-t.Transaction_volume}))),s}}}),rt=at,ot=(n("2af3"),Object(Y["a"])(rt,u,l,!1,null,"2b25dd0a",null)),it=ot.exports,st=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-card-header",{staticClass:"large-header",staticStyle:{height:"25px",padding:"20px 20px 2px 20px"}}),n("b-card-body",{staticStyle:{overflow:"scroll",height:"375px",padding:"5px",border:"0.5px solid rgba(204, 204, 204, 0.2)"}},[n("TransactionChain")],1)],1)},ct=[],ut=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("svg",{ref:"chart",attrs:{width:t.width,height:t.height}})])},lt=[],dt={components:{},data:function(){return{width:775,height:705}},mounted:function(){this.getDataAndDraw()},methods:{getDataAndDraw:function(){var t=this;return Object(V["a"])(Object(O["a"])().mark((function e(){var n,a;return Object(O["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.get("http://localhost:5003/api/the_transaction_chains_data");case 3:n=e.sent,console.log("response",n),a=A["select"](t.$refs.chart),t.drawChart(a,n.data),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),console.error("Error fetching data:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()},drawChart:function(t,e){var n={color:function(t,e){return"blue"}};t.selectAll(".link").data(e.bundles).enter().append("g").attr("class","link").selectAll("path").data((function(t){return t.links})).enter().append("path").attr("d",(function(t){return"M".concat(t.xt," ").concat(t.yt," L").concat(t.xb," ").concat(t.yt)})).attr("stroke",(function(t,a){return n.color(e.bundles[a],a)})).attr("stroke-width",2),t.selectAll(".node").data(e.nodes).enter().append("circle").attr("class","node").attr("cx",(function(t){return t.xy_coordinates.x/1.5})).attr("cy",(function(t){return(t.xy_coordinates.y+50)/1.5})).attr("r",7).attr("fill",(function(t){return"rgb(".concat(t.color[0],", ").concat(t.color[1],", ").concat(t.color[2],")")})).attr("stroke-width",2),t.selectAll(".label").data(e.nodes).enter().append("text").attr("class","label").attr("x",(function(t){return t.xy_coordinates.x/1.5})).attr("y",(function(t){return(t.xy_coordinates.y+50)/1.5})).attr("dy","-1em").attr("text-anchor","middle").style("font-size","8px")}}},pt=dt,ht=(n("9c07"),Object(Y["a"])(pt,ut,lt,!1,null,null,null)),ft=ht.exports,gt=n("6ff4"),mt=(gt.format,{name:"MacroView",components:{BCard:f["a"],BIcon:g["a"],BIconArrowUp:m["c"],BIconArrowDown:m["a"],BButton:v["a"],BCardHeader:b["a"],BCardBody:y["a"],BNavbar:x["a"],BDropdown:_["a"],BDropdownGroup:k["a"],BDropdownItem:w["a"],BIconGear:m["h"],BFormTags:S["a"],VueSlider:h.a,BInputGroup:B["a"],BInputGroupText:D["a"],BFormInput:P["a"],BButtonGroup:C["a"],BButtonToolbar:T["a"],TransactionChain:ft},props:[],data:function(){return{}},methods:{},created:function(){},mounted:function(){},watch:{},computed:{}}),vt=mt,bt=(n("31dd"),Object(Y["a"])(vt,st,ct,!1,null,null,null)),yt=bt.exports,xt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-card-header",{staticClass:"large-header",staticStyle:{height:"25px",padding:"20px 20px 2px 20px"}}),n("b-card-body",{staticStyle:{height:"375px",padding:"5px",border:"0.5px solid rgba(204, 204, 204, 0.2)"}},[n("div",{attrs:{id:"canvas"}})])],1)},_t=[],kt=(n("d9cb"),n("2d5b"),n("b0c0"),n("9911"),n("6dd4"),function(){function t(){Object($["a"])(this,t),this.sankey=d3.sankey(),this.formatNumber=d3.format(","),this.graph=null,this.width=null,this.height=null,this.tooltips=[],this.tooltipEnable=!0,this.tooltipContainer=null,this.tbody=null}return Object(G["a"])(t,[{key:"prepare",value:function(t,e,n){this.width=e.width-n.left-n.right,this.height=e.height-n.top-n.bottom,this.graph=t.append("svg").attr("width",e.width).attr("height",e.height).append("g").attr("transform","translate("+n.left+","+n.top+")"),this.tooltipContainer=t.append("div").attr("id","tooltip-container"),this.tbody=this.tooltipContainer.append("table").attr("class","tooltip").append("tbody")}},{key:"draw",value:function(t){var e=this;function n(t){var n=e.graph.selectAll("g#node-group").data([0]);n.enter().append("g").attr("id","node-group");var a=n.selectAll("g.node").data(t);console.log("group:",t),a.exit().remove();var r=a.enter().append("g").attr("class","node").on("mouseover",e.funcMouseover).on("mouseout",e.funcMouseout).on("mousemove",e.funcMousemove).on("dblclick",e.funcTooltipToggle).call(d3.drag().on("start",(function(t,e){d3.event.sourceEvent.stopPropagation(),this.parentNode.appendChild(this)})).on("drag",(function(t,n){var a=t.y;n.y=a,d3.select(this).attr("transform","translate("+(n.x=Math.max(0,Math.min(e.width-n.dx,t.x)))+","+a+")"),e.sankey.relayout(),e.graph.select("g#normal").selectAll("path").attr("d",e.sankey.link()),e.graph.select("g#highlight").selectAll("path").attr("d",e.sankey.link())})));r.append("rect").attr("height",(function(t){return 12})).attr("width",(function(t){return t.dy/5})).attr("rx",4).attr("ry",4).attr("fill","white").attr("stroke","lightgray").attr("stroke-width",1);var o=[{name:"东海证券股份温妍超",time_dl:"2023-12-06 16:44:13",volume:10,price:110.36,xy_coordinates:{x:50,y:0},color:[147,209,188]},{name:"长线资本基金孙姣",time_dl:"2023-12-06 16:44:13",volume:10,price:110.36,xy_coordinates:{x:70,y:0},color:[209,168,147]},{name:"华源证券股份钱淑雯",time_dl:"2023-12-07 13:33:23",volume:10,price:110.51,xy_coordinates:{x:93.55271621933369,y:0},color:[147,209,147]},{name:"鄂尔多斯银行郭宁",time_dl:"2023-12-07 13:35:23",volume:10,price:110.53,xy_coordinates:{x:113.55271621933369,y:0},color:[209,188,147]},{name:"粤开证券股份周荃",time_dl:"2023-12-22 13:54:34",volume:10,price:112.83,xy_coordinates:{x:847.3842802296235,y:0},color:[209,147,147]}];a.select("rect").attr("height",(function(t){return 12})).attr("width",(function(t){return t.dy/5})).attr("rx",4).attr("ry",4).attr("fill","white").attr("stroke","lightgray").attr("stroke-width",1),a.selectAll("circle").data(o).enter().append("circle").attr("cx",(function(t,e){return 7+10*e})).attr("cy",6).attr("r",5).attr("fill",(function(t){return"rgb(".concat(t.color[0],", ").concat(t.color[1],", ").concat(t.color[2],")")})),a.select("text").attr("x",-6).attr("y",(function(t){return 20})).attr("dy",".35em").attr("text-anchor","end").attr("transform",null).text((function(t){return t.disp})).filter((function(t){return t.x<e.width/2})).attr("x",6+e.sankey.nodeWidth()).attr("text-anchor","start")}function a(t){var n=e.graph.selectAll("g#normal").data([0]);n.enter().insert("g",":first-child").attr("id","normal");var a=n.selectAll("path.link").data(t);a.exit().remove(),a.enter().append("path").attr("class","link").on("mouseover",e.funcMouseover).on("mouseout",e.funcMouseout).on("mousemove",e.funcMousemove).on("dblclick",e.funcTooltipToggle),a.attr("d",e.sankey.link()).style("stroke-width",(function(t){return 3})).sort((function(t,e){return e.dy-t.dy}))}console.log("inputdata:",t),this.sankey.nodeWidth(40).nodePadding(10).size([this.width,this.height]),this.sankey.nodes(t.nodes).flows(t.flows).layout(32),n(this.sankey.nodes()),a(this.sankey.links())}},{key:"funcMouseover",value:function(t){this.sankey.dflows(t.flows),this.drawDLink(this.sankey.dlinks()),this.updateTooltip(t),this.tooltipContainer.style("display","block")}},{key:"funcMouseout",value:function(){this.graph.selectAll("g#highlight").remove(),this.tooltipContainer.style("display","none")}},{key:"funcMousemove",value:function(){this.tooltipContainer.style("top",d3.event.clientY+"px").style("left",d3.event.clientX+"px")}},{key:"funcTooltipToggle",value:function(t){this.tooltipEnable=!this.tooltipEnable,this.updateTooltip(t)}},{key:"drawDLink",value:function(t){return this.graph.insert("g",":first-child").attr("id","highlight").selectAll("path").data(t).enter().append("path").attr("class","link highlight").attr("d",this.sankey.link()).style("stroke-width",(function(t){return 10})).sort((function(t,e){return e.dy-t.dy}))}},{key:"updateTooltip",value:function(t){this.tooltips=[t.tooltip],this.tooltipEnable&&t.flows.forEach((function(t){this.tooltips.push(t.tooltip)})),this.tbody.selectAll("*").remove(),this.tooltips.forEach((function(t){var e=this.tbody.append("tr");e.append("td").attr("class","name").classed("head","head"in t).html(t.name+" → "+t.name+" → "+t.name),e.append("td").attr("class","value").classed("head","head"in t).html(t.value)}))}}]),t}()),wt=kt,St=n("6ff4"),Bt=(St.format,{name:"MacroView",components:{BCard:f["a"],BIcon:g["a"],BIconArrowUp:m["c"],BIconArrowDown:m["a"],BButton:v["a"],BCardHeader:b["a"],BCardBody:y["a"],BNavbar:x["a"],BDropdown:_["a"],BDropdownGroup:k["a"],BDropdownItem:w["a"],BIconGear:m["h"],BFormTags:S["a"],VueSlider:h.a,BInputGroup:B["a"],BInputGroupText:D["a"],BFormInput:P["a"],BButtonGroup:C["a"],BButtonToolbar:T["a"],TransactionChain:ft},props:[],data:function(){return{}},methods:{SankeyChart:function(){d3.json("asset/titanic-data.json",(function(t){console.log("titanicData:",t)}))},getDataAndDraw:function(){return Object(V["a"])(Object(O["a"])().mark((function t(){var e,n,a,r,o;return Object(O["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s["get"]("http://localhost:5003/api/transaction_sankey_data");case 3:e=t.sent,n=e.data,console.log("transaction_sankey_data:",n),a={top:0,bottom:10,left:0,right:10},r={width:960,height:400},o=new wt,console.log("sankeyDriver:",o),o.prepare(d3.select("#canvas"),r,a),o.draw(n),t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](0),console.error("Error fetching data:",t.t0);case 17:case"end":return t.stop()}}),t,null,[[0,14]])})))()}},created:function(){},mounted:function(){this.getDataAndDraw()},watch:{},computed:{}}),Dt=Bt,Pt=(n("a48d"),Object(Y["a"])(Dt,xt,_t,!1,null,null,null)),Ct=Pt.exports,Tt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-card-header",{staticClass:"small-header",staticStyle:{"font-size":"12px",height:"25px"}},[n("b-button",{staticStyle:{"font-size":"12px",float:"right","margin-right":"10px",padding:"0px 5px",height:"15px",display:"flex","align-items":"center"},attrs:{variant:"outline-secondary"},on:{click:function(e){return t.updateLassoAction("add")}}},[n("i",{staticClass:"el-icon-plus"})]),n("b-button",{staticStyle:{"font-size":"12px",float:"right","margin-right":"10px",padding:"0px 5px",height:"15px",display:"flex","align-items":"center"},attrs:{variant:"outline-secondary"},on:{click:function(e){return t.updateLassoAction("remove")}}},[n("i",{staticClass:"el-icon-minus"})])],1),n("b-card-body",{staticClass:"graph_body",staticStyle:{height:"775px",padding:"0px 0px 0px 0px",border:"0.5px solid rgba(204, 204, 204, 0.2)"}},[n("HistogramSlider"),n("svg",{staticStyle:{height:"675px",width:"893px"},attrs:{id:"globalGraphView"}})],1)],1)},Et=[],Mt=n("5530"),At=(n("a15b"),n("e9c4"),n("4360")),Lt=n("2f62"),jt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{ref:"timeLineView",style:{height:"100px",width:"760px",border:"0.5px solid rgba(204, 204, 204, 0.2)"}})},Ot=[];function Vt(t,e){var n={w:760,h:150,margin:{top:20,bottom:20,left:20,right:20},bucketSize:1,defaultRange:[0,100],format:A["format"](".3s")},a=A["extent"](Object.keys(t).map((function(t){return+t}))),r=Object(I["a"])(a,2),o=r[0],i=r[1],s=[o,i+1],c=Object(Mt["a"])(Object(Mt["a"])({},n),e),u=c.w,l=c.h,d=c.margin,p=c.defaultRange,h=c.bucketSize,f=c.format,g=u-d.left-d.right,m=l-d.top-d.bottom,v=A["scaleLinear"]().domain(s).range([0,g]),b=A["scaleLinear"]().domain([0,A["max"](Object.values(t))]).range([0,m]),y=A["create"]("svg").attr("width",u).attr("height",l),x=y.append("g").attr("transform","translate(".concat(d.left,", ").concat(d.top,")"));x.append("g").selectAll("rect").data(A["range"](s[0],s[1]+1)).enter().append("rect").attr("x",(function(t){return v(t)})).attr("y",(function(e){return m-b(t[e]||0)})).attr("width",g/(s[1]-s[0])).attr("height",(function(e){return b(t[e]||0)})).style("fill","#555"),x.append("g").selectAll("line").data(A["range"](s[0],s[1]+1)).enter().append("line").attr("x1",(function(t){return v(t)})).attr("x2",(function(t){return v(t)})).attr("y1",0).attr("y2",m).style("stroke","#ccc"),x.append("text").attr("id","label-min").attr("x",-2).attr("y",m+15).text(o),x.append("text").attr("id","label-max").attr("x",-2).attr("y",-5).text(i),x.append("text").attr("id","labelleft").attr("x",0).attr("y",m+15),x.append("text").attr("id","labelright").attr("x",0).attr("y",m+5);var _=A["brushX"]().extent([[0,0],[g,m]]).on("brush",(function(){var t=A["event"].selection;x.select("#labelleft").attr("x",t[0]).text(f(Math.round(v.invert(t[0]))*h)),x.select("#labelright").attr("x",t[1]).text(f((Math.round(v.invert(t[1]))-1)*h))})),k=x.append("g").attr("class","brush").call(_);return k.call(_.move,p.map((function(t){return g*(t/100)})).map(v.invert).map(Math.round).map(v)),y.node()}var It={mounted:function(){var t=this.$refs.timeLineView,e=Vt({1:12,2:18,8:14,9:2,12:22,15:8,22:3,26:3,30:6},{h:100,defaultRange:[25,75],bucketSize:10});t.appendChild(e)},methods:{}},$t=It,Gt=Object(Y["a"])($t,jt,Ot,!1,null,null,null),Rt=Gt.exports,zt=(n("e109"),n("6ff4")),Nt=(zt.format,{name:"GraphView",components:{BCard:f["a"],BIcon:g["a"],BIconArrowUp:m["c"],BIconArrowDown:m["a"],BButton:v["a"],BCardHeader:b["a"],BCardBody:y["a"],BNavbar:x["a"],BDropdown:_["a"],BDropdownGroup:k["a"],BDropdownItem:w["a"],BIconGear:m["h"],BFormTags:S["a"],BInputGroup:B["a"],BInputGroupText:D["a"],BFormInput:P["a"],BButtonGroup:C["a"],BButtonToolbar:T["a"],HistogramSlider:Rt},props:[],data:function(){return{jsonData:!1,force:null,transaction_chains:null,mouseX:0,mouseY:0,showMenu:!1}},methods:{handleContextMenuItemClick:function(t){},showContextMenu:function(t,e,n){var a=t,r=e;console.log("Clicked 79",n);var o=d3.select("#globalGraphView").append("div").attr("class","context-menu").style("position","absolute").style("left",a+"px").style("top",r+"px");o.selectAll("div").data(n).enter().append("div").text((function(t){return t.label})).on("click",(function(t){handleContextMenuItemClick(t),o.remove()})),d3.select("#globalGraphView").on("click.contextmenu",(function(){o.remove()}))},split:function(t){console.log("splitFunction",t)},highlightPath:function(t){var e=d3.select("#globalGraphView"),n=e.append("g").attr("class","highlighted-path");n.selectAll("line").data(t).enter().append("line").attr("stroke","blue").attr("stroke-opacity",1).attr("x1",(function(t){return t.source.x})).attr("y1",(function(t){return t.source.y})).attr("x2",(function(t){return t.target.x})).attr("y2",(function(t){return t.target.y}))},drawGraph:function(t){var e=t.links,n=t.nodes,a=1063,r=900,o=d3.forceSimulation(n).force("link",d3.forceLink(e).id((function(t){return t.id}))).force("charge",d3.forceManyBody()).force("center",d3.forceCenter(a/2,r/2)).force("x",d3.forceX().strength(.015)).force("y",d3.forceY().strength(.015)).on("tick",c),i=d3.max(n,(function(t){return t.trader_stats.offset_volume})),s=i/20;function c(){d.attr("x1",(function(t){return t.source.x})).attr("y1",(function(t){return t.source.y})).attr("x2",(function(t){return t.target.x})).attr("y2",(function(t){return t.target.y})),p.attr("transform",(function(t){return"translate(".concat(t.x,",").concat(t.y,")")}))}function u(t,e,n){console.log("Clicked 79",n);var a=d3.select("#globalGraphView").append("g").append("div").attr("class","context-menu").style("position","fixed").style("left",t+"px").style("top",e+"px");a.selectAll("div").data(n).enter().append("div").text((function(t){return t.label})).on("click",(function(t){handleContextMenuItemClick(t),a.remove()})),d3.select("#globalGraphView").on("click.contextmenu",(function(){a.remove()}))}var l=d3.select("#globalGraphView").attr("width",a).attr("height",r).attr("viewBox",[0,0,a,r]).attr("style","max-width: 100%; height: auto;"),d=(d3.select("#globalGraphView").attr("class","graphCon"),l.append("g").attr("stroke","#999").attr("stroke-opacity",.6).selectAll().data(e).join("line")),p=l.append("g").attr("stroke","#fff").attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").selectAll("g").data(n).join("g");function h(e,n){d3.select(this).style("opacity",1).attr("stroke","black");var a=d3.select("#globalGraphView").append("g"),r=e.x,o=e.y;a.append("text").attr("id","node-label").attr("x",r).attr("y",(function(t){return o})).text(n.id).attr("fill","black").attr("font-size","12px").attr("font-family","Arial").attr("alignment-baseline","middle").attr("text-anchor","middle");var i={graph:t,hoveredNode:e["id"]};fetch("http://localhost:5003/api/process_hovered_node",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then((function(t){return t.json()})).then((function(t){})).catch((function(t){console.error("发生错误：",t)}))}function f(){d3.select("#top-layer").select("#node-label").remove(),d3.select("#top-layer").select("#node-label-bg").remove(),d3.select(this).style("opacity",.8).attr("stroke","white")}function g(){d3.event.active||o.alphaTarget(.3).restart(),d3.event.subject.fx=d3.event.subject.x,d3.event.subject.fy=d3.event.subject.y}function m(){d3.event.subject.fx=d3.event.x,d3.event.subject.fy=d3.event.y}function v(){d3.event.active||o.alphaTarget(0),d3.event.subject.fx=null,d3.event.subject.fy=null}p.append("path").attr("d",(function(t){var e=t.trader_stats.profit_percentage/100,n=t.trader_stats.offset_volume/s,a=0,r=2*Math.PI*e,o=d3.arc().innerRadius(n-10).outerRadius(n+10).startAngle(a).endAngle(r);return o()})).attr("fill",(function(t){return t.trader_stats.profit_percentage>=0?"hsl(0, 70%, 70%)":"hsl(120, 70%, 40%)"})).attr("stroke","white"),p.append("path").attr("d",(function(t){var e=t.trader_stats.offset_count,n=t.trader_stats.offset_volume/s,a=0,r=2*Math.PI,o=d3.arc().innerRadius(n+10-e).outerRadius(n+10+e).startAngle(a).endAngle(r);return o()})).attr("fill","hsl(210, 90%, 80%)").attr("stroke","white"),p.append("circle").attr("r",(function(t){return t.trader_stats.offset_volume/s})).attr("fill",(function(t){return t.statistics.is_market_maker?"purple":"steelblue"})),p.on("mouseover",h).on("mouseout",f).on("click",(function(t,e){p.each((function(t){d3.select(this).style("opacity",.8).attr("stroke","white")})),d3.select(this).style("opacity",1).attr("stroke","black"),d3.selectAll(".row text").classed("active",(function(t,n){return n==e})),d3.selectAll(".column text").classed("active",(function(t,n){return n==e}))})),p.on("contextmenu",(function(t,e){d3.event.preventDefault();var n=t.id,a=t.x,r=t.y,o=[{label:"Option 1",action:"option1",data:a},{label:"Option 2",action:"option2",data:r}];u(a,r,o),At["a"].dispatch("TransactionChain/handleRightClick",n)})),p.call(d3.drag().on("start",g).on("drag",m).on("end",v));for(var b=[],y=0;y<this.shortestPath.length-1;y++){var x=this.shortestPath[y],_=this.shortestPath[y+1];b.push([x,_])}var k=d._groups[0];k.forEach((function(t){var e=t.__data__;(b.some((function(t){return t[0].id===e.source.id&&t[1].id===e.target.id}))||b.some((function(t){return t[1].id===e.source.id&&t[0].id===e.target.id})))&&t.setAttribute("stroke","red")}))},getDataAndDraw:function(t){var e=this;return Object(V["a"])(Object(O["a"])().mark((function t(){var n,a,r;return Object(O["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s["get"]("http://localhost:5003/api/get_transaction_chains_sample");case 3:n=t.sent,a=n.data,r=a.nodes.length,a.nodes.forEach((function(t,e){var n=10;t.x=t.y=10+n/r*e})),At["a"].dispatch("TransactionChain/initializeGraph",a),At["a"].dispatch("TransactionChain/findShortestPath",{start:"申港证券股份刘俊骥",end:"方正证券股份崔伟"}),At["a"].dispatch("TransactionChain/updateTransactionChains",a).then((function(){console.log("action"," 完成")})).catch((function(t){console.error("action","出错",t)})),e.drawGraph(a),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](0),console.error("Error fetching data:",t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})))()},handleUserInteraction:function(t){var e=this,n=t;this.$store.dispatch("TransactionChain/updateTransactionChains",n).then((function(){e.drawGraph()})).catch((function(t){console.error("Error updating data in Vuex:",t)}))}},created:function(){},mounted:function(){this.getDataAndDraw()},watch:{},computed:Object(Mt["a"])({transactionChains:function(){return At["a"].state.transactionChains},shortestPath:function(){return At["a"].state.shortestPath}},Object(Lt["d"])({shortestPath:function(t){return t.TransactionChain.shortestPath}}))}),Ht=Nt,Ft=(n("6c5b"),Object(Y["a"])(Ht,Tt,Et,!1,null,null,null)),Ut=Ft.exports,Wt={name:"",components:{MacroView:it,GraphView:Ut,LineView:yt,SankeyView:Ct},data:function(){return{all_bond_list:!1,selected_bond_id_list:[],selected_bond_list:[],end_date:"2023-07-05",duration_days:1,transactionSummaryData:!1,instnTypes:!1}},computed:{},watch:{selected_bond_id_list:function(t){var e=this;t&&(this.selected_bond_list=this.all_bond_list.filter((function(t){return e.selected_bond_id_list.includes(t.Bond_cd)})))}},created:function(){},mounted:function(){var t=this;s["get"]("http://localhost:5003/api/bondSummaryData").then((function(e){var n=e.data.bondSummaryData;t.all_bond_list=n})),s["get"]("http://localhost:5003/api/institution_types").then((function(t){var e=JSON.parse(t.data.instn_dict);console.log("data:",e)})),this.$root.$on("ChangeBondSelection",(function(e){t.selected_bond_id_list.includes(e)?t.selected_bond_id_list=t.selected_bond_id_list.filter((function(t){return t!==e})):t.selected_bond_id_list.push(e)}))},methods:{generateTransactionSummary:function(){for(var t=[],e=1;e<=50;e++){var n={Bond_cd:e,Bond_name:"Name_"+i.a.Random.string("upper",3,4),Transaction_num:i.a.Random.integer(0,2e3),Transaction_volume:i.a.Random.float(0,3e3,2,2)};t.push(n)}return t},randomDateInRange:function(){var t=new Date,e=new Date,n=i.a.Random.integer(t.getTime(),e.getTime());return new Date(n)}}},qt=Wt,Kt=(n("8893"),Object(Y["a"])(qt,a,r,!1,null,"60d96c7c",null));e["default"]=Kt.exports},"5a58":function(t,e,n){},"69b2":function(t,e,n){"use strict";n("af49")},"6c5b":function(t,e,n){"use strict";n("5a58")},"6dd4":function(t,e,n){var a=n("7037").default;n("4de4"),n("d81d"),n("fb6a"),n("4e82"),n("b0c0"),n("a9e3"),n("d3b7"),n("159b"),n("ddb0"),d3.sankey=function(){var t={},e=60,n=8,r=[1,1],o=[],i=[],s=[],c={},u=[],l=[],d={},p=0;function h(){o.forEach((function(t){t.sourceLinks=[],t.targetLinks=[]})),s.forEach((function(t){var e=t.source,n=t.target;e.sourceLinks.push(t),n.targetLinks.push(t)}))}function f(){o.forEach((function(t){t.value=Math.max(d3.sum(t.sourceLinks,S),d3.sum(t.targetLinks,S))}))}function g(){var t,n=o,a=0;function i(t){t.x=a,t.dx=e,t.sourceLinks.forEach(s)}function s(e){t.indexOf(e.target)<0&&t.push(e.target)}while(n.length)t=[],n.forEach(i),n=t,++a;m(a),v((r[0]-e)/(a-1))}function m(t){o.forEach((function(e){e.sourceLinks.length||(e.x=t-1)}))}function v(t){o.forEach((function(e){e.x*=t}))}function b(t){var e=d3.nest().key((function(t){return t.x})).sortKeys(d3.ascending).entries(o).map((function(t){return t.values}));i(),l();for(var a=1;t>0;--t)u(a*=.99),l(),c(a),l();function i(){p=d3.min(e,(function(t){return(r[1]-(t.length-1)*n)/d3.sum(t,S)})),e.forEach((function(t){t.forEach((function(t,e){t.y=e,t.dy=t.value*p}))})),s.forEach((function(t){t.dy=t.value*p}))}function c(t){function n(t){return w(t.source)*t.value}e.forEach((function(e,a){e.forEach((function(e){if(e.targetLinks.length){var a=d3.sum(e.targetLinks,n)/d3.sum(e.targetLinks,S);e.y+=(a-w(e))*t}}))}))}function u(t){function n(t){return w(t.target)*t.value}e.slice().reverse().forEach((function(e){e.forEach((function(e){if(e.sourceLinks.length){var a=d3.sum(e.sourceLinks,n)/d3.sum(e.sourceLinks,S);e.y+=(a-w(e))*t}}))}))}function l(){e.forEach((function(t){var e,a,o,i=0,s=t.length;for(t.sort(y),o=0;o<s;++o)e=t[o],a=i-e.y,a>0&&(e.y+=a),i=e.y+e.dy+n;if(a=i-n-r[1],a>0)for(i=e.y-=a,o=s-2;o>=0;--o)e=t[o],a=e.y+e.dy+n-i,a>0&&(e.y-=a),i=e.y}))}}function y(t,e){return t.y-e.y}function x(){o.forEach((function(t){t.sourceLinks.sort(k),t.targetLinks.sort(_)})),o.forEach((function(t){var e=0,n=0;t.sourceLinks.forEach((function(t){t.sy=e,e+=t.dy})),t.targetLinks.forEach((function(t){t.ty=n,n+=t.dy}))}))}function _(t,e){return t.source.y-e.source.y}function k(t,e){return t.target.y-e.target.y}function w(t){return t.y+t.dy/2}function S(t){return t.value}function B(t,e){return"number"===typeof t?o[t].name+"|"+o[e].name:"object"===a(t)?t.name+"|"+e.name:"string"===typeof t?t+"|"+e:void console.error("wrong type")}function D(){for(var t=u.length-1;t>=0;t--)for(var e=u[t],n=1;n<e.thru.length-1;n++){var a,r,o,i,s,l,p,h,f,g,m,v,b,y,x,_,k;m=B(e.thru[n-1],e.thru[n]),v=B(e.thru[n],e.thru[n+1]),b=c[m],y=c[v],x=d[m],_=d[v],k=b.ty,h=b.dy,g=y.sy,f=y.dy,i=x.dy,s=_.dy,o=Math.max(k,g),r=Math.min(k+h,g+f),a=(o+r)/2,p=a-i/2,l=a-s/2,p=Math.max(p,k),p=Math.min(p,k+h-i),l=Math.max(l,g),l=Math.min(l,g+f-s),x.ty=p,_.sy=l,x.sy||(x.sy=b.sy-(b.ty-x.ty)),_.ty=y.ty-(y.sy-_.sy)}}return t.nodeWidth=function(n){return arguments.length?(e=+n,t):e},t.nodePadding=function(e){return arguments.length?(n=+e,t):n},t.nodes=function(e){return arguments.length?(o=e,t):o},t.links=function(e){return arguments.length?(s=e,t):s},t.size=function(e){return arguments.length?(r=e,t):r},t.layout=function(e){return h(),f(),g(),b(e),x(),t},t.relayout=function(){return x(),D(),t},t.link=function(){var t=.4;function e(e){var n=e.source.x+e.source.dy/5,a=e.target.x,r=d3.interpolateNumber(n,a),o=r(t),i=r(1-t),s=e.source.y+5,c=e.target.y+5;return"M"+n+","+s+"C"+o+","+s+" "+i+","+c+" "+a+","+c}return e.curvature=function(n){return arguments.length?(t=+n,e):t},e},t.flows=function(e){if(!arguments.length)return i;for(var n in o.length||console.error("sankey.nodes() must be called before flows(). Or maybe matric has no positive value"),i=e,c={},i.forEach((function(t,e){t.thru=t.thru.map((function(t){return"object"===a(t)?t:"number"===typeof t?o[t]:"string"===typeof t?o.filter((function(e){return e.name===t}))[0]:(console.error("not supported node type"),null)})),t.thru.forEach((function(t){t.flows||(t.flows={}),t.flows[e]=!0}));for(var n=0;n<t.thru.length-1;n++){var r=B(t.thru[n],t.thru[n+1]);c[r]?(c[r].value+=Number(t.value),c[r].flows.push(t)):c[r]={source:t.thru[n],target:t.thru[n+1],value:Number(t.value),flows:[t]}}})),o.forEach((function(t){var e=t.flows;for(var n in t.flows=[],e)t.flows.push(i[n])})),s=[],c){var r=c[n];s.push(r)}return t},t.dflows=function(e){if(!arguments.length)return u;for(var n in u=e,d={},u.forEach((function(t){for(var e=0;e<t.thru.length-1;e++){var n=B(t.thru[e],t.thru[e+1]);d[n]?d[n].value+=Number(t.value):d[n]={source:t.thru[e],target:t.thru[e+1],value:Number(t.value),sy:c[n].sy,ty:c[n].ty}}})),l=[],d){var a=d[n];a.dy=a.value*p,l.push(d[n])}return this.relayout(),t},t.dlinks=function(){return l},t}},"6e74":function(t,e,n){},"75ed":function(t,e,n){},"7f75":function(t,e,n){},8893:function(t,e,n){"use strict";n("75ed")},"8e1a":function(t,e,n){},"9c07":function(t,e,n){"use strict";n("7f75")},a48d:function(t,e,n){"use strict";n("8e1a")},af49:function(t,e,n){},d9cb:function(t,e,n){var a,r=n("7037").default;n("4de4"),n("a15b"),n("fb6a"),n("a434"),n("e9c4"),n("b64b"),n("d3b7"),n("4d63"),n("ac1f"),n("2c3e"),n("00b4"),n("25f0"),n("466d"),n("5319"),n("841c"),n("1276"),n("498a"),n("159b"),
/*! showdown 27-08-2015 */
function(){function o(t){"use strict";var e={omitExtraWLInCodeBlocks:{default:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{default:!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{default:!1,describe:"Specify a prefix to generated header ids",type:"string"},headerLevelStart:{default:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{default:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{default:!1,describe:"Turn on/off GFM autolink style",type:"boolean"},literalMidWordUnderscores:{default:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},strikethrough:{default:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{default:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{default:!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{default:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{default:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{default:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"}};if(!1===t)return JSON.parse(JSON.stringify(e));var n={};for(var a in e)e.hasOwnProperty(a)&&(n[a]=e[a]["default"]);return n}function i(t,e){"use strict";var n=e?"Error in "+e+" extension->":"Error in unnamed extension",a={valid:!0,error:""};c.helper.isArray(t)||(t=[t]);for(var o=0;o<t.length;++o){var i=n+" sub-extension "+o+": ",s=t[o];if("object"!=r(s))return a.valid=!1,a.error=i+"must be an object, but "+r(s)+" given",a;if(!c.helper.isString(s.type))return a.valid=!1,a.error=i+'property "type" must be a string, but '+r(s.type)+" given",a;var u=s.type=s.type.toLowerCase();if("language"===u&&(u=s.type="lang"),"html"===u&&(u=s.type="output"),"lang"!==u&&"output"!==u)return a.valid=!1,a.error=i+"type "+u+' is not recognized. Valid values: "lang" or "output"',a;if(s.filter){if("function"!=typeof s.filter)return a.valid=!1,a.error=i+'"filter" must be a function, but '+r(s.filter)+" given",a}else{if(!s.regex)return a.valid=!1,a.error=i+'extensions must define either a "regex" property or a "filter" method',a;if(c.helper.isString(s.regex)&&(s.regex=new RegExp(s.regex,"g")),!s.regex instanceof RegExp)return a.valid=!1,a.error=i+'"regex" property must either be a string or a RegExp object, but '+r(s.regex)+" given",a;if(c.helper.isUndefined(s.replace))return a.valid=!1,a.error=i+'"regex" extensions must implement a replace string or function',a}if(c.helper.isUndefined(s.filter)&&c.helper.isUndefined(s.regex))return a.valid=!1,a.error=i+"output extensions must define a filter property",a}return a}function s(t,e){"use strict";var n=e.charCodeAt(0);return"~E"+n+"E"}var c={},u={},l={},d=o(!0),p={github:{omitExtraWLInCodeBlocks:!0,prefixHeaderId:"user-content-",simplifiedAutoLink:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0},vanilla:o(!0)};c.helper={},c.extensions={},c.setOption=function(t,e){"use strict";return d[t]=e,this},c.getOption=function(t){"use strict";return d[t]},c.getOptions=function(){"use strict";return d},c.resetOptions=function(){"use strict";d=o(!0)},c.setFlavor=function(t){"use strict";if(p.hasOwnProperty(t)){var e=p[t];for(var n in e)e.hasOwnProperty(n)&&(d[n]=e[n])}},c.getDefaultOptions=function(t){"use strict";return o(t)},c.subParser=function(t,e){"use strict";if(c.helper.isString(t)){if("undefined"==typeof e){if(u.hasOwnProperty(t))return u[t];throw Error("SubParser named "+t+" not registered!")}u[t]=e}},c.extension=function(t,e){"use strict";if(!c.helper.isString(t))throw Error("Extension 'name' must be a string");if(t=c.helper.stdExtName(t),c.helper.isUndefined(e)){if(!l.hasOwnProperty(t))throw Error("Extension named "+t+" is not registered!");return l[t]}"function"==typeof e&&(e=e()),c.helper.isArray(e)||(e=[e]);var n=i(e,t);if(!n.valid)throw Error(n.error);l[t]=e},c.getAllExtensions=function(){"use strict";return l},c.removeExtension=function(t){"use strict";delete l[t]},c.resetExtensions=function(){"use strict";l={}},c.validateExtension=function(t){"use strict";var e=i(t,null);return!!e.valid||(console.warn(e.error),!1)},c.hasOwnProperty("helper")||(c.helper={}),c.helper.isString=function(t){"use strict";return"string"==typeof t||t instanceof String},c.helper.forEach=function(t,e){"use strict";if("function"==typeof t.forEach)t.forEach(e);else for(var n=0;n<t.length;n++)e(t[n],n,t)},c.helper.isArray=function(t){"use strict";return t.constructor===Array},c.helper.isUndefined=function(t){"use strict";return"undefined"==typeof t},c.helper.stdExtName=function(t){"use strict";return t.replace(/[_-]||\s/g,"").toLowerCase()},c.helper.escapeCharactersCallback=s,c.helper.escapeCharacters=function(t,e,n){"use strict";var a="(["+e.replace(/([\[\]\\])/g,"\\$1")+"])";n&&(a="\\\\"+a);var r=new RegExp(a,"g");return t.replace(r,s)},c.helper.isUndefined(console)&&(console={warn:function(t){"use strict";alert(t)},log:function(t){"use strict";alert(t)}}),c.Converter=function(t){"use strict";function e(){for(var e in t=t||{},d)d.hasOwnProperty(e)&&(o[e]=d[e]);if("object"!=r(t))throw Error("Converter expects the passed parameter to be an object, but "+r(t)+" was passed instead.");for(var a in t)t.hasOwnProperty(a)&&(o[a]=t[a]);o.extensions&&c.helper.forEach(o.extensions,n)}function n(t,e){if(e=e||null,c.helper.isString(t)){if(t=c.helper.stdExtName(t),e=t,c.extensions[t])return console.warn("DEPRECATION WARNING: "+t+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"),void a(c.extensions[t],t);if(c.helper.isUndefined(l[t]))throw Error('Extension "'+t+'" could not be loaded. It was either not found or is not a valid extension.');t=l[t]}"function"==typeof t&&(t=t()),c.helper.isArray(t)||(t=[t]);var n=i(t,e);if(!n.valid)throw Error(n.error);for(var r=0;r<t.length;++r)switch(t[r].type){case"lang":s.push(t[r]);break;case"output":h.push(t[r]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}function a(t,e){"function"==typeof t&&(t=t(new c.Converter)),c.helper.isArray(t)||(t=[t]);var n=i(t,e);if(!n.valid)throw Error(n.error);for(var a=0;a<t.length;++a)switch(t[a].type){case"lang":s.push(t[a]);break;case"output":h.push(t[a]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}var o={},s=[],h=[],f=["githubCodeBlocks","hashHTMLBlocks","stripLinkDefinitions","blockGamut","unescapeSpecialChars"];e(),this.makeHtml=function(t){if(!t)return t;var e={gHtmlBlocks:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:s,outputModifiers:h,converter:this};t=t.replace(/~/g,"~T"),t=t.replace(/\$/g,"~D"),t=t.replace(/\r\n/g,"\n"),t=t.replace(/\r/g,"\n"),t="\n\n"+t+"\n\n",t=c.subParser("detab")(t,o,e),t=c.subParser("stripBlankLines")(t,o,e),c.helper.forEach(s,(function(n){t=c.subParser("runExtension")(n,t,o,e)}));for(var n=0;n<f.length;++n){var a=f[n];t=u[a](t,o,e)}return t=t.replace(/~D/g,"$$"),t=t.replace(/~T/g,"~"),c.helper.forEach(h,(function(n){t=c.subParser("runExtension")(n,t,o,e)})),t},this.setOption=function(t,e){o[t]=e},this.getOption=function(t){return o[t]},this.getOptions=function(){return o},this.addExtension=function(t,e){e=e||null,n(t,e)},this.useExtension=function(t){n(t)},this.setFlavor=function(t){if(p.hasOwnProperty(t)){var e=p[t];for(var n in e)e.hasOwnProperty(n)&&(o[n]=e[n])}},this.removeExtension=function(t){c.helper.isArray(t)||(t=[t]);for(var e=0;e<t.length;++e){for(var n=t[e],a=0;a<s.length;++a)s[a]===n&&s[a].splice(a,1);for(var r=0;r<h.length;++a)h[r]===n&&h[r].splice(a,1)}},this.getAllExtensions=function(){return{language:s,output:h}}},c.subParser("anchors",(function(t,e,n){"use strict";var a=function(t,e,a,r,o,i,s,u){c.helper.isUndefined(u)&&(u=""),t=e;var l=a,d=r.toLowerCase(),p=o,h=u;if(!p)if(d||(d=l.toLowerCase().replace(/ ?\n/g," ")),p="#"+d,c.helper.isUndefined(n.gUrls[d])){if(!(t.search(/\(\s*\)$/m)>-1))return t;p=""}else p=n.gUrls[d],c.helper.isUndefined(n.gTitles[d])||(h=n.gTitles[d]);p=c.helper.escapeCharacters(p,"*_",!1);var f='<a href="'+p+'"';return""!==h&&null!==h&&(h=h.replace(/"/g,"&quot;"),h=c.helper.escapeCharacters(h,"*_",!1),f+=' title="'+h+'"'),f+">"+l+"</a>"};return t=t.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,a),t=t.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?(.*?(?:\(.*?\).*?)?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,a),t.replace(/(\[([^\[\]]+)\])()()()()()/g,a)})),c.subParser("autoLinks",(function(t,e){"use strict";function n(t,e){var n=c.subParser("unescapeSpecialChars")(e);return c.subParser("encodeEmailAddress")(n)}var a=/\b(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+)(?=\s|$)(?!["<>])/gi,r=/<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)>/gi,o=/\b(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)\b/gi,i=/<(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi;return t=t.replace(r,'<a href="$1">$1</a>'),t=t.replace(i,n),e.simplifiedAutoLink&&(t=t.replace(a,'<a href="$1">$1</a>'),t=t.replace(o,n)),t})),c.subParser("blockGamut",(function(t,e,n){"use strict";t=c.subParser("blockQuotes")(t,e,n),t=c.subParser("headers")(t,e,n);var a=c.subParser("hashBlock")("<hr />",e,n);return t=t.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,a),t=t.replace(/^[ ]{0,2}([ ]?\-[ ]?){3,}[ \t]*$/gm,a),t=t.replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \t]*$/gm,a),t=c.subParser("lists")(t,e,n),t=c.subParser("codeBlocks")(t,e,n),t=c.subParser("tables")(t,e,n),t=c.subParser("hashHTMLBlocks")(t,e,n),c.subParser("paragraphs")(t,e,n)})),c.subParser("blockQuotes",(function(t,e,n){"use strict";return t.replace(/((^[ \t]{0,3}>[ \t]?.+\n(.+\n)*\n*)+)/gm,(function(t,a){var r=a;return r=r.replace(/^[ \t]*>[ \t]?/gm,"~0"),r=r.replace(/~0/g,""),r=r.replace(/^[ \t]+$/gm,""),r=c.subParser("githubCodeBlocks")(r,e,n),r=c.subParser("blockGamut")(r,e,n),r=r.replace(/(^|\n)/g,"$1  "),r=r.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,(function(t,e){var n=e;return n=n.replace(/^  /gm,"~0"),n.replace(/~0/g,"")})),c.subParser("hashBlock")("<blockquote>\n"+r+"\n</blockquote>",e,n)}))})),c.subParser("codeBlocks",(function(t,e,n){"use strict";t+="~0";var a=/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g;return t=t.replace(a,(function(t,a,r){var o=a,i=r,s="\n";return o=c.subParser("outdent")(o),o=c.subParser("encodeCode")(o),o=c.subParser("detab")(o),o=o.replace(/^\n+/g,""),o=o.replace(/\n+$/g,""),e.omitExtraWLInCodeBlocks&&(s=""),o="<pre><code>"+o+s+"</code></pre>",c.subParser("hashBlock")(o,e,n)+i})),t.replace(/~0/,"")})),c.subParser("codeSpans",(function(t){"use strict";return t=t.replace(/(<code[^><]*?>)([^]*?)<\/code>/g,(function(t,e,n){return n=n.replace(/^([ \t]*)/g,""),n=n.replace(/[ \t]*$/g,""),n=c.subParser("encodeCode")(n),e+n+"</code>"})),t.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,(function(t,e,n,a){var r=a;return r=r.replace(/^([ \t]*)/g,""),r=r.replace(/[ \t]*$/g,""),r=c.subParser("encodeCode")(r),e+"<code>"+r+"</code>"}))})),c.subParser("detab",(function(t){"use strict";return t=t.replace(/\t(?=\t)/g,"    "),t=t.replace(/\t/g,"~A~B"),t=t.replace(/~B(.+?)~A/g,(function(t,e){for(var n=e,a=4-n.length%4,r=0;a>r;r++)n+=" ";return n})),t=t.replace(/~A/g,"    "),t.replace(/~B/g,"")})),c.subParser("encodeAmpsAndAngles",(function(t){"use strict";return t=t.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),t.replace(/<(?![a-z\/?\$!])/gi,"&lt;")})),c.subParser("encodeBackslashEscapes",(function(t){"use strict";return t=t.replace(/\\(\\)/g,c.helper.escapeCharactersCallback),t.replace(/\\([`*_{}\[\]()>#+-.!])/g,c.helper.escapeCharactersCallback)})),c.subParser("encodeCode",(function(t){"use strict";return t=t.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),c.helper.escapeCharacters(t,"*_{}[]\\",!1)})),c.subParser("encodeEmailAddress",(function(t){"use strict";var e=[function(t){return"&#"+t.charCodeAt(0)+";"},function(t){return"&#x"+t.charCodeAt(0).toString(16)+";"},function(t){return t}];return t="mailto:"+t,t=t.replace(/./g,(function(t){if("@"===t)t=e[Math.floor(2*Math.random())](t);else if(":"!==t){var n=Math.random();t=n>.9?e[2](t):n>.45?e[1](t):e[0](t)}return t})),t='<a href="'+t+'">'+t+"</a>",t.replace(/">.+:/g,'">')})),c.subParser("escapeSpecialCharsWithinTagAttributes",(function(t){"use strict";var e=/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi;return t.replace(e,(function(t){var e=t.replace(/(.)<\/?code>(?=.)/g,"$1`");return c.helper.escapeCharacters(e,"\\`*_",!1)}))})),c.subParser("githubCodeBlocks",(function(t,e,n){"use strict";return e.ghCodeBlocks?(t+="~0",t=t.replace(/(?:^|\n)```(.*)\n([\s\S]*?)\n```/g,(function(t,a,r){var o=e.omitExtraWLInCodeBlocks?"":"\n";return r=c.subParser("encodeCode")(r),r=c.subParser("detab")(r),r=r.replace(/^\n+/g,""),r=r.replace(/\n+$/g,""),r="<pre><code"+(a?' class="'+a+" language-"+a+'"':"")+">"+r+o+"</code></pre>",c.subParser("hashBlock")(r,e,n)})),t=t.replace(/~0/,"")):t})),c.subParser("hashBlock",(function(t,e,n){"use strict";return t=t.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(n.gHtmlBlocks.push(t)-1)+"K\n\n"})),c.subParser("hashElement",(function(t,e,n){"use strict";return function(t,e){var a=e;return a=a.replace(/\n\n/g,"\n"),a=a.replace(/^\n/,""),a=a.replace(/\n+$/g,""),"\n\n~K"+(n.gHtmlBlocks.push(a)-1)+"K\n\n"}})),c.subParser("hashHTMLBlocks",(function(t,e,n){"use strict";return t=t.replace(/\n/g,"\n\n"),t=t.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,c.subParser("hashElement")(t,e,n)),t=t.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|style|section|header|footer|nav|article|aside|address|audio|canvas|figure|hgroup|output|video)\b[^\r]*?<\/\2>[ \t]*(?=\n+)\n)/gm,c.subParser("hashElement")(t,e,n)),t=t.replace(/(\n[ ]{0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,c.subParser("hashElement")(t,e,n)),t=t.replace(/(\n\n[ ]{0,3}<!(--[^\r]*?--\s*)+>[ \t]*(?=\n{2,}))/g,c.subParser("hashElement")(t,e,n)),t=t.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,c.subParser("hashElement")(t,e,n)),t.replace(/\n\n/g,"\n")})),c.subParser("headers",(function(t,e,n){"use strict";function a(t){var e,a=t.replace(/[^\w]/g,"").toLowerCase();return n.hashLinkCounts[a]?e=a+"-"+n.hashLinkCounts[a]++:(e=a,n.hashLinkCounts[a]=1),!0===r&&(r="section"),c.helper.isString(r)?r+e:e}var r=e.prefixHeaderId,o=isNaN(parseInt(e.headerLevelStart))?1:parseInt(e.headerLevelStart),i=e.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,s=e.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;return t=t.replace(i,(function(t,r){var i=c.subParser("spanGamut")(r,e,n),s=e.noHeaderId?"":' id="'+a(r)+'"',u=o,l="<h"+u+s+">"+i+"</h"+u+">";return c.subParser("hashBlock")(l,e,n)})),t=t.replace(s,(function(t,r){var i=c.subParser("spanGamut")(r,e,n),s=e.noHeaderId?"":' id="'+a(r)+'"',u=o+1,l="<h"+u+s+">"+i+"</h"+u+">";return c.subParser("hashBlock")(l,e,n)})),t.replace(/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm,(function(t,r,i){var s=c.subParser("spanGamut")(i,e,n),u=e.noHeaderId?"":' id="'+a(i)+'"',l=o-1+r.length,d="<h"+l+u+">"+s+"</h"+l+">";return c.subParser("hashBlock")(d,e,n)}))})),c.subParser("images",(function(t,e,n){"use strict";function a(t,e,a,r,o,i,s,u){var l=n.gUrls,d=n.gTitles,p=n.gDimensions;if(a=a.toLowerCase(),u||(u=""),""===r||null===r){if((""===a||null===a)&&(a=e.toLowerCase().replace(/ ?\n/g," ")),r="#"+a,c.helper.isUndefined(l[a]))return t;r=l[a],c.helper.isUndefined(d[a])||(u=d[a]),c.helper.isUndefined(p[a])||(o=p[a].width,i=p[a].height)}e=e.replace(/"/g,"&quot;"),e=c.helper.escapeCharacters(e,"*_",!1),r=c.helper.escapeCharacters(r,"*_",!1);var h='<img src="'+r+'" alt="'+e+'"';return u&&(u=u.replace(/"/g,"&quot;"),u=c.helper.escapeCharacters(u,"*_",!1),h+=' title="'+u+'"'),o&&i&&(o="*"===o?"auto":o,i="*"===i?"auto":i,h+=' width="'+o+'"',h+=' height="'+i+'"'),h+" />"}var r=/!\[(.*?)]\s?\([ \t]*()<?(\S+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(['"])(.*?)\6[ \t]*)?\)/g,o=/!\[(.*?)][ ]?(?:\n[ ]*)?\[(.*?)]()()()()()/g;return t=t.replace(o,a),t.replace(r,a)})),c.subParser("italicsAndBold",(function(t,e){"use strict";return e.literalMidWordUnderscores?(t=t.replace(/(^|\s|>|\b)__(?=\S)([^]+?)__(?=\b|<|\s|$)/gm,"$1<strong>$2</strong>"),t=t.replace(/(^|\s|>|\b)_(?=\S)([^]+?)_(?=\b|<|\s|$)/gm,"$1<em>$2</em>"),t=t.replace(/\*\*(?=\S)([^]+?)\*\*/g,"<strong>$1</strong>"),t=t.replace(/\*(?=\S)([^]+?)\*/g,"<em>$1</em>")):(t=t.replace(/(\*\*|__)(?=\S)([^\r]*?\S[*_]*)\1/g,"<strong>$2</strong>"),t=t.replace(/(\*|_)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>")),t})),c.subParser("lists",(function(t,e,n){"use strict";function a(t,a){n.gListLevel++,t=t.replace(/\n{2,}$/,"\n"),t+="~0";var r=/(\n)?(^[ \t]*)([*+-]|\d+[.])[ \t]+((\[(x| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(~0|\2([*+-]|\d+[.])[ \t]+))/gm,o=/\n[ \t]*\n(?!~0)/.test(t);return t=t.replace(r,(function(t,a,r,i,s,u,l){l=l&&""!==l.trim();var d=c.subParser("outdent")(s,e,n),p="";return u&&e.tasklists&&(p=' class="task-list-item" style="list-style-type: none;"',d=d.replace(/^[ \t]*\[(x| )?]/m,(function(){var t='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';return l&&(t+=" checked"),t+">"}))),a||d.search(/\n{2,}/)>-1?(d=c.subParser("githubCodeBlocks")(d,e,n),d=c.subParser("blockGamut")(d,e,n)):(d=c.subParser("lists")(d,e,n),d=d.replace(/\n$/,""),d=o?c.subParser("paragraphs")(d,e,n):c.subParser("spanGamut")(d,e,n)),"\n<li"+p+">"+d+"</li>\n"})),t=t.replace(/~0/g,""),n.gListLevel--,a&&(t=t.replace(/\s+$/,"")),t}function r(t,e,n){var r="ul"===e?/^ {0,2}\d+\.[ \t]/gm:/^ {0,2}[*+-][ \t]/gm,o=[],i="";if(-1!==t.search(r)){!function t(o){var s=o.search(r);-1!==s?(i+="\n\n<"+e+">"+a(o.slice(0,s),!!n)+"</"+e+">\n\n",e="ul"===e?"ol":"ul",r="ul"===e?/^ {0,2}\d+\.[ \t]/gm:/^ {0,2}[*+-][ \t]/gm,t(o.slice(s))):i+="\n\n<"+e+">"+a(o,!!n)+"</"+e+">\n\n"}(t);for(var s=0;s<o.length;++s);}else i="\n\n<"+e+">"+a(t,!!n)+"</"+e+">\n\n";return i}t+="~0";var o=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;return n.gListLevel?t=t.replace(o,(function(t,e,n){var a=n.search(/[*+-]/g)>-1?"ul":"ol";return r(e,a,!0)})):(o=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,t=t.replace(o,(function(t,e,n,a){var o=a.search(/[*+-]/g)>-1?"ul":"ol";return r(n,o)}))),t.replace(/~0/,"")})),c.subParser("outdent",(function(t){"use strict";return t=t.replace(/^(\t|[ ]{1,4})/gm,"~0"),t.replace(/~0/g,"")})),c.subParser("paragraphs",(function(t,e,n){"use strict";t=t.replace(/^\n+/g,""),t=t.replace(/\n+$/g,"");for(var a=t.split(/\n{2,}/g),r=[],o=a.length,i=0;o>i;i++){var s=a[i];s.search(/~K(\d+)K/g)>=0?r.push(s):s.search(/\S/)>=0&&(s=c.subParser("spanGamut")(s,e,n),s=s.replace(/^([ \t]*)/g,"<p>"),s+="</p>",r.push(s))}for(o=r.length,i=0;o>i;i++)for(;r[i].search(/~K(\d+)K/)>=0;){var u=n.gHtmlBlocks[RegExp.$1];u=u.replace(/\$/g,"$$$$"),r[i]=r[i].replace(/~K\d+K/,u)}return r.join("\n\n")})),c.subParser("runExtension",(function(t,e,n,a){"use strict";if(t.filter)e=t.filter(e,a.converter,n);else if(t.regex){var r=t.regex;!r instanceof RegExp&&(r=new RegExp(r,"g")),e=e.replace(r,t.replace)}return e})),c.subParser("spanGamut",(function(t,e,n){"use strict";return t=c.subParser("codeSpans")(t,e,n),t=c.subParser("escapeSpecialCharsWithinTagAttributes")(t,e,n),t=c.subParser("encodeBackslashEscapes")(t,e,n),t=c.subParser("images")(t,e,n),t=c.subParser("anchors")(t,e,n),t=c.subParser("autoLinks")(t,e,n),t=c.subParser("encodeAmpsAndAngles")(t,e,n),t=c.subParser("italicsAndBold")(t,e,n),t=c.subParser("strikethrough")(t,e,n),t.replace(/  +\n/g," <br />\n")})),c.subParser("strikethrough",(function(t,e){"use strict";return e.strikethrough&&(t=t.replace(/(?:~T){2}([^~]+)(?:~T){2}/g,"<del>$1</del>")),t})),c.subParser("stripBlankLines",(function(t){"use strict";return t.replace(/^[ \t]+$/gm,"")})),c.subParser("stripLinkDefinitions",(function(t,e,n){"use strict";var a=/^ {0,3}\[(.+)]:[ \t]*\n?[ \t]*<?(\S+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=~0))/gm;return t+="~0",t=t.replace(a,(function(t,a,r,o,i,s,u){return a=a.toLowerCase(),n.gUrls[a]=c.subParser("encodeAmpsAndAngles")(r),s?s+u:(u&&(n.gTitles[a]=u.replace(/"|'/g,"&quot;")),e.parseImgDimensions&&o&&i&&(n.gDimensions[a]={width:o,height:i}),"")})),t.replace(/~0/,"")})),c.subParser("tables",(function(t,e,n){"use strict";var a=function(){var t,a={th:function(t,a){var r="";return t=t.trim(),""===t?"":(e.tableHeaderId&&(r=' id="'+t.replace(/ /g,"_").toLowerCase()+'"'),t=c.subParser("spanGamut")(t,e,n),a=a&&""!==a.trim()?' style="'+a+'"':"","<th"+r+a+">"+t+"</th>")},td:function(t,a){var r=c.subParser("spanGamut")(t.trim(),e,n);return a=a&&""!==a.trim()?' style="'+a+'"':"","<td"+a+">"+r+"</td>"},ths:function(){var t="",e=0,n=[].slice.apply(arguments[0]),r=[].slice.apply(arguments[1]);for(e;e<n.length;e+=1)t+=a.th(n[e],r[e])+"\n";return t},tds:function(){var t="",e=0,n=[].slice.apply(arguments[0]),r=[].slice.apply(arguments[1]);for(e;e<n.length;e+=1)t+=a.td(n[e],r[e])+"\n";return t},thead:function(){var t,e=[].slice.apply(arguments[0]),n=[].slice.apply(arguments[1]);return t="<thead>\n",t+="<tr>\n",t+=a.ths.apply(this,[e,n]),t+="</tr>\n",t+"</thead>\n"},tr:function(){var t,e=[].slice.apply(arguments[0]),n=[].slice.apply(arguments[1]);return t="<tr>\n",t+=a.tds.apply(this,[e,n]),t+"</tr>\n"}};return t=function(t){var e,n,r=0,o=t.split("\n"),i=[];for(r;r<o.length;r+=1){if(e=o[r],e.trim().match(/^[|].*[|]$/)){e=e.trim();var s=[],c=o[r+1].trim(),u=[],l=0;if(c.match(/^[|][-=|: ]+[|]$/))for(u=c.substring(1,c.length-1).split("|"),l=0;l<u.length;++l)u[l]=u[l].trim(),u[l].match(/^[:][-=| ]+[:]$/)?u[l]="text-align:center;":u[l].match(/^[-=| ]+[:]$/)?u[l]="text-align:right;":u[l].match(/^[:][-=| ]+$/)?u[l]="text-align:left;":u[l]="";if(s.push("<table>"),n=e.substring(1,e.length-1).split("|"),0===u.length)for(l=0;l<n.length;++l)u.push("text-align:left");if(s.push(a.thead.apply(this,[n,u])),e=o[++r],e.trim().match(/^[|][-=|: ]+[|]$/)){for(e=o[++r],s.push("<tbody>");e.trim().match(/^[|].*[|]$/);)e=e.trim(),s.push(a.tr.apply(this,[e.substring(1,e.length-1).split("|"),u])),e=o[++r];s.push("</tbody>"),s.push("</table>"),i.push(s.join("\n"));continue}e=o[--r]}i.push(e)}return i.join("\n")},{parse:t}};if(e.tables){var r=a();return r.parse(t)}return t})),c.subParser("unescapeSpecialChars",(function(t){"use strict";return t.replace(/~E(\d+)E/g,(function(t,e){var n=parseInt(e);return String.fromCharCode(n)}))}));t.exports?t.exports=c:(a=function(){"use strict";return c}.call(e,n,e,t),void 0===a||(t.exports=a))}.call(this)}}]);